import{r as f}from"./validators-BHkKs9Dp.js";import{au as h,r as s,Y as k,w as E,f as N,e as o,i as O,j as Q,o as I,b as r,m as a,t as R,a2 as J,a4 as v,a1 as Y}from"./main-CCs6bh3s.js";import{_ as z}from"./ShowAlert-DMVySfvn.js";import{_ as G}from"./AppTextField-Ct9D5HwN.js";import{Q as H}from"./vue-quill.snow-C6vFN5mO.js";import{u as K}from"./useApi-C4SlCKRK.js";import{c as L}from"./createUrl-947xzQg3.js";import{$ as U}from"./api-CCQ-3yc0.js";import{V as W}from"./VCard-T2zrQbq8.js";import{V as T}from"./VCardText-ZjZeaPvI.js";import{V as A,a as u}from"./VRow-BoGaUT1d.js";import{V as g}from"./VAutocomplete-CoPCA9B9.js";import{V as X}from"./VForm-C4_lLtZ_.js";import"./VOverlay-CbalWj9L.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-CVm_ZQhA.js";import"./VTextField-BaS9oZAw.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-9rIf2CJL.js";import"./VAvatar-pIOnFHia.js";/* empty css              */import"./filter-DIHIEcpB.js";import"./VList-CmeArdoj.js";import"./VDivider-CaDdpO1D.js";import"./dialog-transition-BhkjpEgr.js";import"./VMenu-r7Cn3oJn.js";import"./VCheckboxBtn-G6A6nYkI.js";import"./VChip-DeHB0WxW.js";const Ta={__name:"[id]",async setup(Z){let V,q;const w=O(),F=Q(),{data:_,execute:aa}=([V,q]=h(()=>K(L("/referensi/show",{query:{data:"materi-ajar",id:w.params.id}}))),V=await V,q(),V),m=s({icon:null,title:null,text:null,color:null}),j=s(!1),d=s(!1),p=k(()=>_.value.materi),y=k(()=>_.value.rombel),S=k(()=>_.value.pembelajaran),i=s({tingkat:p.value.pembelajaran.rombongan_belajar.tingkat,rombongan_belajar_id:p.value.pembelajaran.rombongan_belajar_id,pembelajaran_id:p.value.pembelajaran_id,judul:p.value.judul,deskripsi:p.value.deskripsi}),P=[10,11,12,13],c=s(!1),D=s(),M=async()=>{var l;(l=D.value)==null||l.validate().then(async({valid:e})=>{if(e){const n=new FormData;n.append("data","update-materi-ajar"),n.append("materi_ajar_id",w.params.id);for(const[b,t]of Object.entries(i.value))n.append(b,t||"");await U("/referensi/store",{method:"POST",body:n,onResponse({request:b,response:t,options:ea}){let B=t._data;m.value=B,j.value=!0}})}})},$=async l=>{i.value.rombongan_belajar_id=null,C({data:"rombel",tingkat:l})},x=async l=>{i.value.pembelajaran_id=null,C({data:"pembelajaran",rombongan_belajar_id:l})},C=async l=>{await U("/referensi",{query:l,onResponse({request:e,response:n,options:b}){let t=n._data;l.data=="rombel"&&(y.value=t),l.data=="pembelajaran"&&(S.value=t)}})};return E(d,()=>{d.value&&F.push({name:"materi-ajar"})}),(l,e)=>{const n=G,b=z;return I(),N(W,{title:"Edit Data Materi Ajar"},{default:o(()=>[r(X,{ref_key:"refForm",ref:D,modelValue:a(c),"onUpdate:modelValue":e[5]||(e[5]=t=>v(c)?c.value=t:null),onSubmit:Y(M,["prevent"])},{default:o(()=>[r(T,null,{default:o(()=>[r(A,null,{default:o(()=>[r(u,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).tingkat,"onUpdate:modelValue":[e[0]||(e[0]=t=>a(i).tingkat=t),$],label:"Tingkat",variant:"outlined",items:P,placeholder:"== Pilih Tingkat ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","rules"])]),_:1}),r(u,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).rombongan_belajar_id,"onUpdate:modelValue":[e[1]||(e[1]=t=>a(i).rombongan_belajar_id=t),x],label:"Rombel",variant:"outlined",items:a(y),"item-title":"nama","item-value":"rombongan_belajar_id",placeholder:"== Pilih Rombel ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","items","rules"])]),_:1}),r(u,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).pembelajaran_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a(i).pembelajaran_id=t),label:"Mata Pelajaran",variant:"outlined",items:a(S),"item-title":"nama_mata_pelajaran","item-value":"pembelajaran_id",placeholder:"== Pilih Mata Pelajaran ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","items","rules"])]),_:1}),r(u,{cols:"12"},{default:o(()=>[r(n,{modelValue:a(i).judul,"onUpdate:modelValue":e[3]||(e[3]=t=>a(i).judul=t),rules:["requiredValidator"in l?l.requiredValidator:a(f)]},{label:o(()=>e[8]||(e[8]=[R("Judul Materi")])),_:1},8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:o(()=>[r(a(H),{theme:"snow",toolbar:"full",content:a(i).deskripsi,"onUpdate:content":e[4]||(e[4]=t=>a(i).deskripsi=t),contentType:"html",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1}),r(T,{class:"mt-16"},{default:o(()=>[r(A,null,{default:o(()=>[r(u,{cols:"12",class:"text-right"},{default:o(()=>[r(J,{type:"submit"},{default:o(()=>e[9]||(e[9]=[R("Submit")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(b,{color:a(m).color,icon:a(m).icon,title:a(m).title,text:a(m).text,"disable-time-out":!1,isSnackbarVisible:a(j),"onUpdate:isSnackbarVisible":e[6]||(e[6]=t=>v(j)?j.value=t:null),isSnackbarClicked:a(d),"onUpdate:isSnackbarClicked":e[7]||(e[7]=t=>v(d)?d.value=t:null)},null,8,["color","icon","title","text","isSnackbarVisible","isSnackbarClicked"])]),_:1})}}};export{Ta as default};
