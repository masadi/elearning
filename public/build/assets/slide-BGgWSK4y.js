import{_ as te}from"./ConfirmDialog-Tn3I-RV8.js";import{_ as ae}from"./ShowAlert-Crhw45kN.js";import{r as O}from"./validators-BHkKs9Dp.js";import{r as s,o as C,f as E,w as o,a as e,u as l,i as c,k as le,b as A,p as M,g as Q,e as R,m as oe,n as U,j as ie,c as se,q as ne,l as G,t as re}from"./main-BOi3BIW1.js";import{_ as me}from"./DialogCloseBtn-CWbnsSPr.js";import{$ as H}from"./api-D8raZm_J.js";import{V as J}from"./VCard-BsxPU2or.js";import{V as ue}from"./VForm-BPF3XLYv.js";import{V as j}from"./VCardText-BtPwo1mS.js";import{V as F,a as y}from"./VRow-DExjJUWN.js";import{V as de}from"./VAutocomplete-DWeB6WZM.js";import{V as pe}from"./VFileInput-Lz0ZgLya.js";import{V as fe}from"./VDialog-BJYfLZfz.js";import{V as ge,_ as ce}from"./VDataTableServer-J8lwASIv.js";import{_ as ve}from"./AppTextField-CkipoKMD.js";import{_ as Ve}from"./AppSelect-BvjMTD9Y.js";import{u as ke}from"./useApi-CHXvmuUd.js";import{c as be}from"./createUrl-Cm60FE_Q.js";import{V as _e}from"./VSpacer-DBiLwPOJ.js";import{V as ye}from"./VDivider-B06OBMyi.js";import{V as he}from"./VImg-B2SqCbwD.js";import"./VOverlay-bOV7N2Sq.js";import"./forwardRefs-D3j0TLhE.js";import"./index-BxkgbwWS.js";import"./VAvatar-DBL2rIYL.js";import"./VInput-u888SdWy.js";/* empty css              */import"./VTextField-CnSWxS1r.js";import"./VList-yTRHr5Kb.js";import"./ssrBoot-B1UlT3gE.js";import"./VMenu-DNeMfofa.js";import"./dialog-transition-18JHODqx.js";import"./VCheckboxBtn-CwSHgSnK.js";import"./VSelectionControl-DLPwGM7h.js";import"./VChip-OBybeT-t.js";const De={__name:"AddSlideDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},kontenType:{type:String,required:!0},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(q,{emit:k}){const v=q,m=s(!1),u=k,n=s({sekolah_id:v.sekolahId,gambar:null,data:v.kontenType}),d=s(!1),p=s(),h=async()=>{var f;(f=p.value)==null||f.validate().then(async({valid:i})=>{if(i){m.value=!0;const V=new FormData;V.append("data",n.value.data??""),V.append("sekolah_id",n.value.sekolah_id??""),V.append("gambar",n.value.gambar??""),await H("/admin/konten/store",{method:"POST",body:V,onResponse({request:r,response:D,options:z}){let x=D._data;u("notif",x),b()}})}})},b=()=>{u("update:isDialogVisible",!1),m.value=!1,n.value={sekolah_id:v.sekolahId,gambar:null,data:v.kontenType},p.value.resetValidation()};return(f,i)=>{const V=me;return C(),E(fe,{width:"500","model-value":v.isDialogVisible,"onUpdate:modelValue":b},{default:o(()=>[e(V,{onClick:b}),e(J,{title:"Upload Slide"},{default:o(()=>[e(l(ue),{ref_key:"refForm",ref:p,modelValue:l(d),"onUpdate:modelValue":i[2]||(i[2]=r=>c(d)?d.value=r:null),onSubmit:le(h,["prevent"])},{default:o(()=>[e(j,null,{default:o(()=>[e(F,null,{default:o(()=>[f.$can("create","laman-tentang-create")?M("",!0):(C(),E(y,{key:0,cols:"12"},{default:o(()=>[e(F,{"no-gutters":""},{default:o(()=>[e(y,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>i[3]||(i[3]=[A("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(y,{cols:"12",md:"9"},{default:o(()=>[e(de,{modelValue:l(n).sekolah_id,"onUpdate:modelValue":i[0]||(i[0]=r=>l(n).sekolah_id=r),variant:"outlined",items:q.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in f?f.requiredValidator:l(O)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),e(y,{cols:"12"},{default:o(()=>[e(F,{"no-gutters":""},{default:o(()=>[e(y,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>i[4]||(i[4]=[A("label",{class:"v-label text-body-2 text-high-emphasis",for:"gambar"},"Gambar",-1)])),_:1}),e(y,{cols:"12",md:"9"},{default:o(()=>[e(pe,{accept:"image/*",modelValue:l(n).gambar,"onUpdate:modelValue":i[1]||(i[1]=r=>l(n).gambar=r),rules:["requiredValidator"in f?f.requiredValidator:l(O)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{class:"d-flex justify-end"},{default:o(()=>[e(Q,{type:"submit"},{default:o(()=>i[5]||(i[5]=[R(" Simpan ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}},xe={class:"d-flex gap-2 align-center"},Se={class:"d-flex align-center flex-wrap gap-4"},N="slide",nt={__name:"slide",async setup(q){let k,v;const m=s({icon:null,title:null,text:null,color:null}),u=s(!1),n=s(""),d=s(10),p=s(1),h=s("created_at"),b=s("DESC"),f=g=>{var t,_;g.sortBy.length&&(h.value=(t=g.sortBy[0])==null?void 0:t.key,b.value=(_=g.sortBy[0])==null?void 0:_.order)},i=[{title:"sekolah",key:"sekolah",sortable:!1},{title:"gambar",key:"gambar",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],V=g=>{m.value=g,u.value=!0},{data:r,execute:D}=([k,v]=oe(()=>ke(be("/table",{query:{data:N,q:n,itemsPerPage:d,page:p,sortBy:h,orderBy:b}}))),k=await k,v(),k);r.value.color&&(m.value=r.value,u.value=!0);const z=U(()=>r.value.lists.data),x=U(()=>r.value.lists.total),$=U(()=>r.value.sekolah),B=U(()=>r.value.sekolah_id),S=s(!1),I=s(),w=s(),K=async g=>{I.value=g,w.value=!0},W=async g=>{g&&await H(`/admin/konten/destroy/slide/${I.value}`,{method:"DELETE",onResponse({request:t,response:_,options:L}){let T=_._data;m.value=T,u.value=!0,I.value=null,D()}})};return ie(u,()=>{u.value||D()}),(g,t)=>{const _=Ve,L=ve,T=ne("IconBtn"),X=ce,Y=De,Z=ae,ee=te;return C(),se("section",null,[e(J,null,{default:o(()=>[e(j,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[A("div",xe,[e(_,{"model-value":l(d),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=parseInt(a,10))},null,8,["model-value"])]),e(_e),A("div",Se,[e(L,{modelValue:l(n),"onUpdate:modelValue":t[1]||(t[1]=a=>c(n)?n.value=a:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(Q,{onClick:t[2]||(t[2]=a=>S.value=!0)},{default:o(()=>[t[12]||(t[12]=R("Tambah ")),e(G,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(ye),e(ge,{"items-per-page":l(d),"onUpdate:itemsPerPage":t[4]||(t[4]=a=>c(d)?d.value=a:null),page:l(p),"onUpdate:page":t[5]||(t[5]=a=>c(p)?p.value=a:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(z),"items-length":l(x),headers:i,class:"text-no-wrap","onUpdate:options":f},{"item.sekolah":o(({item:a})=>{var P;return[R(re(((P=a.sekolah)==null?void 0:P.nama)??"-"),1)]}),"item.gambar":o(({item:a})=>[e(he,{fluid:"",src:`/storage/images/${a.gambar}`,"max-width":"200","max-height":"100"},null,8,["src"])]),"item.actions":o(({item:a})=>[e(T,{onClick:P=>K(a.id)},{default:o(()=>[e(G,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:o(()=>[e(X,{page:l(p),"onUpdate:page":t[3]||(t[3]=a=>c(p)?p.value=a:null),"items-per-page":l(d),"total-items":l(x)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(Y,{"is-dialog-visible":l(S),"onUpdate:isDialogVisible":t[6]||(t[6]=a=>c(S)?S.value=a:null),sekolah:l($),"onUpdate:sekolah":t[7]||(t[7]=a=>c($)?$.value=a:null),sekolahId:l(B),"onUpdate:sekolahId":t[8]||(t[8]=a=>c(B)?B.value=a:null),"konten-type":N,"onUpdate:kontenType":t[9]||(t[9]=a=>N=a),onNotif:V},null,8,["is-dialog-visible","sekolah","sekolahId"]),l(m).color?(C(),E(Z,{key:0,color:l(m).color,icon:l(m).icon,title:l(m).title,text:l(m).text,"disable-time-out":!1,isSnackbarVisible:l(u),"onUpdate:isSnackbarVisible":t[10]||(t[10]=a=>c(u)?u.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):M("",!0),e(ee,{isDialogVisible:l(w),"onUpdate:isDialogVisible":t[11]||(t[11]=a=>c(w)?w.value=a:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:W},null,8,["isDialogVisible"])])}}};export{nt as default};
