import{r as f}from"./validators-BHkKs9Dp.js";import{r as V,j as C,o as b,f as T,w as a,a as e,b as u,g as q,l as B,e as _,t as x,u as o,i as U,k as I,p as S,c as N,F as A}from"./main-DvRLx4Ig.js";import{_ as R}from"./AppTextField-lbZ9f4rW.js";import{Q as $}from"./vue-quill.esm-bundler-BtWvKdos.js";/* empty css                       */import{$ as E}from"./api-UL3iJM2A.js";import{V as L}from"./VCard-iCYjdUP9.js";import{V as j,a as O}from"./VToolbar-YZrYFidv.js";import{V as P}from"./VSpacer-CgmCCiSR.js";import{V as Q}from"./VToolbarItems-DpthHilM.js";import{V as z}from"./VCardText-DAL9ICqB.js";import{V as G}from"./VForm-CwZEEFWs.js";import{V as p,a as n}from"./VRow-DDxWiGdz.js";import{V as M}from"./VAutocomplete-biOO0CQB.js";import{V as H}from"./VFileInput-CB3TmVwi.js";import{V as J}from"./VDialog-BPESWjhC.js";const K={class:"text-capitalize"},fe={__name:"LamanAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},pageType:{type:String,required:!0},detilData:{type:Object,required:!1,default:null},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(m,{emit:w}){const i=m,y=V(!1),k=w,c=V(!1),v=V(),t=V({id:"",sekolah_id:i.sekolahId,type:i.pageType,content:null,foto:null,nama:null}),h=async()=>{var s;(s=v.value)==null||s.validate().then(async({valid:l})=>{if(l){y.value=!0;const r=new FormData;r.append("id",t.value.id),r.append("sekolah_id",t.value.sekolah_id),r.append("type",t.value.type),r.append("content",t.value.content),r.append("foto",t.value.foto),r.append("nama",t.value.nama),await E("/admin/laman/store",{method:"POST",body:r,onResponse({request:d,response:F,options:W}){let D=F._data;console.log(D),console.log(r),g(),k("notif",D)}})}})},g=()=>{k("update:isDialogVisible",!1),y.value=!1,t.value={id:"",sekolah_id:null,type:i.pageType,content:null,foto:null,nama:null}};return C(i,async()=>{i.isDialogVisible&&i.detilData&&(t.value={id:i.detilData.id,sekolah_id:i.detilData.sekolah_id,type:i.pageType,content:i.pageType=="program"?i.detilData.deskripsi:i.detilData.content,foto:null,nama:i.detilData.nama})}),(s,l)=>{const r=R;return b(),T(J,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":i.isDialogVisible,"onUpdate:modelValue":g},{default:a(()=>[e(L,null,{default:a(()=>[u("div",null,[e(j,{color:"primary"},{default:a(()=>[e(q,{icon:"",variant:"plain",onClick:g},{default:a(()=>[e(B,{color:"white",icon:"tabler-x"})]),_:1}),e(O,null,{default:a(()=>[_(x(m.detilData?"Edit":"Tambah")+" Laman ",1),u("span",K,x(m.pageType),1)]),_:1}),e(P),e(Q,null,{default:a(()=>[e(q,{variant:"text",onClick:h},{default:a(()=>l[5]||(l[5]=[_("Simpan")])),_:1})]),_:1})]),_:1})]),e(z,null,{default:a(()=>[e(o(G),{ref_key:"refForm",ref:v,modelValue:o(c),"onUpdate:modelValue":l[4]||(l[4]=d=>U(c)?c.value=d:null),onSubmit:I(h,["prevent"])},{default:a(()=>[e(p,null,{default:a(()=>[s.$can("create","laman-tentang-create")?S("",!0):(b(),T(n,{key:0,cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[6]||(l[6]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(M,{modelValue:o(t).sekolah_id,"onUpdate:modelValue":l[0]||(l[0]=d=>o(t).sekolah_id=d),variant:"outlined",items:m.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),m.pageType=="program"?(b(),N(A,{key:1},[e(n,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[7]||(l[7]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(r,{id:"nama",modelValue:o(t).nama,"onUpdate:modelValue":l[1]||(l[1]=d=>o(t).nama=d),rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(n,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[8]||(l[8]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"foto"},"Gambar",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(H,{accept:"image/*",modelValue:o(t).foto,"onUpdate:modelValue":l[2]||(l[2]=d=>o(t).foto=d),rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})],64)):S("",!0),e(n,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[9]||(l[9]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"content"},"Deskripsi",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(o($),{theme:"snow",toolbar:"full",content:o(t).content,"onUpdate:content":l[3]||(l[3]=d=>o(t).content=d),contentType:"html",rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{fe as _};
