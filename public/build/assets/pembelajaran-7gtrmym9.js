import{_ as de}from"./ConfirmDialog-DyDHxuXF.js";import{_ as ue}from"./ShowAlert-D9zZQhHJ.js";import{r as T}from"./validators-BHkKs9Dp.js";import{r as d,j as K,o as A,f as L,w as a,a as e,b as g,g as R,l as w,e as _,t as M,u as l,i as v,k as me,p as W,c as Q,F as pe,d as fe,m as ve,n as $,q as Ve}from"./main-DGGXfPyt.js";import{_ as X}from"./AppTextField-BqE0bXKK.js";/* empty css                       */import{$ as Y}from"./api-ByTkvqPp.js";import{V as Z}from"./VCard-B1AXXK6m.js";import{V as ce,a as be}from"./VToolbar-C6jsUFAK.js";import{V as ee}from"./VSpacer-BVrLeiWu.js";import{V as ge}from"./VToolbarItems-BAL1nMU8.js";import{V as ae}from"./VCardText-CC4eLI8x.js";import{V as _e}from"./VForm-CMVaChRn.js";import{V as q,a as m}from"./VRow-C-SLgD0h.js";import{V as J}from"./VAutocomplete-DhtnNvlA.js";import{V as ke}from"./VFileInput-BzPyPim6.js";import{V as je}from"./VDialog-DEU8ctk1.js";import{V as ye,_ as De}from"./VDataTableServer-Ds6bJZBs.js";import{_ as he}from"./AppSelect-cTe-qY5-.js";import{u as xe}from"./useApi-Dn0kKbwg.js";import{c as Pe}from"./createUrl-OYUJZZiN.js";import{V as qe}from"./VDivider-BpnhaN6V.js";import"./VOverlay-BUCQayP_.js";import"./forwardRefs-D9kYFWgq.js";import"./VImg-BHw_tJ49.js";import"./VInput-Dzt7_UQe.js";import"./VTextField-J159dh9-.js";import"./index-BxkgbwWS.js";import"./VAvatar-538ZGkS3.js";/* empty css              */import"./VList-DQTVXgSx.js";import"./ssrBoot-CvqiWMs1.js";import"./VMenu-D5LgN0GC.js";import"./dialog-transition-Vx160TM8.js";import"./VCheckboxBtn-D5sEw91T.js";import"./VSelectionControl-CVAksmtn.js";import"./VChip--_NYtHRp.js";const Ae={class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},Ue={class:"mb-2"},Ce={__name:"PembelajaranAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},mataPelajaran:{type:Array,required:!0},detilData:{type:Object,required:!1,default:null},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(I,{emit:y}){const u=I,V=y,p=d(!1),k=d(),s=d({id:null,sekolah_id:u.sekolahId,mata_pelajaran_id:null,judul:null,foto:[],status:null}),b=d(1),j=d([{id:1,gambar:null}]),U=async()=>{var n;(n=k.value)==null||n.validate().then(async({valid:i})=>{if(i){const c=new FormData;c.append("id",s.value.id??""),c.append("sekolah_id",s.value.sekolah_id??""),c.append("mata_pelajaran_id",s.value.mata_pelajaran_id??""),c.append("judul",s.value.judul??""),j.value.forEach(r=>{c.append(`foto[${r.id}]`,s.value.foto[r.id]??"")}),c.append("status",s.value.status??""),await Y("/admin/pembelajaran/store",{method:"POST",body:c,onResponse({request:r,response:D,options:h}){let S=D._data;C(),V("notif",S)}})}})},C=()=>{V("update:isDialogVisible",!1),s.value={id:null,sekolah_id:u.sekolahId,mata_pelajaran_id:null,judul:null,foto:[],status:null},j.value=[{id:1,gambar:null}],b.value=1};K(u,async()=>{u.isDialogVisible&&u.detilData&&(s.value={id:u.detilData.pembelajaran_id,sekolah_id:u.detilData.sekolah_id,mata_pelajaran_id:u.detilData.mata_pelajaran_id,judul:u.detilData.judul,foto:[],status:u.detilData.status})});const O=[{title:"Aktif",value:"1"},{title:"Tidak Aktif",value:"0"}],z=()=>{j.value.push({id:b.value+=1})};return(n,i)=>{const c=X;return A(),L(je,{fullscreen:"",scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":u.isDialogVisible,"onUpdate:modelValue":C},{default:a(()=>[e(Z,null,{default:a(()=>[g("div",null,[e(ce,{color:"primary"},{default:a(()=>[e(R,{icon:"",variant:"plain",onClick:C},{default:a(()=>[e(w,{color:"white",icon:"tabler-x"})]),_:1}),e(be,null,{default:a(()=>[_(M(I.detilData?"Edit":"Tambah")+" Pembelajaran ",1)]),_:1}),e(ee),e(ge,null,{default:a(()=>[e(R,{variant:"text",onClick:U},{default:a(()=>i[5]||(i[5]=[_("Simpan")])),_:1})]),_:1})]),_:1})]),e(ae,null,{default:a(()=>[e(l(_e),{ref_key:"refForm",ref:k,modelValue:l(p),"onUpdate:modelValue":i[4]||(i[4]=r=>v(p)?p.value=r:null),onSubmit:me(U,["prevent"])},{default:a(()=>[e(q,null,{default:a(()=>[n.$can("create","laman-tentang-create")?W("",!0):(A(),L(m,{key:0,cols:"12"},{default:a(()=>[e(q,{"no-gutters":""},{default:a(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>i[6]||(i[6]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:a(()=>[e(J,{modelValue:l(s).sekolah_id,"onUpdate:modelValue":i[0]||(i[0]=r=>l(s).sekolah_id=r),variant:"outlined",items:I.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in n?n.requiredValidator:l(T)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),e(m,{cols:"12"},{default:a(()=>[e(q,{"no-gutters":""},{default:a(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>i[7]||(i[7]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"mata_pelajaran_id"},"Mata Pelajaran",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:a(()=>[e(J,{modelValue:l(s).mata_pelajaran_id,"onUpdate:modelValue":i[1]||(i[1]=r=>l(s).mata_pelajaran_id=r),variant:"outlined",items:u.mataPelajaran,"item-title":"nama","item-value":"id",placeholder:"== Pilih Mata Pelajaran ==",rules:["requiredValidator"in n?n.requiredValidator:l(T)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(q,{"no-gutters":""},{default:a(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>i[8]||(i[8]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"judul"},"Judul",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:a(()=>[e(c,{id:"judul",modelValue:l(s).judul,"onUpdate:modelValue":i[2]||(i[2]=r=>l(s).judul=r),rules:["requiredValidator"in n?n.requiredValidator:l(T)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(q,{"no-gutters":""},{default:a(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>i[9]||(i[9]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"foto_id_gdrive"},"Status",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:a(()=>[e(J,{modelValue:l(s).status,"onUpdate:modelValue":i[3]||(i[3]=r=>l(s).status=r),variant:"outlined",items:O,placeholder:"== Pilih Status ==",rules:["requiredValidator"in n?n.requiredValidator:l(T)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(q,{"no-gutters":""},{default:a(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center align-start"},{default:a(()=>[g("label",Ae,[i[11]||(i[11]=_(" Gambar ")),e(R,{variant:"text",onClick:z},{default:a(()=>[i[10]||(i[10]=_("Tambah Form ")),e(w,{end:"",icon:"tabler-copy"})]),_:1})])]),_:1}),e(m,{cols:"12",md:"9"},{default:a(()=>[(A(!0),Q(pe,null,fe(l(j),(r,D)=>(A(),Q("div",Ue,[e(ke,{accept:"image/*",label:`Gambar ${r.id}`,modelValue:l(s).foto[r.id],"onUpdate:modelValue":h=>l(s).foto[r.id]=h,rules:["requiredValidator"in n?n.requiredValidator:l(T)]},null,8,["label","modelValue","onUpdate:modelValue","rules"])]))),256))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Se={class:"d-flex gap-2 align-center"},Te={class:"d-flex align-center flex-wrap gap-4"},ca={__name:"pembelajaran",async setup(I){let y,u;const V=d({icon:null,title:null,text:null,color:null}),p=d(!1),k=d(""),s=d(10),b=d(1),j=d("created_at"),U=d("DESC"),C=f=>{var t,P;f.sortBy.length&&(j.value=(t=f.sortBy[0])==null?void 0:t.key,U.value=(P=f.sortBy[0])==null?void 0:P.order)},O=[{title:"Judul",key:"judul",sortable:!1},{title:"mata pelajaran",key:"mata_pelajaran",sortable:!1},{title:"status",key:"status",sortable:!1},{title:"jml tes",key:"tes_count",sortable:!1,align:"center"},{title:"Actions",key:"actions",align:"center",sortable:!1}],z=f=>{V.value=f,p.value=!0},{data:n,execute:i}=([y,u]=ve(()=>xe(Pe("/table",{query:{data:"pembelajaran",q:k,itemsPerPage:s,page:b,sortBy:j,orderBy:U}}))),y=await y,u(),y);n.value.color&&(V.value=n.value,p.value=!0);const c=$(()=>n.value.lists.data),r=$(()=>n.value.lists.total),D=$(()=>n.value.sekolah),h=$(()=>n.value.sekolah_id),S=$(()=>n.value.mata_pelajaran),x=d(!1),G=d(),B=d(),le=async f=>{G.value=f,B.value=!0},te=async f=>{f&&await Y(`/admin/pembelajaran/destroy/${G.value}`,{method:"DELETE",onResponse({request:t,response:P,options:H}){let E=P._data;V.value=E,p.value=!0,G.value=null,i()}})},F=d(),oe=async f=>{x.value=!0,F.value=f};return K(p,()=>{p.value||i()}),(f,t)=>{const P=he,H=X,E=Ve("IconBtn"),ie=De,se=Ce,ne=ue,re=de;return A(),Q("section",null,[e(Z,null,{default:a(()=>[e(ae,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[g("div",Se,[e(P,{"model-value":l(s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=o=>s.value=parseInt(o,10))},null,8,["model-value"])]),e(ee),g("div",Te,[_(M(l(x))+" ",1),e(H,{modelValue:l(k),"onUpdate:modelValue":t[1]||(t[1]=o=>v(k)?k.value=o:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(R,{onClick:t[2]||(t[2]=o=>x.value=!0)},{default:a(()=>[t[13]||(t[13]=_("Tambah ")),e(w,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(qe),e(ye,{"items-per-page":l(s),"onUpdate:itemsPerPage":t[4]||(t[4]=o=>v(s)?s.value=o:null),page:l(b),"onUpdate:page":t[5]||(t[5]=o=>v(b)?b.value=o:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(c),"items-length":l(r),headers:O,class:"text-no-wrap","onUpdate:options":C},{"item.mata_pelajaran":a(({item:o})=>{var N;return[_(M((N=o.mata_pelajaran)==null?void 0:N.nama),1)]}),"item.status":a(({item:o})=>[_(M(o.status==1?"Aktif":"Tidak Aktif"),1)]),"item.actions":a(({item:o})=>[e(E,{onClick:N=>le(o.pembelajaran_id)},{default:a(()=>[e(w,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(E,{onClick:N=>oe(o)},{default:a(()=>[e(w,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:a(()=>[e(ie,{page:l(b),"onUpdate:page":t[3]||(t[3]=o=>v(b)?b.value=o:null),"items-per-page":l(s),"total-items":l(r)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(se,{"is-dialog-visible":l(x),"onUpdate:isDialogVisible":t[6]||(t[6]=o=>v(x)?x.value=o:null),onNotif:z,sekolah:l(D),"onUpdate:sekolah":t[7]||(t[7]=o=>v(D)?D.value=o:null),sekolahId:l(h),"onUpdate:sekolahId":t[8]||(t[8]=o=>v(h)?h.value=o:null),"detil-data":l(F),"onUpdate:detilData":t[9]||(t[9]=o=>v(F)?F.value=o:null),mataPelajaran:l(S),"onUpdate:mataPelajaran":t[10]||(t[10]=o=>v(S)?S.value=o:null)},null,8,["is-dialog-visible","sekolah","sekolahId","detil-data","mataPelajaran"]),l(V).color?(A(),L(ne,{key:0,color:l(V).color,icon:l(V).icon,title:l(V).title,text:l(V).text,"disable-time-out":!1,isSnackbarVisible:l(p),"onUpdate:isSnackbarVisible":t[11]||(t[11]=o=>v(p)?p.value=o:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):W("",!0),e(re,{isDialogVisible:l(B),"onUpdate:isDialogVisible":t[12]||(t[12]=o=>v(B)?B.value=o:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:te},null,8,["isDialogVisible"])])}}};export{ca as default};
