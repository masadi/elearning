import{_ as G}from"./ConfirmDialog-wbzNWM4u.js";import{_ as H}from"./ShowAlert-BoXenHw9.js";import{V as J,_ as K}from"./VDataTableServer-CeH5QRsf.js";import{_ as W}from"./AppTextField-9Im6vAUj.js";import{_ as X}from"./AppSelect-YuV_8EMl.js";import{u as Y}from"./useApi-DYa_119h.js";import{c as Z}from"./createUrl-C1GpFGni.js";import{$ as ee}from"./api-BsjSCUDA.js";import{V as te}from"./VCardText-Bh-kjKeB.js";import{V as ae}from"./VSpacer-5Wn2AFGU.js";import{V as le}from"./VDivider-CydB6EEn.js";import{r as i,p as se,q as V,h as ie,e as oe,o as P,c as ne,a as t,w as a,b as k,u as s,j as u,V as d,g as re,f as y,i as me,s as pe}from"./main-m9zeKCO-.js";import{V as ue}from"./VMenu-URrMkeGE.js";import{b as de,V as x,a as C}from"./VList-CrcxxScS.js";import{V as ce}from"./VCard-s146ezt9.js";const fe={class:"d-flex gap-2 align-center"},ve={class:"d-flex align-center flex-wrap gap-4"},Pe={__name:"UserList",emits:["statistik","aplikasi"],async setup(_e,{emit:T}){let f,w;const m=i({icon:null,title:null,text:null,color:null}),p=i(!1),v=i(""),q=i(),D=T,o=i(10),n=i(1),A=i("nama"),B=i("ASC"),E=r=>{var e,c;r.sortBy.length&&(A.value=(e=r.sortBy[0])==null?void 0:e.key,B.value=(c=r.sortBy[0])==null?void 0:c.order)},L=[{title:"nama",key:"nama",sortable:!1},{title:"npsn",key:"npsn",sortable:!1},{title:"email",key:"email",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],{data:_,execute:N}=([f,w]=se(()=>Y(Z("/table",{query:{data:"sekolah",q:v,role_id:q,itemsPerPage:o,page:n,sortBy:A,orderBy:B}}))),f=await f,w(),f),h=V(()=>_.value.lists.data),U=V(()=>_.value.lists.total),R=V(()=>_.value.statistik),z=V(()=>_.value.aplikasi);D("statistik",R.value),D("aplikasi",z.value);const g=i(),$=i(),S=async r=>{$.value=r,g.value=!0},F=async()=>{await ee(`/settings/destroy/user/${$.value}`,{method:"DELETE",onResponse({request:r,response:e,options:c}){let b=e._data;m.value=b,p.value=!0}})};return ie(p,()=>{p.value||N()}),(r,e)=>{const c=X,b=W,I=oe("IconBtn"),j=K,M=H,O=G;return P(),ne("section",null,[t(ce,null,{default:a(()=>[t(te,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[k("div",fe,[e[7]||(e[7]=k("p",{class:"text-body-1 mb-0"}," Show ",-1)),t(c,{"model-value":s(o),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=parseInt(l,10))},null,8,["model-value"])]),t(ae),k("div",ve,[t(b,{modelValue:s(v),"onUpdate:modelValue":e[1]||(e[1]=l=>u(v)?v.value=l:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])])]),_:1}),t(le),t(J,{"items-per-page":s(o),"onUpdate:itemsPerPage":e[3]||(e[3]=l=>u(o)?o.value=l:null),page:s(n),"onUpdate:page":e[4]||(e[4]=l=>u(n)?n.value=l:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:s(h),"items-length":s(U),headers:L,class:"text-no-wrap","onUpdate:options":E},{"item.actions":a(({item:l})=>[t(I,{onClick:Q=>S(l.id)},{default:a(()=>[t(d,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(I,null,{default:a(()=>[t(d,{icon:"tabler-eye"})]),_:1}),t(re,{icon:"",variant:"text",color:"medium-emphasis"},{default:a(()=>[t(d,{icon:"tabler-dots-vertical"}),t(ue,{activator:"parent"},{default:a(()=>[t(de,null,{default:a(()=>[t(x,{to:{name:"apps-user-view-id",params:{id:l.id}}},{prepend:a(()=>[t(d,{icon:"tabler-eye"})]),default:a(()=>[t(C,null,{default:a(()=>e[8]||(e[8]=[y("View")])),_:1})]),_:2},1032,["to"]),t(x,{link:""},{prepend:a(()=>[t(d,{icon:"tabler-pencil"})]),default:a(()=>[t(C,null,{default:a(()=>e[9]||(e[9]=[y("Edit")])),_:1})]),_:1}),t(x,{onClick:Q=>S(l.id)},{prepend:a(()=>[t(d,{icon:"tabler-trash"})]),default:a(()=>[t(C,null,{default:a(()=>e[10]||(e[10]=[y("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[t(j,{page:s(n),"onUpdate:page":e[2]||(e[2]=l=>u(n)?n.value=l:null),"items-per-page":s(o),"total-items":s(U)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),s(m).color?(P(),me(M,{key:0,color:s(m).color,icon:s(m).icon,title:s(m).title,text:s(m).text,"disable-time-out":!1,isSnackbarVisible:s(p),"onUpdate:isSnackbarVisible":e[5]||(e[5]=l=>u(p)?p.value=l:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):pe("",!0),t(O,{isDialogVisible:s(g),"onUpdate:isDialogVisible":e[6]||(e[6]=l=>u(g)?g.value=l:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:F},null,8,["isDialogVisible"])])}}};export{Pe as _};
