import{r as f}from"./validators-BHkKs9Dp.js";import{C as B,e as s,m as v,D as E,c as N,w as o,v as O,x as Q,o as z,a as r,u as a,h as R,g as I,E as k,z as J}from"./main-D6V9-Wi_.js";import{_ as G}from"./ShowAlert-B7RpzT0c.js";import{_ as H}from"./AppTextField-C48mpId9.js";import{Q as K}from"./vue-quill.snow-BhUFDlax.js";import{u as L}from"./useApi-B8QzzXB-.js";import{c as W}from"./createUrl-DvLxnyLV.js";import{$ as U}from"./api-D6MMaE0L.js";import{V as X}from"./VCard-BwAKU2iv.js";import{V as T}from"./VCardText-D512jnSI.js";import{V as A,a as m}from"./VRow-C2zdjLTM.js";import{V as g}from"./VAutocomplete-ClRTZb7q.js";import{V as Y}from"./VForm-kpCyBrGz.js";import"./VOverlay-1PAqhPpx.js";import"./forwardRefs-D9kYFWgq.js";import"./scopeId-oNmL-_Kz.js";import"./VImg-DmZr2APQ.js";import"./VTextField-Dge7TN77.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BxkgbwWS.js";import"./VAvatar-CJmQ4SlV.js";/* empty css              */import"./filter-D4hi7fPA.js";import"./VList-pYGa9MTE.js";import"./ssrBoot-iOf8pK3M.js";import"./VDivider-C_dB4EP1.js";import"./dialog-transition-6qvpJzQ6.js";import"./VMenu-BMNn6ygD.js";import"./VCheckboxBtn-_R2UhhcS.js";import"./VChip-B7MtB5ge.js";import"./VSlideGroup-CyDxqoM5.js";const Pa={__name:"[id]",async setup(Z){let V,q;const w=O(),F=Q(),{data:_,execute:aa}=([V,q]=B(()=>L(W("/referensi/show",{query:{data:"materi-ajar",id:w.params.id}}))),V=await V,q(),V),u=s({icon:null,title:null,text:null,color:null}),c=s(!1),d=s(!1),p=v(()=>_.value.materi),y=v(()=>_.value.rombel),S=v(()=>_.value.pembelajaran),i=s({tingkat:p.value.pembelajaran.rombongan_belajar.tingkat,rombongan_belajar_id:p.value.pembelajaran.rombongan_belajar_id,pembelajaran_id:p.value.pembelajaran_id,judul:p.value.judul,deskripsi:p.value.deskripsi}),P=[10,11,12,13],j=s(!1),D=s(),M=async()=>{var l;(l=D.value)==null||l.validate().then(async({valid:e})=>{if(e){const n=new FormData;n.append("data","update-materi-ajar"),n.append("materi_ajar_id",w.params.id);for(const[b,t]of Object.entries(i.value))n.append(b,t||"");await U("/referensi/store",{method:"POST",body:n,onResponse({request:b,response:t,options:ea}){let h=t._data;u.value=h,c.value=!0}})}})},x=async l=>{i.value.rombongan_belajar_id=null,C({data:"rombel",tingkat:l})},$=async l=>{i.value.pembelajaran_id=null,C({data:"pembelajaran",rombongan_belajar_id:l})},C=async l=>{await U("/referensi",{query:l,onResponse({request:e,response:n,options:b}){let t=n._data;l.data=="rombel"&&(y.value=t),l.data=="pembelajaran"&&(S.value=t)}})};return E(d,()=>{d.value&&F.push({name:"materi-ajar"})}),(l,e)=>{const n=H,b=G;return z(),N(X,{title:"Edit Data Materi Ajar"},{default:o(()=>[r(Y,{ref_key:"refForm",ref:D,modelValue:a(j),"onUpdate:modelValue":e[5]||(e[5]=t=>k(j)?j.value=t:null),onSubmit:J(M,["prevent"])},{default:o(()=>[r(T,null,{default:o(()=>[r(A,null,{default:o(()=>[r(m,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).tingkat,"onUpdate:modelValue":[e[0]||(e[0]=t=>a(i).tingkat=t),x],label:"Tingkat",variant:"outlined",items:P,placeholder:"== Pilih Tingkat ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","rules"])]),_:1}),r(m,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).rombongan_belajar_id,"onUpdate:modelValue":[e[1]||(e[1]=t=>a(i).rombongan_belajar_id=t),$],label:"Rombel",variant:"outlined",items:a(y),"item-title":"nama","item-value":"rombongan_belajar_id",placeholder:"== Pilih Rombel ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","items","rules"])]),_:1}),r(m,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).pembelajaran_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a(i).pembelajaran_id=t),label:"Mata Pelajaran",variant:"outlined",items:a(S),"item-title":"nama_mata_pelajaran","item-value":"pembelajaran_id",placeholder:"== Pilih Mata Pelajaran ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","items","rules"])]),_:1}),r(m,{cols:"12"},{default:o(()=>[r(n,{modelValue:a(i).judul,"onUpdate:modelValue":e[3]||(e[3]=t=>a(i).judul=t),rules:["requiredValidator"in l?l.requiredValidator:a(f)]},{label:o(()=>e[8]||(e[8]=[R("Judul Materi")])),_:1},8,["modelValue","rules"])]),_:1}),r(m,{cols:"12"},{default:o(()=>[r(a(K),{theme:"snow",toolbar:"full",content:a(i).deskripsi,"onUpdate:content":e[4]||(e[4]=t=>a(i).deskripsi=t),contentType:"html",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1}),r(T,{class:"mt-16"},{default:o(()=>[r(A,null,{default:o(()=>[r(m,{cols:"12",class:"text-right"},{default:o(()=>[r(I,{type:"submit"},{default:o(()=>e[9]||(e[9]=[R("Submit")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(b,{color:a(u).color,icon:a(u).icon,title:a(u).title,text:a(u).text,"disable-time-out":!1,isSnackbarVisible:a(c),"onUpdate:isSnackbarVisible":e[6]||(e[6]=t=>k(c)?c.value=t:null),isSnackbarClicked:a(d),"onUpdate:isSnackbarClicked":e[7]||(e[7]=t=>k(d)?d.value=t:null)},null,8,["color","icon","title","text","isSnackbarVisible","isSnackbarClicked"])]),_:1})}}};export{Pa as default};
