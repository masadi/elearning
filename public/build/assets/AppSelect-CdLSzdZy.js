import{b as Te,a as Ce}from"./VInput-CtIpCB6m.js";import{m as Ae,V as ce}from"./VTextField-B0kUhZOF.js";import{p as j,H as we,l as se,aL as Se,E as H,q as ue,a as d,F as K,v as M,aK as Re,al as F,aR as de,e as N,g as I,b2 as ke,aP as ne,b3 as _e,C as Pe,au as oe,K as De,aO as Be,W as Fe,a0 as Oe,b4 as Ee,am as Q,aq as Le,I as Me,k as He,a1 as qe,m as fe,ax as ze,V as me,av as $e,a3 as Ne,j as Ue,ay as ve,az as pe,b5 as he,b6 as Ke,o as ge,b as je,u as Z,c as We,D as Xe,b7 as Ye,r as Ge,w as Je,b8 as Qe,b9 as ye,ba as Ve,bb as Ze}from"./main-DRaMqd5g.js";import{f as et}from"./forwardRefs-D9kYFWgq.js";import{m as tt,c as lt,b as nt,V as be}from"./VList-2TYjN3IB.js";import{m as at}from"./VImg-CJno67hp.js";import{V as ot}from"./dialog-transition-DUV3Hxj9.js";import{V as st}from"./VMenu-_cb2J1MP.js";import{g as ut}from"./VOverlay-CjVlQ-fk.js";import{V as rt}from"./VCheckboxBtn-CYEldE_K.js";import{V as it}from"./VAvatar-DQ_bSRA7.js";import{a as ct}from"./VChip-DV4bKwyu.js";const dt=j({renderless:Boolean,...we()},"VVirtualScrollItem"),ft=se()({name:"VVirtualScrollItem",inheritAttrs:!1,props:dt(),emits:{"update:height":t=>!0},setup(t,c){let{attrs:l,emit:u,slots:o}=c;const{resizeRef:m,contentRect:v}=Se(void 0,"border");H(()=>{var s;return(s=v.value)==null?void 0:s.height},s=>{s!=null&&u("update:height",s)}),ue(()=>{var s,a;return t.renderless?d(K,null,[(s=o.default)==null?void 0:s.call(o,{itemRef:m})]):d("div",M({ref:m,class:["v-virtual-scroll__item",t.class],style:t.style},l),[(a=o.default)==null?void 0:a.call(o)])})}}),mt=-1,vt=1,ae=100,pt=j({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function ht(t,c){const l=Re(),u=F(0);de(()=>{u.value=parseFloat(t.itemHeight||0)});const o=F(0),m=F(Math.ceil((parseInt(t.height)||l.height.value)/(u.value||16))||1),v=F(0),s=F(0),a=N(),h=N();let R=0;const{resizeRef:D,contentRect:i}=Se();de(()=>{D.value=a.value});const V=I(()=>{var e;return a.value===document.documentElement?l.height.value:((e=i.value)==null?void 0:e.height)||parseInt(t.height)||0}),O=I(()=>!!(a.value&&h.value&&V.value&&u.value));let x=Array.from({length:c.value.length}),p=Array.from({length:c.value.length});const b=F(0);let S=-1;function E(e){return x[e]||u.value}const T=_e(()=>{const e=performance.now();p[0]=0;const n=c.value.length;for(let f=1;f<=n-1;f++)p[f]=(p[f-1]||0)+E(f-1);b.value=Math.max(b.value,performance.now()-e)},b),W=H(O,e=>{e&&(W(),R=h.value.offsetTop,T.immediate(),_(),~S&&Pe(()=>{oe&&window.requestAnimationFrame(()=>{J(S),S=-1})}))});ke(()=>{T.clear()});function ee(e,n){const f=x[e],g=u.value;u.value=g?Math.min(u.value,n):n,(f!==n||g!==u.value)&&(x[e]=n,T())}function k(e){return e=ne(e,0,c.value.length-1),p[e]||0}function X(e){return gt(p,e)}let q=0,L=0,U=0;H(V,(e,n)=>{n&&(_(),e<n&&requestAnimationFrame(()=>{L=0,_()}))});function Y(){if(!a.value||!h.value)return;const e=a.value.scrollTop,n=performance.now();n-U>500?(L=Math.sign(e-q),R=h.value.offsetTop):L=e-q,q=e,U=n,_()}function z(){!a.value||!h.value||(L=0,U=0,_())}let G=-1;function _(){cancelAnimationFrame(G),G=requestAnimationFrame(te)}function te(){if(!a.value||!V.value)return;const e=q-R,n=Math.sign(L),f=Math.max(0,e-ae),g=ne(X(f),0,c.value.length),C=e+V.value+ae,r=ne(X(C)+1,g+1,c.value.length);if((n!==mt||g<o.value)&&(n!==vt||r>m.value)){const y=k(o.value)-k(g),w=k(r)-k(m.value);Math.max(y,w)>ae?(o.value=g,m.value=r):(g<=0&&(o.value=g),r>=c.value.length&&(m.value=r))}v.value=k(o.value),s.value=k(c.value.length)-k(m.value)}function J(e){const n=k(e);!a.value||e&&!n?S=e:a.value.scrollTop=n}const le=I(()=>c.value.slice(o.value,m.value).map((e,n)=>({raw:e,index:n+o.value})));return H(c,()=>{x=Array.from({length:c.value.length}),p=Array.from({length:c.value.length}),T.immediate(),_()},{deep:!0}),{calculateVisibleItems:_,containerRef:a,markerRef:h,computedItems:le,paddingTop:v,paddingBottom:s,scrollToIndex:J,handleScroll:Y,handleScrollend:z,handleItemResize:ee}}function gt(t,c){let l=t.length-1,u=0,o=0,m=null,v=-1;if(t[l]<c)return l;for(;u<=l;)if(o=u+l>>1,m=t[o],m>c)l=o-1;else if(m<c)v=o,u=o+1;else return m===c?o:u;return v}const yt=j({items:{type:Array,default:()=>[]},renderless:Boolean,...pt(),...we(),...De()},"VVirtualScroll"),Vt=se()({name:"VVirtualScroll",props:yt(),setup(t,c){let{slots:l}=c;const u=Be("VVirtualScroll"),{dimensionStyles:o}=Fe(t),{calculateVisibleItems:m,containerRef:v,markerRef:s,handleScroll:a,handleScrollend:h,handleItemResize:R,scrollToIndex:D,paddingTop:i,paddingBottom:V,computedItems:O}=ht(t,Oe(t,"items"));return Ee(()=>t.renderless,()=>{function x(){var S,E;const b=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[b]("scroll",a,{passive:!0}),document[b]("scrollend",h)):((S=v.value)==null||S[b]("scroll",a,{passive:!0}),(E=v.value)==null||E[b]("scrollend",h))}Le(()=>{v.value=ut(u.vnode.el,!0),x(!0)}),ke(x)}),ue(()=>{const x=O.value.map(p=>d(ft,{key:p.index,renderless:t.renderless,"onUpdate:height":b=>R(p.index,b)},{default:b=>{var S;return(S=l.default)==null?void 0:S.call(l,{item:p.raw,index:p.index,...b})}}));return t.renderless?d(K,null,[d("div",{ref:s,class:"v-virtual-scroll__spacer",style:{paddingTop:Q(i.value)}},null),x,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Q(V.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",t.class],onScrollPassive:a,onScrollend:h,style:[o.value,t.style]},[d("div",{ref:s,class:"v-virtual-scroll__container",style:{paddingTop:Q(i.value),paddingBottom:Q(V.value)}},[x])])}),{calculateVisibleItems:m,scrollToIndex:D}}});function bt(t,c){const l=F(!1);let u;function o(s){cancelAnimationFrame(u),l.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{l.value=!1})})}async function m(){await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>{if(l.value){const a=H(l,()=>{a(),s()})}else s()})}async function v(s){var R,D;if(s.key==="Tab"&&((R=c.value)==null||R.focus()),!["PageDown","PageUp","Home","End"].includes(s.key))return;const a=(D=t.value)==null?void 0:D.$el;if(!a)return;(s.key==="Home"||s.key==="End")&&a.scrollTo({top:s.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await m();const h=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(s.key==="PageDown"||s.key==="Home"){const i=a.getBoundingClientRect().top;for(const V of h)if(V.getBoundingClientRect().top>=i){V.focus();break}}else{const i=a.getBoundingClientRect().bottom;for(const V of[...h].reverse())if(V.getBoundingClientRect().bottom<=i){V.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const wt=j({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Me,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...tt({itemChildren:!1})},"Select"),St=j({...wt(),...He(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...at({transition:{component:ot}})},"VSelect"),kt=se()({name:"VSelect",props:St(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,c){let{slots:l}=c;const{t:u}=qe(),o=N(),m=N(),v=N(),s=fe(t,"menu"),a=I({get:()=>s.value,set:e=>{var n;s.value&&!e&&((n=m.value)!=null&&n.Î¨openChildren.size)||(s.value=e)}}),{items:h,transformIn:R,transformOut:D}=lt(t),i=fe(t,"modelValue",[],e=>R(e===null?[null]:ze(e)),e=>{const n=D(e);return t.multiple?n:n[0]??null}),V=I(()=>typeof t.counterValue=="function"?t.counterValue(i.value):typeof t.counterValue=="number"?t.counterValue:i.value.length),O=Te(t),x=I(()=>i.value.map(e=>e.value)),p=F(!1),b=I(()=>a.value?t.closeText:t.openText);let S="",E;const T=I(()=>t.hideSelected?h.value.filter(e=>!i.value.some(n=>t.valueComparator(n,e))):h.value),W=I(()=>t.hideNoData&&!T.value.length||O.isReadonly.value||O.isDisabled.value),ee=I(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),k=N(),X=bt(k,o);function q(e){t.openOnClear&&(a.value=!0)}function L(){W.value||(a.value=!a.value)}function U(e){ve(e)&&Y(e)}function Y(e){var C,r;if(!e.key||O.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(a.value=!0),["Escape","Tab"].includes(e.key)&&(a.value=!1),e.key==="Home"?(C=k.value)==null||C.focus("first"):e.key==="End"&&((r=k.value)==null||r.focus("last"));const n=1e3;if(t.multiple||!ve(e))return;const f=performance.now();f-E>n&&(S=""),S+=e.key.toLowerCase(),E=f;const g=h.value.find(y=>y.title.toLowerCase().startsWith(S));if(g!==void 0){i.value=[g];const y=T.value.indexOf(g);oe&&window.requestAnimationFrame(()=>{var w;y>=0&&((w=v.value)==null||w.scrollToIndex(y))})}}function z(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const f=i.value.findIndex(C=>t.valueComparator(C.value,e.value)),g=n??!~f;if(~f){const C=g?[...i.value,e]:[...i.value];C.splice(f,1),i.value=C}else g&&(i.value=[...i.value,e])}else{const f=n!==!1;i.value=f?[e]:[],Pe(()=>{a.value=!1})}}function G(e){var n;(n=k.value)!=null&&n.$el.contains(e.relatedTarget)||(a.value=!1)}function _(){var e;t.eager&&((e=v.value)==null||e.calculateVisibleItems())}function te(){var e;p.value&&((e=o.value)==null||e.focus())}function J(e){p.value=!0}function le(e){if(e==null)i.value=[];else if(pe(o.value,":autofill")||pe(o.value,":-webkit-autofill")){const n=h.value.find(f=>f.title===e);n&&z(n)}else o.value&&(o.value.value="")}return H(a,()=>{if(!t.hideSelected&&a.value&&i.value.length){const e=T.value.findIndex(n=>i.value.some(f=>t.valueComparator(f.value,n.value)));oe&&window.requestAnimationFrame(()=>{var n;e>=0&&((n=v.value)==null||n.scrollToIndex(e))})}}),H(()=>t.items,(e,n)=>{a.value||p.value&&!n.length&&e.length&&(a.value=!0)}),ue(()=>{const e=!!(t.chips||l.chip),n=!!(!t.hideNoData||T.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),f=i.value.length>0,g=ce.filterProps(t),C=f||!p.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return d(ce,M({ref:o},g,{modelValue:i.value.map(r=>r.props.value).join(", "),"onUpdate:modelValue":le,focused:p.value,"onUpdate:focused":r=>p.value=r,validationValue:i.externalValue,counterValue:V.value,dirty:f,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},t.class],style:t.style,inputmode:"none",placeholder:C,"onClick:clear":q,"onMousedown:control":L,onBlur:G,onKeydown:Y,"aria-label":u(b.value),title:u(b.value)}),{...l,default:()=>d(K,null,[d(st,M({ref:m,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,activator:"parent",contentClass:"v-select__content",disabled:W.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:_,onAfterLeave:te},ee.value),{default:()=>[n&&d(nt,M({ref:k,selected:x.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:U,onFocusin:J,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},X,t.listProps),{default:()=>{var r,y,w;return[(r=l["prepend-item"])==null?void 0:r.call(l),!T.value.length&&!t.hideNoData&&(((y=l["no-data"])==null?void 0:y.call(l))??d(be,{title:u(t.noDataText)},null)),d(Vt,{ref:v,renderless:!0,items:T.value},{default:B=>{var ie;let{item:A,index:$,itemRef:P}=B;const re=M(A.props,{ref:P,key:$,onClick:()=>z(A,null)});return((ie=l.item)==null?void 0:ie.call(l,{item:A,index:$,props:re}))??d(be,M(re,{role:"option"}),{prepend:xe=>{let{isSelected:Ie}=xe;return d(K,null,[t.multiple&&!t.hideSelected?d(rt,{key:A.value,modelValue:Ie,ripple:!1,tabindex:"-1"},null):void 0,A.props.prependAvatar&&d(it,{image:A.props.prependAvatar},null),A.props.prependIcon&&d(me,{icon:A.props.prependIcon},null)])}})}}),(w=l["append-item"])==null?void 0:w.call(l)]}})]}),i.value.map((r,y)=>{function w(P){P.stopPropagation(),P.preventDefault(),z(r,!1)}const B={"onClick:close":w,onKeydown(P){P.key!=="Enter"&&P.key!==" "||(P.preventDefault(),P.stopPropagation(),w(P))},onMousedown(P){P.preventDefault(),P.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},A=e?!!l.chip:!!l.selection,$=A?$e(e?l.chip({item:r,index:y,props:B}):l.selection({item:r,index:y})):void 0;if(!(A&&!$))return d("div",{key:r.value,class:"v-select__selection"},[e?l.chip?d(Ne,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:r.title}}},{default:()=>[$]}):d(ct,M({key:"chip",closable:t.closableChips,size:"small",text:r.title,disabled:r.props.disabled},B),null):$??d("span",{class:"v-select__selection-text"},[r.title,t.multiple&&y<i.value.length-1&&d("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var B;for(var r=arguments.length,y=new Array(r),w=0;w<r;w++)y[w]=arguments[w];return d(K,null,[(B=l["append-inner"])==null?void 0:B.call(l,...y),t.menuIcon?d(me,{class:"v-select__menu-icon",icon:t.menuIcon},null):void 0])}})}),et({isFocused:p,menu:a,select:z},o)}}),Et=Object.assign({name:"AppSelect",inheritAttrs:!1},{__name:"AppSelect",setup(t){const c=I(()=>{const o=he().id,m=Ke();return o?`app-select-${o}`:m}),l=I(()=>he().label);return(u,o)=>(ge(),je("div",{class:Ze(["app-select flex-grow-1",u.$attrs.class])},[Z(l)?(ge(),We(Ce,{key:0,for:Z(c),class:"mb-1 text-body-2",style:{"line-height":"15px"},text:Z(l)},null,8,["for","text"])):Xe("",!0),d(kt,ye(Ve({...u.$attrs,class:null,label:void 0,variant:"outlined",id:Z(c),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",u.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),Ye({_:2},[Ge(u.$slots,(m,v)=>({name:v,fn:Je(s=>[Qe(u.$slots,v,ye(Ve(s||{})))])}))]),1040)],2))}});export{Vt as V,Et as _,kt as a,wt as m,bt as u};
