import{a as ee}from"./formatters-DULOiX1-.js";import{_ as te}from"./ConfirmDialog-KFh07bUc.js";import{_ as ae}from"./ShowAlert-BWNk8-G8.js";import{V as se,_ as le,a as oe}from"./VDataTableServer-DqDOuz1B.js";import{_ as ie}from"./AppTextField-Bbl0u6XW.js";import{u as ne}from"./useApi-BCBv6SNg.js";import{c as re}from"./createUrl-C0XuWudL.js";import{$ as R}from"./api-CAs-YIJp.js";import{e as i,f as ue,g as x,E as ce,G as de,o as f,b as C,a as t,w as s,d as n,u as l,i as v,h as q,j as w,c as z,t as U,F,r as pe,V as p,D as me}from"./main-PnlJ3i_c.js";import{V as fe}from"./VCardText-Bku8my6N.js";import{V as ve}from"./VSpacer-D3ETsCW-.js";import{V as _e}from"./VDivider-WvCqb411.js";import{V as ge}from"./VAvatar-dsj7vxWP.js";import{V as be}from"./VImg-5eR7uzfk.js";import{V as Ve}from"./VMenu-hSFDHyAD.js";import{b as ye,V as D,a as B}from"./VList-Co2hBAoi.js";import{V as ke}from"./VCard-DqYPEyMr.js";const xe={class:"d-flex gap-2 align-center"},Ce={class:"d-flex align-center flex-wrap gap-4"},we={class:"d-flex align-center gap-x-4"},Ue={key:1},De={class:"d-flex flex-column"},Be={class:"text-base"},Ae={class:"text-sm"},he={class:"d-flex align-center gap-x-2"},$e={class:"text-capitalize text-high-emphasis text-body-1"},Ke={__name:"UserList",emits:["statistik","aplikasi"],async setup(Se,{emit:N}){let b,A;const r=i({icon:null,title:null,text:null,color:null}),u=i(!1),V=i(""),G=i(),h=N,c=i(10),d=i(1),$=i("id"),S=i("ASC"),j=o=>{var e,m;o.sortBy.length&&($.value=(e=o.sortBy[0])==null?void 0:e.key,S.value=(m=o.sortBy[0])==null?void 0:m.order)},M=[{title:"User",key:"user",sortable:!1},{title:"Role",key:"roles",sortable:!1},{title:"Created By",key:"created_by",sortable:!1},{title:"Updated By",key:"updated_by",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],{data:y,execute:O}=([b,A]=ue(()=>ne(re("/settings/users-roles",{query:{q:V,role_id:G,itemsPerPage:c,page:d,sortBy:$,orderBy:S}}))),b=await b,A(),b),Q=x(()=>y.value.users.data),T=x(()=>y.value.users.total),H=x(()=>y.value.statistik),J=x(()=>y.value.aplikasi);h("statistik",H.value),h("aplikasi",J.value);const I=o=>{if(!o)return{color:"primary",icon:"tabler-user"};const e=o.toLowerCase();return e==="administrator"?{color:"primary",icon:"tabler-user"}:e==="operator"?{color:"warning",icon:"tabler-settings"}:e==="koperasi"?{color:"success",icon:"tabler-chart-donut"}:e==="editor"?{color:"info",icon:"tabler-pencil"}:e==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},k=i(),L=i(),P=async o=>{L.value=o,k.value=!0},K=async()=>{await R(`/settings/destroy/user/${L.value}`,{method:"DELETE",onResponse({request:o,response:e,options:m}){let _=e._data;r.value=_,u.value=!0}})},W=async()=>{await R("/settings/generate-user",{onResponse({request:o,response:e,options:m}){let _=e._data;r.value=_,u.value=!0}})};return ce(u,()=>{u.value||O()}),(o,e)=>{const m=le,_=ie,E=de("IconBtn"),X=oe,Y=ae,Z=te;return f(),C("section",null,[t(ke,null,{default:s(()=>[t(fe,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[n("div",xe,[e[7]||(e[7]=n("p",{class:"text-body-1 mb-0"}," Show ",-1)),t(m,{"model-value":l(c),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=parseInt(a,10))},null,8,["model-value"])]),t(ve),n("div",Ce,[t(_,{modelValue:l(V),"onUpdate:modelValue":e[1]||(e[1]=a=>v(V)?V.value=a:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),t(q,{onClick:W},{default:s(()=>e[8]||(e[8]=[w("Generate User")])),_:1})])]),_:1}),t(_e),t(se,{"items-per-page":l(c),"onUpdate:itemsPerPage":e[3]||(e[3]=a=>v(c)?c.value=a:null),page:l(d),"onUpdate:page":e[4]||(e[4]=a=>v(d)?d.value=a:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(Q),"items-length":l(T),headers:M,class:"text-no-wrap","onUpdate:options":j},{"item.user":s(({item:a})=>[n("div",we,[t(ge,{size:"34",variant:a.avatar?void 0:"tonal",color:a.avatar?void 0:"success"},{default:s(()=>[a.avatar?(f(),z(be,{key:0,src:a.avatar},null,8,["src"])):(f(),C("span",Ue,U(("avatarText"in o?o.avatarText:l(ee))(a.name)),1))]),_:2},1032,["variant","color"]),n("div",De,[n("h6",Be,U(a.name),1),n("div",Ae,U(a.email),1)])])]),"item.roles":s(({item:a})=>[n("div",he,[(f(!0),C(F,null,pe(a.roles,g=>(f(),C(F,null,[t(p,{size:22,icon:I(g.name).icon,color:I(g.name).color},null,8,["icon","color"]),n("div",$e,U(g.display_name),1)],64))),256))])]),"item.actions":s(({item:a})=>[t(E,{onClick:g=>P(a.id)},{default:s(()=>[t(p,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(E,null,{default:s(()=>[t(p,{icon:"tabler-eye"})]),_:1}),t(q,{icon:"",variant:"text",color:"medium-emphasis"},{default:s(()=>[t(p,{icon:"tabler-dots-vertical"}),t(Ve,{activator:"parent"},{default:s(()=>[t(ye,null,{default:s(()=>[t(D,{to:{name:"apps-user-view-id",params:{id:a.id}}},{prepend:s(()=>[t(p,{icon:"tabler-eye"})]),default:s(()=>[t(B,null,{default:s(()=>e[9]||(e[9]=[w("View")])),_:1})]),_:2},1032,["to"]),t(D,{link:""},{prepend:s(()=>[t(p,{icon:"tabler-pencil"})]),default:s(()=>[t(B,null,{default:s(()=>e[10]||(e[10]=[w("Edit")])),_:1})]),_:1}),t(D,{onClick:g=>P(a.id)},{prepend:s(()=>[t(p,{icon:"tabler-trash"})]),default:s(()=>[t(B,null,{default:s(()=>e[11]||(e[11]=[w("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[t(X,{page:l(d),"onUpdate:page":e[2]||(e[2]=a=>v(d)?d.value=a:null),"items-per-page":l(c),"total-items":l(T)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),l(r).color?(f(),z(Y,{key:0,color:l(r).color,icon:l(r).icon,title:l(r).title,text:l(r).text,"disable-time-out":!1,isSnackbarVisible:l(u),"onUpdate:isSnackbarVisible":e[5]||(e[5]=a=>v(u)?u.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):me("",!0),t(Z,{isDialogVisible:l(k),"onUpdate:isDialogVisible":e[6]||(e[6]=a=>v(k)?k.value=a:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:K},null,8,["isDialogVisible"])])}}};export{Ke as _};
