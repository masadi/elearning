import{a as Y}from"./formatters-DULOiX1-.js";import{_ as ge}from"./ConfirmDialog-Tn3I-RV8.js";import{_ as ke}from"./ShowAlert-Crhw45kN.js";import{r as x,e as be}from"./validators-BHkKs9Dp.js";import{r as p,h as W,j as Z,o as P,f as q,w as o,a as l,u as e,i as k,k as ye,e as D,g as h,b as r,c as R,t as g,p as z,m as De,n as O,q as Pe,l as E}from"./main-BOi3BIW1.js";import{_ as ee}from"./AppTextField-CkipoKMD.js";import{_ as le}from"./DialogCloseBtn-CWbnsSPr.js";import{V as M}from"./VCard-BsxPU2or.js";import{V as J}from"./VCardText-BtPwo1mS.js";import{V as ce}from"./VForm-BPF3XLYv.js";import{V as Ue,a as _}from"./VRow-DExjJUWN.js";import{V as _e}from"./VFileInput-Lz0ZgLya.js";import{V as te}from"./VDialog-BJYfLZfz.js";import{V as ae}from"./VAvatar-DBL2rIYL.js";import{V as ie}from"./VImg-B2SqCbwD.js";import{a as we,V as Ce,_ as $e}from"./VDataTableServer-J8lwASIv.js";import{_ as qe}from"./AddPtkDialog-D93P1_jR.js";import{_ as Te}from"./AppSelect-BvjMTD9Y.js";import{u as xe}from"./useApi-CHXvmuUd.js";import{c as Ae}from"./createUrl-Cm60FE_Q.js";import{$ as X}from"./api-D8raZm_J.js";import{V as Be}from"./VSpacer-DBiLwPOJ.js";import{V as Se}from"./VDivider-B06OBMyi.js";import"./VOverlay-bOV7N2Sq.js";import"./forwardRefs-D3j0TLhE.js";import"./VInput-u888SdWy.js";import"./VTextField-CnSWxS1r.js";/* empty css              */import"./VChip-OBybeT-t.js";import"./dialog-transition-18JHODqx.js";import"./VCheckboxBtn-CwSHgSnK.js";import"./VSelectionControl-DLPwGM7h.js";import"./VAutocomplete-DWeB6WZM.js";import"./VList-yTRHr5Kb.js";import"./ssrBoot-B1UlT3gE.js";import"./VMenu-DNeMfofa.js";import"./index-BxkgbwWS.js";const Ne={__name:"PtkEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilPtk:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(b,{emit:w}){const f=b,V=w,v=d=>{V("update:isDialogVisible",d)},n=p(structuredClone(W(f.detilPtk)));Z(f,()=>{n.value=structuredClone(W(f.detilPtk)),n.value.avatar=null});const s=p(!1),y=p(),A=()=>{var d;(d=y.value)==null||d.validate().then(async({valid:a})=>{a&&V("submit",n.value)})};return(d,a)=>{const F=le,c=ee;return P(),q(te,{width:d.$vuetify.display.smAndDown?"auto":500,"model-value":f.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":v},{default:o(()=>[l(F,{onClick:a[0]||(a[0]=u=>v(!1))}),l(M,{title:`Edit Data ${e(n).nama}`},{default:o(()=>[l(J,null,{default:o(()=>[l(ce,{ref_key:"refForm",ref:y,modelValue:e(s),"onUpdate:modelValue":a[9]||(a[9]=u=>k(s)?s.value=u:null),onSubmit:ye(A,["prevent"])},{default:o(()=>[l(Ue,null,{default:o(()=>[l(_,{cols:"12"},{default:o(()=>[l(c,{id:"nama",modelValue:e(n).nama,"onUpdate:modelValue":a[1]||(a[1]=u=>e(n).nama=u),rules:["requiredValidator"in d?d.requiredValidator:e(x)]},{label:o(()=>a[10]||(a[10]=[D("Nama Lengkap")])),_:1},8,["modelValue","rules"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(c,{id:"nik",modelValue:e(n).nik,"onUpdate:modelValue":a[2]||(a[2]=u=>e(n).nik=u),rules:["requiredValidator"in d?d.requiredValidator:e(x)]},{label:o(()=>a[11]||(a[11]=[D("NIK")])),_:1},8,["modelValue","rules"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(c,{id:"email",modelValue:e(n).email,"onUpdate:modelValue":a[3]||(a[3]=u=>e(n).email=u),rules:["requiredValidator"in d?d.requiredValidator:e(x),"emailValidator"in d?d.emailValidator:e(be)]},{label:o(()=>a[12]||(a[12]=[D("Email")])),_:1},8,["modelValue","rules"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(c,{id:"jenis_kelamin",modelValue:e(n).jenis_kelamin,"onUpdate:modelValue":a[4]||(a[4]=u=>e(n).jenis_kelamin=u),rules:["requiredValidator"in d?d.requiredValidator:e(x)]},{label:o(()=>a[13]||(a[13]=[D("Jenis Kelamin")])),_:1},8,["modelValue","rules"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(c,{id:"tempat_lahir",modelValue:e(n).tempat_lahir,"onUpdate:modelValue":a[5]||(a[5]=u=>e(n).tempat_lahir=u),rules:["requiredValidator"in d?d.requiredValidator:e(x)]},{label:o(()=>a[14]||(a[14]=[D("Tempat Lahir")])),_:1},8,["modelValue","rules"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(c,{id:"tanggal_lahir",modelValue:e(n).tanggal_lahir,"onUpdate:modelValue":a[6]||(a[6]=u=>e(n).tanggal_lahir=u),rules:["requiredValidator"in d?d.requiredValidator:e(x),d.dateValidator]},{label:o(()=>a[15]||(a[15]=[D("Tanggal Lahir")])),_:1},8,["modelValue","rules"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(c,{id:"nuptk",modelValue:e(n).nuptk,"onUpdate:modelValue":a[7]||(a[7]=u=>e(n).nuptk=u)},{label:o(()=>a[16]||(a[16]=[D("NUPTK")])),_:1},8,["modelValue"])]),_:1}),l(_,{cols:"12"},{default:o(()=>[l(_e,{accept:"image/*",modelValue:e(n).avatar,"onUpdate:modelValue":a[8]||(a[8]=u=>e(n).avatar=u),id:"avatar",label:"Foto Profil"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(h,{type:"submit"},{default:o(()=>a[17]||(a[17]=[D("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title"])]),_:1},8,["width","model-value"])}}},Ie={class:"text-center"},je={key:1,class:"text-5xl font-weight-medium"},Ee={class:"text-h4 text-center mb-2"},Fe={__name:"PtkDetilDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilPtk:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(b,{emit:w}){const f=b,V=w,v=n=>{V("update:isDialogVisible",n)};return(n,s)=>{const y=le;return P(),q(te,{width:n.$vuetify.display.smAndDown?"auto":800,"model-value":f.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":v},{default:o(()=>[l(y,{onClick:s[0]||(s[0]=A=>v(!1))}),f.detilPtk?(P(),q(M,{key:0,class:"pa-2 pa-sm-10"},{default:o(()=>[l(J,null,{default:o(()=>[r("div",Ie,[l(ae,{rounded:"",size:100,color:f.detilPtk.avatar?void 0:"primary",variant:f.detilPtk.avatar?void 0:"tonal"},{default:o(()=>[f.detilPtk.avatar?(P(),q(ie,{key:0,src:f.detilPtk.avatar},null,8,["src"])):(P(),R("span",je,g(("avatarText"in n?n.avatarText:e(Y))(f.detilPtk.nama)),1))]),_:1},8,["color","variant"])]),r("h4",Ee,g(b.detilPtk.nama),1),l(we,{class:"permission-table text-no-wrap mb-6 mt-4"},{default:o(()=>[r("tr",null,[s[1]||(s[1]=r("td",null,"Nama",-1)),r("td",null,": "+g(b.detilPtk.nama),1)]),r("tr",null,[s[2]||(s[2]=r("td",null,"NIK",-1)),r("td",null,": "+g(b.detilPtk.nik),1)]),r("tr",null,[s[3]||(s[3]=r("td",null,"NUPTK",-1)),r("td",null,": "+g(b.detilPtk.nuptk),1)]),r("tr",null,[s[4]||(s[4]=r("td",null,"Email",-1)),r("td",null,": "+g(b.detilPtk.email),1)]),r("tr",null,[s[5]||(s[5]=r("td",null,"Jenis Kelamin",-1)),r("td",null,": "+g(b.detilPtk.jenis_kelamin),1)]),r("tr",null,[s[6]||(s[6]=r("td",null,"Tempat, Tanggal Lahir",-1)),r("td",null,": "+g(b.detilPtk.tempat_lahir)+", "+g(new Date(b.detilPtk.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)])]),_:1})]),_:1})]),_:1})):z("",!0)]),_:1},8,["width","model-value"])}}},Le={class:"d-flex gap-2 align-center"},Ke={class:"d-flex align-center flex-wrap gap-4"},Oe={class:"d-flex align-center gap-x-4"},Re={key:1},ze={class:"d-flex flex-column"},Me={class:"text-base"},Je={class:"text-sm"},Tl={__name:"pembelajaran",async setup(b){let w,f;const V=p({icon:null,title:null,text:null,color:null}),v=p(!1),n=p(""),s=p(10),y=p(1),A=p("nama"),d=p("ASC"),a=m=>{var i,U;m.sortBy.length&&(A.value=(i=m.sortBy[0])==null?void 0:i.key,d.value=(U=m.sortBy[0])==null?void 0:U.order)},F=[{title:"Ptk",key:"user",sortable:!1},{title:"nik",key:"nik",sortable:!1},{title:"tempat, tanggal lahir",key:"ttl",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],c=m=>{V.value=m,v.value=!0},{data:u,execute:Q}=([w,f]=De(()=>xe(Ae("/table",{query:{data:"ptk",q:n,itemsPerPage:s,page:y,sortBy:A,orderBy:d}}))),w=await w,f(),w);u.value.color&&(V.value=u.value,v.value=!0);const oe=O(()=>u.value.lists.data),G=O(()=>u.value.lists.total),S=O(()=>u.value.sekolah),N=p(!1),L=p(),I=p(),ne=async m=>{L.value=m,I.value=!0},se=async m=>{m&&await X(`/referensi/destroy/ptk/${L.value}`,{method:"DELETE",onResponse({request:i,response:U,options:$}){let T=U._data;V.value=T,v.value=!0,L.value=null,Q()}})},j=p(!1),B=p(!1),C=p(),re=async m=>{j.value=!0,C.value=m},de=async m=>{B.value=!0,C.value=m};Z(v,()=>{v.value||Q()});const ue=async m=>{console.log(m);const i=new FormData;i.append("data","update-ptk");for(const[U,$]of Object.entries(m))i.append(U,$||"");await X("/referensi/store",{method:"POST",body:i,onResponse({request:U,response:$,options:T}){let K=$._data;V.value=K,v.value=!0,B.value=!1}})};return(m,i)=>{const U=Te,$=ee,T=Pe("IconBtn"),K=$e,me=qe,pe=Fe,fe=Ne,ve=ke,Ve=ge;return P(),R("section",null,[l(M,null,{default:o(()=>[l(J,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[r("div",Le,[l(U,{"model-value":e(s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":i[0]||(i[0]=t=>s.value=parseInt(t,10))},null,8,["model-value"])]),l(Be),r("div",Ke,[l($,{modelValue:e(n),"onUpdate:modelValue":i[1]||(i[1]=t=>k(n)?n.value=t:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(S)?(P(),q(h,{key:0,onClick:i[2]||(i[2]=t=>N.value=!0)},{default:o(()=>[i[14]||(i[14]=D("Tambah ")),l(E,{end:"",icon:"tabler-cloud-upload"})]),_:1})):z("",!0)])]),_:1}),l(Se),l(Ce,{"items-per-page":e(s),"onUpdate:itemsPerPage":i[4]||(i[4]=t=>k(s)?s.value=t:null),page:e(y),"onUpdate:page":i[5]||(i[5]=t=>k(y)?y.value=t:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:e(oe),"items-length":e(G),headers:F,class:"text-no-wrap","onUpdate:options":a},{"item.user":o(({item:t})=>[r("div",Oe,[l(ae,{size:"34",variant:t.avatar?void 0:"tonal",color:t.avatar?void 0:"success"},{default:o(()=>[t.avatar?(P(),q(ie,{key:0,src:t.avatar},null,8,["src"])):(P(),R("span",Re,g(("avatarText"in m?m.avatarText:e(Y))(t.name)),1))]),_:2},1032,["variant","color"]),r("div",ze,[r("h6",Me,g(t.nama),1),r("div",Je,g(t.email),1)])])]),"item.ttl":o(({item:t})=>[D(g(t.tempat_lahir)+", "+g(new Date(t.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)]),"item.actions":o(({item:t})=>[l(T,{onClick:H=>ne(t.ptk_id)},{default:o(()=>[l(E,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(T,{onClick:H=>re(t)},{default:o(()=>[l(E,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),l(T,{onClick:H=>de(t)},{default:o(()=>[l(E,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:o(()=>[l(K,{page:e(y),"onUpdate:page":i[3]||(i[3]=t=>k(y)?y.value=t:null),"items-per-page":e(s),"total-items":e(G)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),l(me,{"is-dialog-visible":e(N),"onUpdate:isDialogVisible":i[6]||(i[6]=t=>k(N)?N.value=t:null),onNotif:c,sekolah:e(S),"onUpdate:sekolah":i[7]||(i[7]=t=>k(S)?S.value=t:null)},null,8,["is-dialog-visible","sekolah"]),l(pe,{"is-dialog-visible":e(j),"onUpdate:isDialogVisible":i[8]||(i[8]=t=>k(j)?j.value=t:null),detilPtk:e(C),"onUpdate:detilPtk":i[9]||(i[9]=t=>k(C)?C.value=t:null)},null,8,["is-dialog-visible","detilPtk"]),l(fe,{"is-dialog-visible":e(B),"onUpdate:isDialogVisible":i[10]||(i[10]=t=>k(B)?B.value=t:null),"detil-ptk":e(C),"onUpdate:detilPtk":i[11]||(i[11]=t=>k(C)?C.value=t:null),onSubmit:ue},null,8,["is-dialog-visible","detil-ptk"]),e(V).color?(P(),q(ve,{key:0,color:e(V).color,icon:e(V).icon,title:e(V).title,text:e(V).text,"disable-time-out":!1,isSnackbarVisible:e(v),"onUpdate:isSnackbarVisible":i[12]||(i[12]=t=>k(v)?v.value=t:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):z("",!0),l(Ve,{isDialogVisible:e(I),"onUpdate:isDialogVisible":i[13]||(i[13]=t=>k(I)?I.value=t:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:se},null,8,["isDialogVisible"])])}}};export{Tl as default};
