import{r as f}from"./validators-BHkKs9Dp.js";import{j as B,r as s,k,l as E,m as N,w as o,e as O,f as Q,o as I,b as r,u as a,d as R,V as J,p as v,h as z}from"./main-CYxTZlyw.js";import{_ as G}from"./ShowAlert-BTpZYmE8.js";import{_ as H}from"./AppTextField-DKZlewG5.js";import{Q as K}from"./vue-quill.snow-LNtSYzRy.js";import{u as L}from"./useApi-Ca_lbDiB.js";import{c as W}from"./createUrl-DQIYjNEu.js";import{$ as U}from"./api-DWqnSn3D.js";import{V as X}from"./VCard-xDsKjJ0U.js";import{V as T}from"./VCardText-B5x-o-AV.js";import{V as A,a as u}from"./VRow-CQ4WmNj4.js";import{V as g}from"./VAutocomplete-CXn2jb0B.js";import{V as Y}from"./VForm-BBIESTvO.js";import"./VOverlay-CFbD10z1.js";import"./forwardRefs-D9kYFWgq.js";import"./VImg-CnvubTND.js";import"./VTextField-DSt59Qrh.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-9rIf2CJL.js";import"./VAvatar-BlzW32JT.js";/* empty css              */import"./filter-fmXm50ml.js";import"./VList-B6Mtil5t.js";import"./VDivider-BzZ6p2_h.js";import"./dialog-transition-DkN_uU7p.js";import"./VMenu-0ypxLvod.js";import"./VCheckboxBtn--hdWtLbD.js";import"./VChip-DQ_jAv1j.js";const Ta={__name:"[id]",async setup(Z){let V,q;const w=O(),F=Q(),{data:_,execute:aa}=([V,q]=B(()=>L(W("/referensi/show",{query:{data:"materi-ajar",id:w.params.id}}))),V=await V,q(),V),m=s({icon:null,title:null,text:null,color:null}),j=s(!1),d=s(!1),p=k(()=>_.value.materi),y=k(()=>_.value.rombel),S=k(()=>_.value.pembelajaran),i=s({tingkat:p.value.pembelajaran.rombongan_belajar.tingkat,rombongan_belajar_id:p.value.pembelajaran.rombongan_belajar_id,pembelajaran_id:p.value.pembelajaran_id,judul:p.value.judul,deskripsi:p.value.deskripsi}),P=[10,11,12,13],c=s(!1),D=s(),M=async()=>{var l;(l=D.value)==null||l.validate().then(async({valid:e})=>{if(e){const n=new FormData;n.append("data","update-materi-ajar"),n.append("materi_ajar_id",w.params.id);for(const[b,t]of Object.entries(i.value))n.append(b,t||"");await U("/referensi/store",{method:"POST",body:n,onResponse({request:b,response:t,options:ea}){let x=t._data;m.value=x,j.value=!0}})}})},$=async l=>{i.value.rombongan_belajar_id=null,C({data:"rombel",tingkat:l})},h=async l=>{i.value.pembelajaran_id=null,C({data:"pembelajaran",rombongan_belajar_id:l})},C=async l=>{await U("/referensi",{query:l,onResponse({request:e,response:n,options:b}){let t=n._data;l.data=="rombel"&&(y.value=t),l.data=="pembelajaran"&&(S.value=t)}})};return E(d,()=>{d.value&&F.push({name:"materi-ajar"})}),(l,e)=>{const n=H,b=G;return I(),N(X,{title:"Edit Data Materi Ajar"},{default:o(()=>[r(Y,{ref_key:"refForm",ref:D,modelValue:a(c),"onUpdate:modelValue":e[5]||(e[5]=t=>v(c)?c.value=t:null),onSubmit:z(M,["prevent"])},{default:o(()=>[r(T,null,{default:o(()=>[r(A,null,{default:o(()=>[r(u,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).tingkat,"onUpdate:modelValue":[e[0]||(e[0]=t=>a(i).tingkat=t),$],label:"Tingkat",variant:"outlined",items:P,placeholder:"== Pilih Tingkat ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","rules"])]),_:1}),r(u,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).rombongan_belajar_id,"onUpdate:modelValue":[e[1]||(e[1]=t=>a(i).rombongan_belajar_id=t),h],label:"Rombel",variant:"outlined",items:a(y),"item-title":"nama","item-value":"rombongan_belajar_id",placeholder:"== Pilih Rombel ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","items","rules"])]),_:1}),r(u,{md:"4"},{default:o(()=>[r(g,{modelValue:a(i).pembelajaran_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a(i).pembelajaran_id=t),label:"Mata Pelajaran",variant:"outlined",items:a(S),"item-title":"nama_mata_pelajaran","item-value":"pembelajaran_id",placeholder:"== Pilih Mata Pelajaran ==",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["modelValue","items","rules"])]),_:1}),r(u,{cols:"12"},{default:o(()=>[r(n,{modelValue:a(i).judul,"onUpdate:modelValue":e[3]||(e[3]=t=>a(i).judul=t),rules:["requiredValidator"in l?l.requiredValidator:a(f)]},{label:o(()=>e[8]||(e[8]=[R("Judul Materi")])),_:1},8,["modelValue","rules"])]),_:1}),r(u,{cols:"12"},{default:o(()=>[r(a(K),{theme:"snow",toolbar:"full",content:a(i).deskripsi,"onUpdate:content":e[4]||(e[4]=t=>a(i).deskripsi=t),contentType:"html",rules:["requiredValidator"in l?l.requiredValidator:a(f)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1}),r(T,{class:"mt-16"},{default:o(()=>[r(A,null,{default:o(()=>[r(u,{cols:"12",class:"text-right"},{default:o(()=>[r(J,{type:"submit"},{default:o(()=>e[9]||(e[9]=[R("Submit")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(b,{color:a(m).color,icon:a(m).icon,title:a(m).title,text:a(m).text,"disable-time-out":!1,isSnackbarVisible:a(j),"onUpdate:isSnackbarVisible":e[6]||(e[6]=t=>v(j)?j.value=t:null),isSnackbarClicked:a(d),"onUpdate:isSnackbarClicked":e[7]||(e[7]=t=>v(d)?d.value=t:null)},null,8,["color","icon","title","text","isSnackbarVisible","isSnackbarClicked"])]),_:1})}}};export{Ta as default};
