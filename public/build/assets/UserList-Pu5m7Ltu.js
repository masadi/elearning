import{_ as X}from"./ShowAlert-CBT71RUL.js";import{_ as Y}from"./DialogCloseBtn-DbJlccTV.js";import{V as Z,_ as h}from"./VDataTableServer-BvKheiTX.js";import{_ as ee}from"./AppTextField-rwX737VE.js";import{_ as ae}from"./AppSelect-BLxacONs.js";import{u as le}from"./useApi-CQ6jqdt2.js";import{c as te}from"./createUrl-DO0f09L1.js";import{$ as se}from"./api-FASrfGO6.js";import{V as C}from"./VCardText-BciOCxBm.js";import{V as oe}from"./VSpacer-EOg4fDnQ.js";import{V as S}from"./VDivider-Cq58MeKk.js";import{r as o,m as ie,n as v,j as ne,o as _,c as w,a as t,w as s,b as U,u as l,i as p,g as B,e as b,t as re,F as ue,d as me,f as pe,p as de}from"./main-l72kcUCS.js";import{V as F,a as ce,b as fe}from"./VCard-CDX6cw9D.js";import{V as ve}from"./VCheckbox-Cud12TfK.js";import{V as ke}from"./VDialog-DtucKjmx.js";const ge={class:"d-flex gap-2 align-center"},Ve={class:"d-flex align-center flex-wrap gap-4"},Fe={__name:"UserList",emits:["statistik","aplikasi"],async setup(_e,{emit:N}){let k,A;const g=o(!1),y=o(!1),d=o({icon:null,title:null,text:null,color:null}),V=o(""),q=o(),$=N,r=o(10),u=o(1),P=o("nama"),D=o("ASC"),R=n=>{var e,f;n.sortBy.length&&(P.value=(e=n.sortBy[0])==null?void 0:e.key,D.value=(f=n.sortBy[0])==null?void 0:f.order)},z=[{title:"nama",key:"nama",sortable:!1},{title:"npsn",key:"npsn",sortable:!1},{title:"email",key:"email",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],{data:c,execute:E}=([k,A]=ie(()=>le(te("/table",{query:{data:"sekolah",q:V,role_id:q,itemsPerPage:r,page:u,sortBy:P,orderBy:D}}))),k=await k,A(),k),I=v(()=>c.value.lists.data),T=v(()=>c.value.lists.total),L=v(()=>c.value.mata_pelajaran),O=v(()=>c.value.statistik),Q=v(()=>c.value.aplikasi);$("statistik",O.value),$("aplikasi",Q.value);const i=o(!1),M=o(),m=o({sekolah_id:null,selected:[]}),G=n=>{i.value=!0,M.value=n.nama,m.value.sekolah_id=n.sekolah_id,n.mapel.forEach(e=>{m.value.selected.push(e.mata_pelajaran_id)})},H=async()=>{console.log(m.value),await se("/admin/sekolah/save-mapping",{method:"POST",body:m.value,onResponse({request:n,response:e,options:f}){let x=e._data;i.value=!1,g.value=!0,d.value=x,E()}})};return ne(i,()=>{i.value||(console.log("close-modal"),m.value={sekolah_id:null,selected:[]})}),(n,e)=>{const f=ae,x=ee,J=h,K=Y,W=X;return _(),w("section",null,[t(F,null,{default:s(()=>[t(C,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[U("div",ge,[e[11]||(e[11]=U("p",{class:"text-body-1 mb-0"}," Show ",-1)),t(f,{"model-value":l(r),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=parseInt(a,10))},null,8,["model-value"])]),t(oe),U("div",Ve,[t(x,{modelValue:l(V),"onUpdate:modelValue":e[1]||(e[1]=a=>p(V)?V.value=a:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])])]),_:1}),t(S),t(Z,{"items-per-page":l(r),"onUpdate:itemsPerPage":e[3]||(e[3]=a=>p(r)?r.value=a:null),page:l(u),"onUpdate:page":e[4]||(e[4]=a=>p(u)?u.value=a:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(I),"items-length":l(T),headers:z,class:"text-no-wrap","onUpdate:options":R},{"item.actions":s(({item:a})=>[t(B,{onClick:j=>G(a)},{default:s(()=>e[12]||(e[12]=[b("Mapping Mapel")])),_:2},1032,["onClick"])]),bottom:s(()=>[t(J,{page:l(u),"onUpdate:page":e[2]||(e[2]=a=>p(u)?u.value=a:null),"items-per-page":l(r),"total-items":l(T)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(ke,{modelValue:l(i),"onUpdate:modelValue":e[8]||(e[8]=a=>p(i)?i.value=a:null),scrollable:"","content-class":"scrollable-dialog","max-width":"500"},{default:s(()=>[t(K,{onClick:e[5]||(e[5]=a=>i.value=!l(i))}),t(F,null,{default:s(()=>[t(ce,{class:"pb-5"},{default:s(()=>[t(fe,null,{default:s(()=>[b("Pilih Mata Untuk "+re(l(M)),1)]),_:1})]),_:1}),t(S),t(C,null,{default:s(()=>[(_(!0),w(ue,null,me(l(L),a=>(_(),w("div",{key:a.id},[t(ve,{modelValue:l(m).selected,"onUpdate:modelValue":e[6]||(e[6]=j=>l(m).selected=j),label:a.nama,value:a.id},null,8,["modelValue","label","value"])]))),128))]),_:1}),t(S),t(C,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:s(()=>[t(B,{color:"secondary",variant:"tonal",onClick:e[7]||(e[7]=a=>i.value=!1)},{default:s(()=>e[13]||(e[13]=[b(" Batal ")])),_:1}),t(B,{onClick:H},{default:s(()=>e[14]||(e[14]=[b(" Simpan ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(d).color?(_(),pe(W,{key:0,color:l(d).color,icon:l(d).icon,title:l(d).title,text:l(d).text,"disable-time-out":!1,isSnackbarVisible:l(g),"onUpdate:isSnackbarVisible":e[9]||(e[9]=a=>p(g)?g.value=a:null),isSnackbarClicked:l(y),"onUpdate:isSnackbarClicked":e[10]||(e[10]=a=>p(y)?y.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible","isSnackbarClicked"])):de("",!0)])}}};export{Fe as _};
