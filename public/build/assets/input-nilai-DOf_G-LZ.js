import{_ as z}from"./ShowAlert-B-O02ezA.js";import{_ as G}from"./AppTextField-Bg4WkDel.js";import{_ as H}from"./AppAutocomplete-Dc5jI2MA.js";import{_ as J}from"./AppSelect-CCTW22dq.js";import{r as _,m as Q,n as P,c as j,a as e,w as a,u as s,f as W,i as X,p as F,o as v,e as T,k as Y,b as r,s as Z,t as U,F as N,d as ee,g as ae}from"./main-Io5vp2x9.js";import{u as te}from"./useApi-Bjuyvn6w.js";import{c as le}from"./createUrl-KboHiMjg.js";import{$ as x}from"./api-CRuhXnGs.js";import{V as oe,a as se,b as ie}from"./VCard-DTGvH92s.js";import{V as ne}from"./VDivider-LRAhXPmM.js";import{V as re}from"./VCardText-Cnn5iMV8.js";import{V as me}from"./VForm-BV4uDMac.js";import{V as c,a as i}from"./VRow-wQwuRkbI.js";import{V as de}from"./VList-b_Gx9KJj.js";import{V as ue}from"./filter-DikfXYgU.js";import"./VOverlay-DPFD_kGR.js";import"./forwardRefs-D3j0TLhE.js";import"./VImg-C0eAd2Wn.js";import"./VInput-8lQvlspd.js";import"./VTextField-78XBChJq.js";import"./VAutocomplete-CtFk9xe3.js";import"./VMenu-BOjzGfAv.js";import"./dialog-transition-CsRSG8uj.js";import"./VCheckboxBtn-ObTlpa0T.js";import"./VSelectionControl-CzvF-nnH.js";import"./VAvatar-Duc7tMPq.js";import"./VChip-DMsLZLfZ.js";import"./index-BxkgbwWS.js";/* empty css              */import"./ssrBoot-u6dU8eEs.js";const _e={class:"text-no-wrap pt-2"},pe={class:"pt-2"},ze={__name:"input-nilai",async setup(be){let V,R;const $=[{title:"1",value:"1"},{title:"2",value:"2"},{title:"3",value:"3"},{title:"4",value:"4"},{title:"5",value:"5"},{title:"6",value:"6"},{title:"7",value:"7"},{title:"8",value:"8"},{title:"9",value:"9"},{title:"10",value:"10"},{title:"11",value:"11"},{title:"12",value:"12"}],A=_([]),{data:y}=([V,R]=Q(()=>te(le("/induk/get-data",{query:{data:"nilai"}}))),V=await V,R(),V),q=P(()=>y.value.semester),w=P(()=>y.value.sekolah_id),B=P(()=>y.value.semester_id),h=_(!1),l=_({semester_id:B.value,tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null,nilai:{}}),I=()=>{l.value.tingkat=null,l.value.rombongan_belajar_id=null,l.value.pembelajaran_id=null},M=async d=>{l.value.rombongan_belajar_id=null,l.value.pembelajaran_id=null,await x("/induk/get-data",{method:"POST",body:{sekolah_id:w.value,semester_id:l.value.semester_id,tingkat:d,data:"rombel"},onResponse({request:t,response:m,options:p}){let u=m._data;A.value=u}})},C=_([]),S=_([]),O=async d=>{l.value.pembelajaran_id=null,await x("/induk/get-data",{method:"POST",body:{sekolah_id:w.value,semester_id:l.value.semester_id,rombongan_belajar_id:d,data:"mapel"},onResponse({request:t,response:m,options:p}){let u=m._data;C.value=u}})},K=async d=>{await x("/induk/get-data",{method:"POST",body:{sekolah_id:w.value,semester_id:l.value.semester_id,rombongan_belajar_id:l.value.rombongan_belajar_id,pembelajaran_id:d,data:"siswa"},onResponse({request:t,response:m,options:p}){let u=m._data;S.value=u,h.value=!!d,S.value.forEach(f=>{var o,n;l.value.nilai[f.anggota_rombel.id]=(n=(o=f.anggota_rombel)==null?void 0:o.nilai)==null?void 0:n.nilai})}})},L=_(!1),b=_({icon:null,title:null,text:null,color:null}),k=_(!1),E=async()=>{L.value=!0;const t={...{data:"nilai"},...l.value};await x("/induk/store",{method:"POST",body:t,onResponse({request:m,response:p,options:u}){let f=p._data;b.value=f,k.value=!0,h.value=!1,l.value={semester_id:B.value,tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null,nilai:{}}}})};return(d,t)=>{const m=J,p=H,u=G,f=z;return v(),j("section",null,[e(oe,null,{default:a(()=>[e(se,null,{default:a(()=>[e(ie,null,{default:a(()=>t[5]||(t[5]=[T("Input Nilai")])),_:1})]),_:1}),e(ne),e(re,null,{default:a(()=>[e(me,{onSubmit:Y(E,["prevent"])},{default:a(()=>[e(c,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(c,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>t[6]||(t[6]=[r("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Semester",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(m,{id:"semester_id",items:s(q),modelValue:s(l).semester_id,"onUpdate:modelValue":[t[0]||(t[0]=o=>s(l).semester_id=o),I],"item-title":"nama","item-value":"semester_id"},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(c,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>t[7]||(t[7]=[r("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(m,{id:"tingkat",items:$,modelValue:s(l).tingkat,"onUpdate:modelValue":[t[1]||(t[1]=o=>s(l).tingkat=o),M],placeholder:"== Pilih Tingkat Kelas =="},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(c,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>t[8]||(t[8]=[r("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(p,{id:"rombongan_belajar_id",items:s(A),"item-title":"nama","item-value":"id",modelValue:s(l).rombongan_belajar_id,"onUpdate:modelValue":[t[2]||(t[2]=o=>s(l).rombongan_belajar_id=o),O],placeholder:"== Pilih Rombongan Belajar ==",clearable:""},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(c,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>t[9]||(t[9]=[r("label",{class:"v-label text-body-2 text-high-emphasis",for:"pembelajaran_id"},"Mata Pelajaran",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(p,{id:"pembelajaran_id",items:s(C),"item-title":"id","item-value":"id",modelValue:s(l).pembelajaran_id,"onUpdate:modelValue":[t[3]||(t[3]=o=>s(l).pembelajaran_id=o),K],placeholder:"== Pilih Mata Pelajaran ==",clearable:""},{item:a(({props:o,item:n})=>{var g,D;return[e(de,Z(o,{title:(D=(g=n==null?void 0:n.raw)==null?void 0:g.mata_pelajaran)==null?void 0:D.nama}),null,16,["title"])]}),selection:a(({item:o})=>{var n,g;return[T(U((g=(n=o==null?void 0:o.raw)==null?void 0:n.mata_pelajaran)==null?void 0:g.nama),1)]}),_:1},8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),s(h)?(v(),j(N,{key:0},[e(i,{cols:"12"},{default:a(()=>[e(ue,null,{default:a(()=>[t[10]||(t[10]=r("thead",null,[r("tr",null,[r("th",{class:"text-center"},"Nama Peserta Didik"),r("th",{class:"text-center"},"Nilai")])],-1)),r("tbody",null,[(v(!0),j(N,null,ee(s(S),o=>(v(),j("tr",null,[r("td",_e,U(o.nama),1),r("td",pe,[e(u,{type:"number",modelValue:s(l).nilai[o.anggota_rombel.id],"onUpdate:modelValue":n=>s(l).nilai[o.anggota_rombel.id]=n},null,8,["modelValue","onUpdate:modelValue"])])]))),256))])]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(c,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(ae,{type:"submit",class:"me-4"},{default:a(()=>t[11]||(t[11]=[T(" Simpan ")])),_:1})]),_:1})]),_:1})]),_:1})],64)):F("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),s(b).color?(v(),W(f,{key:0,color:s(b).color,icon:s(b).icon,title:s(b).title,text:s(b).text,"disable-time-out":!1,isSnackbarVisible:s(k),"onUpdate:isSnackbarVisible":t[4]||(t[4]=o=>X(k)?k.value=o:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):F("",!0)])}}};export{ze as default};
