import{_ as z}from"./ShowAlert-Crhw45kN.js";import{_ as G}from"./TiptapEditor-DVpYmaBB.js";import{r as p,m as H,n as M,c as y,F as J,a as t,w as l,u as i,i as x,f as w,p as F,o as f,e as v,k as K,b as N,g as L}from"./main-BOi3BIW1.js";import{u as Q}from"./useApi-CHXvmuUd.js";import{c as X}from"./createUrl-Cm60FE_Q.js";import{$ as Y}from"./api-D8raZm_J.js";import{V as Z,a as I,b as h,c as R}from"./VTabs-XMHRkaLZ.js";import{V as ee}from"./VCard-BsxPU2or.js";import{V as te}from"./VForm-BPF3XLYv.js";import{V as q}from"./VCardText-BtPwo1mS.js";import{V as b,a as m}from"./VRow-DExjJUWN.js";import{V as E}from"./VImg-B2SqCbwD.js";import{V as W}from"./VFileInput-Lz0ZgLya.js";import"./VOverlay-bOV7N2Sq.js";import"./forwardRefs-D3j0TLhE.js";import"./VDivider-B06OBMyi.js";import"./index-BxkgbwWS.js";import"./ssrBoot-B1UlT3gE.js";import"./VChip-OBybeT-t.js";import"./VAvatar-DBL2rIYL.js";import"./VInput-u888SdWy.js";/* empty css              */const le={key:1},Se={__name:"visi-misi",async setup(ie){var T,$,C,B;let _,U;const n=p("visi"),{data:S,execute:j}=([_,U]=H(()=>Q(X("/table",{query:{data:"visi"}}))),_=await _,U(),_),u=M(()=>S.value),O=M(()=>S.value.sekolah_id),k=p(!1),D=p(),s=p({id:null,visi_text:null,visi_image:null,misi_text:null,misi_image:null});s.value.visi_text=($=(T=u.value)==null?void 0:T.visi)==null?void 0:$.content,s.value.misi_text=(B=(C=u.value)==null?void 0:C.misi)==null?void 0:B.content;const P=async()=>{var c;(c=D.value)==null||c.validate().then(async({valid:e})=>{if(e){const o=new FormData;o.append("id",s.value.id??""),o.append("sekolah_id",O.value),o.append("data",n.value?"misi":"visi"),o.append("visi_text",s.value.visi_text??""),o.append("visi_image",s.value.visi_image??""),o.append("misi_text",s.value.misi_text??""),o.append("misi_image",s.value.misi_image??""),await Y("/admin/konten/store",{method:"POST",body:o,onResponse({request:A,response:a,options:d}){let V=a._data;r.value=V,g.value=!0,j()}})}})},r=p({icon:null,title:null,text:null,color:null}),g=p(!1);return(c,e)=>{const o=G,A=z;return f(),y("section",null,[c.$can("create","laman-tentang-create")?(f(),y(J,{key:0},[t(Z,{modelValue:i(n),"onUpdate:modelValue":e[0]||(e[0]=a=>x(n)?n.value=a:null),class:"v-tabs-pill"},{default:l(()=>[t(I,null,{default:l(()=>e[8]||(e[8]=[v("Visi")])),_:1}),t(I,null,{default:l(()=>e[9]||(e[9]=[v("Misi")])),_:1})]),_:1},8,["modelValue"]),t(ee,{class:"mt-5"},{default:l(()=>[t(te,{ref_key:"refForm",ref:D,modelValue:i(k),"onUpdate:modelValue":e[6]||(e[6]=a=>x(k)?k.value=a:null),onSubmit:K(P,["prevent"])},{default:l(()=>[t(q,null,{default:l(()=>[t(h,{modelValue:i(n),"onUpdate:modelValue":e[5]||(e[5]=a=>x(n)?n.value=a:null)},{default:l(()=>[t(R,{value:"visi"},{default:l(()=>[t(b,{"no-gutters":""},{default:l(()=>[t(m,null,{default:l(()=>[t(b,null,{default:l(()=>[t(m,{cols:"12"},{default:l(()=>e[10]||(e[10]=[v("Deskripsi Visi")])),_:1}),t(m,{cols:"12"},{default:l(()=>[t(o,{modelValue:i(s).visi_text,"onUpdate:modelValue":e[1]||(e[1]=a=>i(s).visi_text=a),class:"border rounded basic-editor"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(m,{class:"text-center ms-4"},{default:l(()=>{var a,d;return[e[11]||(e[11]=N("p",null,"Foto Visi",-1)),(a=i(u).visi)!=null&&a.image?(f(),w(E,{key:0,class:"align-end text-white",height:"200",src:`/storage/images/${(d=i(u).visi)==null?void 0:d.image}`,cover:""},null,8,["src"])):F("",!0),t(W,{accept:"image/*",modelValue:i(s).visi_image,"onUpdate:modelValue":e[2]||(e[2]=V=>i(s).visi_image=V),class:"mt-4"},null,8,["modelValue"])]}),_:1})]),_:1})]),_:1}),t(R,{value:"misi"},{default:l(()=>[t(b,{"no-gutters":""},{default:l(()=>[t(m,null,{default:l(()=>[t(b,null,{default:l(()=>[t(m,{cols:"12"},{default:l(()=>e[12]||(e[12]=[v("Deskripsi Misi")])),_:1}),t(m,{cols:"12"},{default:l(()=>[t(o,{modelValue:i(s).misi_text,"onUpdate:modelValue":e[3]||(e[3]=a=>i(s).misi_text=a),class:"border rounded basic-editor"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(m,{class:"text-center ms-4"},{default:l(()=>{var a,d;return[e[13]||(e[13]=N("p",null,"Foto Misi",-1)),(a=i(u).misi)!=null&&a.image?(f(),w(E,{key:0,class:"align-end text-white",height:"200",src:`/storage/images/${(d=i(u).misi)==null?void 0:d.image}`,cover:""},null,8,["src"])):F("",!0),t(W,{accept:"image/*",modelValue:i(s).misi_image,"onUpdate:modelValue":e[4]||(e[4]=V=>i(s).misi_image=V),class:"mt-4"},null,8,["modelValue"])]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(q,{class:"d-flex justify-end"},{default:l(()=>[t(L,{type:"submit"},{default:l(()=>e[14]||(e[14]=[v(" Simpan ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):(f(),y("p",le,"admin area")),i(r).color?(f(),w(A,{key:2,color:i(r).color,icon:i(r).icon,title:i(r).title,text:i(r).text,"disable-time-out":!1,isSnackbarVisible:i(g),"onUpdate:isSnackbarVisible":e[7]||(e[7]=a=>x(g)?g.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):F("",!0)])}}};export{Se as default};
