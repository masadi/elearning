import{r as f}from"./validators-BHkKs9Dp.js";import{r as g,j as w,o as h,h as F,w as a,a as e,b as u,g as D,V as S,f as T,t as _,u as o,k as C,l as B,c as U,F as N,s as A}from"./main-D0jVYVC4.js";import{_ as R}from"./AppTextField-DQaDJ_w4.js";import{Q as E}from"./vue-quill.snow-DOSpqj4O.js";import{$ as I}from"./api-rHpz-S24.js";import{V as $}from"./VCard-D9ktnWd8.js";import{V as j,a as L}from"./VToolbar-BJlFkHVZ.js";import{V as O}from"./VSpacer-C8f-fzGp.js";import{V as P}from"./VToolbarItems-GygnPPF5.js";import{V as Q}from"./VCardText-BQ6fF5pr.js";import{V as z}from"./VForm-B1rAuFSt.js";import{V as p,a as s}from"./VRow-Bly8RrUE.js";import{V as G}from"./VAutocomplete-vzunrHlA.js";import{V as M}from"./VFileInput-CKzHPiCa.js";import{V as H}from"./VDialog-DdfOP8GW.js";const J={class:"text-capitalize"},me={__name:"LamanAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},pageType:{type:String,required:!0},detilData:{type:Object,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(m,{emit:q}){const i=m,b=q,V=g(!1),y=g(),t=g({id:"",sekolah_id:null,type:i.pageType,content:null,foto:null,nama:null}),k=async()=>{var n;(n=y.value)==null||n.validate().then(async({valid:l})=>{if(l){const r=new FormData;r.append("id",t.value.id),r.append("sekolah_id",t.value.sekolah_id),r.append("type",t.value.type),r.append("content",t.value.content),r.append("foto",t.value.foto),r.append("nama",t.value.nama),await I("/laman/store",{method:"POST",body:r,onResponse({request:d,response:x,options:K}){let v=x._data;console.log(v),console.log(r),c(),b("notif",v)}})}})},c=()=>{b("update:isDialogVisible",!1),t.value={id:"",sekolah_id:null,type:i.pageType,content:null,foto:null,nama:null}};return w(i,async()=>{i.isDialogVisible&&i.detilData&&(t.value={id:i.detilData.id,sekolah_id:i.detilData.sekolah_id,type:i.pageType,content:i.pageType=="program"?i.detilData.deskripsi:i.detilData.content,foto:null,nama:i.detilData.nama})}),(n,l)=>{const r=R;return h(),F(H,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":i.isDialogVisible,"onUpdate:modelValue":c},{default:a(()=>[e($,null,{default:a(()=>[u("div",null,[e(j,{color:"primary"},{default:a(()=>[e(D,{icon:"",variant:"plain",onClick:c},{default:a(()=>[e(S,{color:"white",icon:"tabler-x"})]),_:1}),e(L,null,{default:a(()=>[T(_(m.detilData?"Edit":"Tambah")+" Laman ",1),u("span",J,_(m.pageType),1)]),_:1}),e(O),e(P,null,{default:a(()=>[e(D,{variant:"text",onClick:k},{default:a(()=>l[5]||(l[5]=[T("Simpan")])),_:1})]),_:1})]),_:1})]),e(Q,null,{default:a(()=>[e(o(z),{ref_key:"refForm",ref:y,modelValue:o(V),"onUpdate:modelValue":l[4]||(l[4]=d=>C(V)?V.value=d:null),onSubmit:B(k,["prevent"])},{default:a(()=>[e(p,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[6]||(l[6]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:a(()=>[e(G,{modelValue:o(t).sekolah_id,"onUpdate:modelValue":l[0]||(l[0]=d=>o(t).sekolah_id=d),variant:"outlined",items:m.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in n?n.requiredValidator:o(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),m.pageType=="program"?(h(),U(N,{key:0},[e(s,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[7]||(l[7]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:a(()=>[e(r,{id:"nama",modelValue:o(t).nama,"onUpdate:modelValue":l[1]||(l[1]=d=>o(t).nama=d),rules:["requiredValidator"in n?n.requiredValidator:o(f)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[8]||(l[8]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"foto"},"Gambar",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:a(()=>[e(M,{accept:"image/*",modelValue:o(t).foto,"onUpdate:modelValue":l[2]||(l[2]=d=>o(t).foto=d),rules:["requiredValidator"in n?n.requiredValidator:o(f)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})],64)):A("",!0),e(s,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[9]||(l[9]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"content"},"Deskripsi",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:a(()=>[e(o(E),{theme:"snow",toolbar:"full",content:o(t).content,"onUpdate:content":l[3]||(l[3]=d=>o(t).content=d),contentType:"html",rules:["requiredValidator"in n?n.requiredValidator:o(f)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{me as _};
