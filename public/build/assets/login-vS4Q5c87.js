import{V as C,_ as I}from"./VForm-DQqGHsht.js";import{r as n,i as A,j as L,o as R,c as T,d as o,b as a,m as s,H as g,v as D,e as t,a1 as F,a2 as S,t as j,F as B,af as c,as as P}from"./main-BWJAXw3d.js";import{u as h,m as E,a as M}from"./misc-mask-light-Cg-itabE.js";import{V as N}from"./VNodeRenderer-KMabNe0i.js";import{u as $}from"./useAbility-CUWneiBT.js";import{$ as U}from"./api-DGntPLYC.js";import{a as u,V}from"./VRow-CrIx3l9B.js";import{V as q}from"./VImg-B2d3AaZX.js";import{V as H}from"./VCard-DnzKtIP_.js";import{V as b}from"./VCardText-l-PrFWsu.js";import{V as G}from"./VCheckbox-C-B_vpif.js";import"./VTextField-B5haAvTI.js";import"./forwardRefs-DWGaNmQL.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-02uT0YNx.js";import"./VCheckboxBtn-CQdgAQLM.js";const K="/build/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",O="/build/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",Y="/build/assets/auth-v2-login-illustration-dark-ClExSVqL.png",z="/build/assets/auth-v2-login-illustration-light-C4sKfRS1.png",J={href:"javascript:void(0)"},Q={class:"auth-logo d-flex align-center gap-x-3"},W={class:"auth-title"},X={class:"position-relative bg-background w-100 me-0"},Z={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},ee=["src"],ae={class:"d-flex align-center flex-wrap justify-space-between my-6"},we={__name:"login",setup(se){const v=h(z,Y,O,K,!0),w=h(M,E),f=n(),r=n({email:"",password:"",remember:!1});A(),L();const k=$(),p=n({email:void 0,password:void 0});n(!1);const d=n(!1),_=async()=>{try{const i=await U("/auth/login",{method:"POST",body:{email:r.value.email,password:r.value.password},onResponseError({response:y}){p.value=y._data.errors}}),{accessToken:e,userData:m,userAbilityRules:l}=i;c("userAbilityRules").value=l,k.update(l),c("userData").value=m,c("accessToken").value=e,await P(()=>{window.location.replace("/")})}catch(i){console.error(i)}},x=()=>{var i;(i=f.value)==null||i.validate().then(({valid:e})=>{e&&_()})};return(i,e)=>{const m=I;return R(),T(B,null,[o("a",J,[o("div",Q,[a(s(N),{nodes:s(g).app.logo},null,8,["nodes"]),o("h1",W,D(s(g).app.title),1)])]),a(V,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[a(u,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[o("div",X,[o("div",Z,[a(q,{"max-width":"613",src:s(v),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),o("img",{class:"auth-footer-mask flip-in-rtl",src:s(w),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ee)])]),_:1}),a(u,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[a(H,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[a(b,null,{default:t(()=>e[4]||(e[4]=[o("h4",{class:"text-h4 mb-1"}," Admin Area ",-1),o("p",{class:"mb-0"}," Silahkan login untuk dapat mengakses Admin Area ",-1)])),_:1}),a(b,null,{default:t(()=>[a(C,{ref_key:"refVForm",ref:f,onSubmit:F(x,["prevent"])},{default:t(()=>[a(V,null,{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(m,{modelValue:s(r).email,"onUpdate:modelValue":e[0]||(e[0]=l=>s(r).email=l),"error-messages":s(p).email,autofocus:"",label:"Email",type:"email",placeholder:"email.anda@email.com"},null,8,["modelValue","error-messages"])]),_:1}),a(u,{cols:"12"},{default:t(()=>[a(m,{modelValue:s(r).password,"onUpdate:modelValue":e[1]||(e[1]=l=>s(r).password=l),"error-messages":s(p).password,label:"Password",placeholder:"············",type:s(d)?"text":"password",autocomplete:"password","append-inner-icon":s(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=l=>d.value=!s(d))},null,8,["modelValue","error-messages","type","append-inner-icon"]),o("div",ae,[a(G,{modelValue:s(r).remember,"onUpdate:modelValue":e[3]||(e[3]=l=>s(r).remember=l),label:"Remember me"},null,8,["modelValue"]),e[5]||(e[5]=o("a",{class:"text-primary",href:"javascript:void(0)"}," Forgot Password? ",-1))]),a(S,{block:"",type:"submit"},{default:t(()=>e[6]||(e[6]=[j(" Login ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{we as default};
