import{a as ae}from"./formatters-DULOiX1-.js";import{_ as _e}from"./ConfirmDialog-Cywo4_04.js";import{_ as we}from"./ShowAlert-D5ZZPrYR.js";import{r as E,e as oe}from"./validators-BHkKs9Dp.js";import{e as f,ao as le,E as ie,o as V,c as w,w as t,a as e,u as l,i as D,A as ne,j as _,h as K,d as s,b as A,t as c,D as X,V as j,F as h,r as te,f as Te,g as W,G as qe}from"./main-Bnmu9XO0.js";import{_ as Y}from"./AppTextField-CqO8VkxZ.js";import{_ as se}from"./DialogCloseBtn-D3PeKKD3.js";import{V as G}from"./VCard-ChHegx79.js";import{V as Q}from"./VCardText-Ctlht1_w.js";import{V as re}from"./VForm-DT_EOgd0.js";import{V as Ce,a as x}from"./VRow-BNxGzO3j.js";import{V as ue}from"./VFileInput-BB5Ev3OO.js";import{V as Z}from"./VDialog-BJHGCoS7.js";import{V as de}from"./VAvatar-BEB8e9Yn.js";import{V as me}from"./VImg-Bg89Dlz9.js";import{b as pe,V as $e,_ as xe,a as Ae}from"./VDataTableServer-bseTomP0.js";import{$ as J}from"./api-CPFjXvdT.js";import{V as Se,a as Be,b as Fe}from"./VToolbarItems-Dr2ei-NP.js";import{V as fe}from"./VSpacer-BKYt_Yyd.js";import{u as Ee}from"./useApi-BWu56MVn.js";import{c as Ie}from"./createUrl-1JHGR0rt.js";import{V as Ne}from"./VDivider-aD7j9NM0.js";import"./VOverlay-BTUnJkXq.js";import"./forwardRefs-D9kYFWgq.js";import"./VInput-scrnqdoG.js";import"./VTextField-DuVEWz3E.js";/* empty css              */import"./VChip-Dbk-9vmG.js";import"./VSlideGroup-D9eGd-4_.js";import"./dialog-transition-CARaDKMy.js";import"./VList-DezTKIM9.js";import"./VMenu-DfINfLoU.js";import"./VCheckboxBtn-D_0z7_tW.js";import"./VSelectionControl-DxYGjZ3I.js";import"./index-BxkgbwWS.js";const je={__name:"PtkEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilPtk:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(P,{emit:T}){const g=P,k=T,m=d=>{k("update:isDialogVisible",d)},r=f(structuredClone(le(g.detilPtk)));ie(g,()=>{r.value=structuredClone(le(g.detilPtk)),r.value.avatar=null});const u=f(!1),y=f(),S=()=>{var d;(d=y.value)==null||d.validate().then(async({valid:a})=>{a&&k("submit",r.value)})};return(d,a)=>{const L=se,p=Y;return V(),w(Z,{width:d.$vuetify.display.smAndDown?"auto":500,"model-value":g.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":m},{default:t(()=>[e(L,{onClick:a[0]||(a[0]=o=>m(!1))}),e(G,{title:`Edit Data ${l(r).nama}`},{default:t(()=>[e(Q,null,{default:t(()=>[e(re,{ref_key:"refForm",ref:y,modelValue:l(u),"onUpdate:modelValue":a[9]||(a[9]=o=>D(u)?u.value=o:null),onSubmit:ne(S,["prevent"])},{default:t(()=>[e(Ce,null,{default:t(()=>[e(x,{cols:"12"},{default:t(()=>[e(p,{id:"nama",modelValue:l(r).nama,"onUpdate:modelValue":a[1]||(a[1]=o=>l(r).nama=o),rules:["requiredValidator"in d?d.requiredValidator:l(E)]},{label:t(()=>a[10]||(a[10]=[_("Nama Lengkap")])),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(p,{id:"nik",modelValue:l(r).nik,"onUpdate:modelValue":a[2]||(a[2]=o=>l(r).nik=o),rules:["requiredValidator"in d?d.requiredValidator:l(E)]},{label:t(()=>a[11]||(a[11]=[_("NIK")])),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(p,{id:"email",modelValue:l(r).email,"onUpdate:modelValue":a[3]||(a[3]=o=>l(r).email=o),rules:["requiredValidator"in d?d.requiredValidator:l(E),"emailValidator"in d?d.emailValidator:l(oe)]},{label:t(()=>a[12]||(a[12]=[_("Email")])),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(p,{id:"jenis_kelamin",modelValue:l(r).jenis_kelamin,"onUpdate:modelValue":a[4]||(a[4]=o=>l(r).jenis_kelamin=o),rules:["requiredValidator"in d?d.requiredValidator:l(E)]},{label:t(()=>a[13]||(a[13]=[_("Jenis Kelamin")])),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(p,{id:"tempat_lahir",modelValue:l(r).tempat_lahir,"onUpdate:modelValue":a[5]||(a[5]=o=>l(r).tempat_lahir=o),rules:["requiredValidator"in d?d.requiredValidator:l(E)]},{label:t(()=>a[14]||(a[14]=[_("Tempat Lahir")])),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(p,{id:"tanggal_lahir",modelValue:l(r).tanggal_lahir,"onUpdate:modelValue":a[6]||(a[6]=o=>l(r).tanggal_lahir=o),rules:["requiredValidator"in d?d.requiredValidator:l(E),d.dateValidator]},{label:t(()=>a[15]||(a[15]=[_("Tanggal Lahir")])),_:1},8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(p,{id:"nuptk",modelValue:l(r).nuptk,"onUpdate:modelValue":a[7]||(a[7]=o=>l(r).nuptk=o)},{label:t(()=>a[16]||(a[16]=[_("NUPTK")])),_:1},8,["modelValue"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(ue,{accept:"image/*",modelValue:l(r).avatar,"onUpdate:modelValue":a[8]||(a[8]=o=>l(r).avatar=o),id:"avatar",label:"Foto Profil"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(K,{type:"submit"},{default:t(()=>a[17]||(a[17]=[_("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title"])]),_:1},8,["width","model-value"])}}},Le={class:"text-center"},Oe={key:1,class:"text-5xl font-weight-medium"},Re={class:"text-h4 text-center mb-2"},Ke={__name:"PtkDetilDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilPtk:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(P,{emit:T}){const g=P,k=T,m=r=>{k("update:isDialogVisible",r)};return(r,u)=>{const y=se;return V(),w(Z,{width:r.$vuetify.display.smAndDown?"auto":800,"model-value":g.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":m},{default:t(()=>[e(y,{onClick:u[0]||(u[0]=S=>m(!1))}),g.detilPtk?(V(),w(G,{key:0,class:"pa-2 pa-sm-10"},{default:t(()=>[e(Q,null,{default:t(()=>[s("div",Le,[e(de,{rounded:"",size:100,color:g.detilPtk.avatar?void 0:"primary",variant:g.detilPtk.avatar?void 0:"tonal"},{default:t(()=>[g.detilPtk.avatar?(V(),w(me,{key:0,src:g.detilPtk.avatar},null,8,["src"])):(V(),A("span",Oe,c(("avatarText"in r?r.avatarText:l(ae))(g.detilPtk.nama)),1))]),_:1},8,["color","variant"])]),s("h4",Re,c(P.detilPtk.nama),1),e(pe,{class:"permission-table text-no-wrap mb-6 mt-4"},{default:t(()=>[s("tr",null,[u[1]||(u[1]=s("td",null,"Nama",-1)),s("td",null,": "+c(P.detilPtk.nama),1)]),s("tr",null,[u[2]||(u[2]=s("td",null,"NIK",-1)),s("td",null,": "+c(P.detilPtk.nik),1)]),s("tr",null,[u[3]||(u[3]=s("td",null,"NUPTK",-1)),s("td",null,": "+c(P.detilPtk.nuptk),1)]),s("tr",null,[u[4]||(u[4]=s("td",null,"Email",-1)),s("td",null,": "+c(P.detilPtk.email),1)]),s("tr",null,[u[5]||(u[5]=s("td",null,"Jenis Kelamin",-1)),s("td",null,": "+c(P.detilPtk.jenis_kelamin),1)]),s("tr",null,[u[6]||(u[6]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,": "+c(P.detilPtk.tempat_lahir)+", "+c(new Date(P.detilPtk.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)])]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1},8,["width","model-value"])}}},ze={__name:"AddPtkDialog",props:{sekolah:{type:Object,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(P,{emit:T}){const g=P,k=T,m=f(""),r=f(!1),u=f(),y=async()=>{var p;(p=u.value)==null||p.validate().then(async({valid:o})=>{o&&await J("/referensi/store",{method:"POST",body:{data:"import-ptk",sekolah_id:g.sekolah.sekolah_id,item:a.value},onResponse({request:B,response:b,options:O}){let q=b._data;k("update:isDialogVisible",!1),k("notif",q),a.value=[],m.value=""}})})},S=()=>{k("update:isDialogVisible",!1),m.value=""},d=f(!1),a=f([]),L=async p=>{const o=new FormData;o.append("file_excel",p),await J("/referensi/import",{method:"POST",body:o,onResponse({request:B,response:b,options:O}){let q=b._data;a.value=q.imported_data,d.value=!0}})};return(p,o)=>{const B=Y;return V(),w(Z,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":g.isDialogVisible,"onUpdate:modelValue":S},{default:t(()=>[e(G,null,{default:t(()=>[s("div",null,[e(Se,{color:"primary"},{default:t(()=>[e(K,{icon:"",variant:"plain",onClick:S},{default:t(()=>[e(j,{color:"white",icon:"tabler-x"})]),_:1}),e(Be,null,{default:t(()=>o[2]||(o[2]=[_("Tambah PTK")])),_:1}),e(fe),e(Fe,null,{default:t(()=>[e(K,{variant:"text",href:"/unduhan/template-ptk",target:"_blank"},{default:t(()=>[o[3]||(o[3]=_("Unduh Template ")),e(j,{end:"",icon:"tabler-cloud-download"})]),_:1}),e(K,{variant:"text",onClick:y},{default:t(()=>o[4]||(o[4]=[_("Simpan")])),_:1})]),_:1})]),_:1})]),e(Q,null,{default:t(()=>[e(l(re),{ref_key:"refForm",ref:u,modelValue:l(r),"onUpdate:modelValue":o[1]||(o[1]=b=>D(r)?r.value=b:null),onSubmit:ne(y,["prevent"])},{default:t(()=>[e(ue,{accept:".xlsx",modelValue:l(m),"onUpdate:modelValue":[o[0]||(o[0]=b=>D(m)?m.value=b:null),L],label:"Import Excel"},null,8,["modelValue"]),e(pe,{class:"permission-table text-no-wrap mb-6 mt-4"},{default:t(()=>[o[5]||(o[5]=s("thead",null,[s("tr",null,[s("th",null,"no"),s("th",null,"nama"),s("th",null,"nuptk"),s("th",null,"email"),s("th",null,"jenis_kelamin"),s("th",null,"tempat_lahir"),s("th",null,"tanggal_lahir"),s("th",null,"nik")])],-1)),s("tbody",null,[(V(!0),A(h,null,te(l(a),(b,O)=>(V(),A("tr",{key:b.no},[(V(!0),A(h,null,te(b,(q,U,z)=>(V(),A("td",null,[U=="no"?(V(),A(h,{key:0},[_(c(q),1)],64)):(V(),A(h,{key:1},[U=="email"?(V(),w(B,{key:0,modelValue:b[U],"onUpdate:modelValue":C=>b[U]=C,rules:["requiredValidator"in p?p.requiredValidator:l(E),"emailValidator"in p?p.emailValidator:l(oe)]},null,8,["modelValue","onUpdate:modelValue","rules"])):U!="nuptk"?(V(),w(B,{key:1,modelValue:b[U],"onUpdate:modelValue":C=>b[U]=C,rules:["requiredValidator"in p?p.requiredValidator:l(E)]},null,8,["modelValue","onUpdate:modelValue","rules"])):(V(),w(B,{key:2,modelValue:b[U],"onUpdate:modelValue":C=>b[U]=C},null,8,["modelValue","onUpdate:modelValue"]))],64))]))),256))]))),128))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Me={class:"d-flex gap-2 align-center"},he={class:"d-flex align-center flex-wrap gap-4"},Je={class:"d-flex align-center gap-x-4"},Ge={key:1},Qe={class:"d-flex flex-column"},He={class:"text-base"},We={class:"text-sm"},Sl={__name:"ptk",async setup(P){let T,g;const k=f({icon:null,title:null,text:null,color:null}),m=f(!1),r=f(""),u=f(10),y=f(1),S=f("nama"),d=f("ASC"),a=v=>{var n,$;v.sortBy.length&&(S.value=(n=v.sortBy[0])==null?void 0:n.key,d.value=($=v.sortBy[0])==null?void 0:$.order)},L=[{title:"Ptk",key:"user",sortable:!1},{title:"nik",key:"nik",sortable:!1},{title:"tempat, tanggal lahir",key:"ttl",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],p=v=>{k.value=v,m.value=!0},{data:o,execute:B}=([T,g]=Te(()=>Ee(Ie("/table",{query:{data:"ptk",q:r,itemsPerPage:u,page:y,sortBy:S,orderBy:d}}))),T=await T,g(),T);o.value.color&&(k.value=o.value,m.value=!0);const b=W(()=>o.value.lists.data),O=W(()=>o.value.lists.total),q=W(()=>o.value.sekolah),U=f(!1),z=f(),C=f(),Ve=async v=>{z.value=v,C.value=!0},ve=async v=>{v&&await J(`/referensi/destroy/ptk/${z.value}`,{method:"DELETE",onResponse({request:n,response:$,options:I}){let N=$._data;k.value=N,m.value=!0,z.value=null,B()}})},M=f(!1),R=f(!1),F=f(),ge=async v=>{M.value=!0,F.value=v},ke=async v=>{R.value=!0,F.value=v};ie(m,()=>{m.value||B()});const be=async v=>{console.log(v);const n=new FormData;n.append("data","update-ptk");for(const[$,I]of Object.entries(v))n.append($,I||"");await J("/referensi/store",{method:"POST",body:n,onResponse({request:$,response:I,options:N}){let H=I._data;k.value=H,m.value=!0,R.value=!1}})};return(v,n)=>{const $=xe,I=Y,N=qe("IconBtn"),H=Ae,ye=ze,De=Ke,ce=je,Pe=we,Ue=_e;return V(),A("section",null,[e(G,null,{default:t(()=>[e(Q,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[s("div",Me,[e($,{"model-value":l(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":n[0]||(n[0]=i=>u.value=parseInt(i,10))},null,8,["model-value"])]),e(fe),s("div",he,[e(I,{modelValue:l(r),"onUpdate:modelValue":n[1]||(n[1]=i=>D(r)?r.value=i:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),l(q)?(V(),w(K,{key:0,onClick:n[2]||(n[2]=i=>U.value=!0)},{default:t(()=>[n[14]||(n[14]=_("Tambah ")),e(j,{end:"",icon:"tabler-cloud-upload"})]),_:1})):X("",!0)])]),_:1}),e(Ne),e($e,{"items-per-page":l(u),"onUpdate:itemsPerPage":n[4]||(n[4]=i=>D(u)?u.value=i:null),page:l(y),"onUpdate:page":n[5]||(n[5]=i=>D(y)?y.value=i:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(b),"items-length":l(O),headers:L,class:"text-no-wrap","onUpdate:options":a},{"item.user":t(({item:i})=>[s("div",Je,[e(de,{size:"34",variant:i.avatar?void 0:"tonal",color:i.avatar?void 0:"success"},{default:t(()=>[i.avatar?(V(),w(me,{key:0,src:i.avatar},null,8,["src"])):(V(),A("span",Ge,c(("avatarText"in v?v.avatarText:l(ae))(i.name)),1))]),_:2},1032,["variant","color"]),s("div",Qe,[s("h6",He,c(i.nama),1),s("div",We,c(i.email),1)])])]),"item.ttl":t(({item:i})=>[_(c(i.tempat_lahir)+", "+c(new Date(i.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)]),"item.actions":t(({item:i})=>[e(N,{onClick:ee=>Ve(i.ptk_id)},{default:t(()=>[e(j,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(N,{onClick:ee=>ge(i)},{default:t(()=>[e(j,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),e(N,{onClick:ee=>ke(i)},{default:t(()=>[e(j,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:t(()=>[e(H,{page:l(y),"onUpdate:page":n[3]||(n[3]=i=>D(y)?y.value=i:null),"items-per-page":l(u),"total-items":l(O)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ye,{"is-dialog-visible":l(U),"onUpdate:isDialogVisible":n[6]||(n[6]=i=>D(U)?U.value=i:null),onNotif:p,sekolah:l(q),"onUpdate:sekolah":n[7]||(n[7]=i=>D(q)?q.value=i:null)},null,8,["is-dialog-visible","sekolah"]),e(De,{"is-dialog-visible":l(M),"onUpdate:isDialogVisible":n[8]||(n[8]=i=>D(M)?M.value=i:null),detilPtk:l(F),"onUpdate:detilPtk":n[9]||(n[9]=i=>D(F)?F.value=i:null)},null,8,["is-dialog-visible","detilPtk"]),e(ce,{"is-dialog-visible":l(R),"onUpdate:isDialogVisible":n[10]||(n[10]=i=>D(R)?R.value=i:null),"detil-ptk":l(F),"onUpdate:detilPtk":n[11]||(n[11]=i=>D(F)?F.value=i:null),onSubmit:be},null,8,["is-dialog-visible","detil-ptk"]),l(k).color?(V(),w(Pe,{key:0,color:l(k).color,icon:l(k).icon,title:l(k).title,text:l(k).text,"disable-time-out":!1,isSnackbarVisible:l(m),"onUpdate:isSnackbarVisible":n[12]||(n[12]=i=>D(m)?m.value=i:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):X("",!0),e(Ue,{isDialogVisible:l(C),"onUpdate:isDialogVisible":n[13]||(n[13]=i=>D(C)?C.value=i:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:ve},null,8,["isDialogVisible"])])}}};export{Sl as default};
