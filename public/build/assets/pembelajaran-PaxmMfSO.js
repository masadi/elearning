import{_ as re}from"./ConfirmDialog-DR8kbf6E.js";import{_ as ue}from"./ShowAlert-Drovwkki.js";import{r as h}from"./validators-BHkKs9Dp.js";import{r as m,j as H,o as I,h as z,w as l,a as e,b as c,g as J,V as $,f as x,t as B,u as a,k as v,l as de,p as K,m as me,n as P,c as pe,e as fe}from"./main-DU9EoqjC.js";import{_ as W}from"./AppTextField-BtZ6s5uj.js";import{Q as ve}from"./vue-quill.snow-3pzH-tLV.js";import{$ as X}from"./api-DOKPi02l.js";import{V as Y}from"./VCard-D9Cry3-P.js";import{V as Ve,a as be}from"./VToolbar-dfUwmN75.js";import{V as Z}from"./VSpacer-CPX_omNB.js";import{V as ce}from"./VToolbarItems-DuTd-emE.js";import{V as ee}from"./VCardText-RWvda3lS.js";import{V as ge}from"./VForm-BR18QX3p.js";import{V as D,a as d}from"./VRow-DyuxuK6E.js";import{V as Q}from"./VAutocomplete-DZftX7Fb.js";import{V as ke}from"./VDialog-DyvuE7wz.js";import{V as _e,_ as ye}from"./VDataTableServer-ChrE0CS-.js";import{_ as je}from"./AppSelect-DeMMEKiH.js";import{u as De}from"./useApi-CkGLT1Ap.js";import{c as xe}from"./createUrl-tJf5FE1r.js";import{V as he}from"./VDivider-UhfOSXAm.js";import"./VOverlay-CZFZXewK.js";import"./forwardRefs-D9kYFWgq.js";import"./VImg-Df4Xo0t8.js";import"./VInput-Cba-K_ta.js";import"./VTextField-DeclBAld.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BxkgbwWS.js";import"./VAvatar-Cwli2Xy-.js";/* empty css              */import"./VList-4TIhbJtc.js";import"./ssrBoot-T14GIqmt.js";import"./VMenu-u3uKUHdg.js";import"./dialog-transition-C75lN6B9.js";import"./VCheckboxBtn-Bo8SZWz6.js";import"./VSelectionControl-Dxa861c7.js";import"./VChip-DY3MPJQe.js";const Pe={__name:"PembelajaranAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},mataPelajaran:{type:Array,required:!0},detilData:{type:Object,required:!1,default:null},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(A,{emit:k}){const r=A,V=k,p=m(!1),g=m(),s=m({id:null,sekolah_id:r.sekolahId,mata_pelajaran_id:null,judul:null,deskripsi:null,status:null}),b=async()=>{var u;(u=g.value)==null||u.validate().then(async({valid:i})=>{i&&await X("/admin/pembelajaran/store",{method:"POST",body:s.value,onResponse({request:U,response:n,options:E}){let F=n._data;_(),V("notif",F)}})})},_=()=>{V("update:isDialogVisible",!1),s.value={id:null,sekolah_id:r.sekolahId,mata_pelajaran_id:null,judul:null,deskripsi:null,status:null}};H(r,async()=>{r.isDialogVisible&&r.detilData&&(s.value={id:r.detilData.pembelajaran_id,sekolah_id:r.detilData.sekolah_id,mata_pelajaran_id:r.detilData.mata_pelajaran_id,judul:r.detilData.judul,deskripsi:r.detilData.deskripsi,status:r.detilData.status})});const q=[{title:"Aktif",value:"1"},{title:"Tidak Aktif",value:"0"}];return(u,i)=>{const U=W;return I(),z(ke,{fullscreen:"",scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":r.isDialogVisible,"onUpdate:modelValue":_},{default:l(()=>[e(Y,null,{default:l(()=>[c("div",null,[e(Ve,{color:"primary"},{default:l(()=>[e(J,{icon:"",variant:"plain",onClick:_},{default:l(()=>[e($,{color:"white",icon:"tabler-x"})]),_:1}),e(be,null,{default:l(()=>[x(B(A.detilData?"Edit":"Tambah")+" Pembelajaran ",1)]),_:1}),e(Z),e(ce,null,{default:l(()=>[e(J,{variant:"text",onClick:b},{default:l(()=>i[6]||(i[6]=[x("Simpan")])),_:1})]),_:1})]),_:1})]),e(ee,null,{default:l(()=>[e(a(ge),{ref_key:"refForm",ref:g,modelValue:a(p),"onUpdate:modelValue":i[5]||(i[5]=n=>v(p)?p.value=n:null),onSubmit:de(b,["prevent"])},{default:l(()=>[e(D,null,{default:l(()=>[u.$can("create","laman-tentang-create")?K("",!0):(I(),z(d,{key:0,cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>i[7]||(i[7]=[c("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(d,{cols:"12",md:"9"},{default:l(()=>[e(Q,{modelValue:a(s).sekolah_id,"onUpdate:modelValue":i[0]||(i[0]=n=>a(s).sekolah_id=n),variant:"outlined",items:A.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in u?u.requiredValidator:a(h)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),e(d,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>i[8]||(i[8]=[c("label",{class:"v-label text-body-2 text-high-emphasis",for:"mata_pelajaran_id"},"Mata Pelajaran",-1)])),_:1}),e(d,{cols:"12",md:"9"},{default:l(()=>[e(Q,{modelValue:a(s).mata_pelajaran_id,"onUpdate:modelValue":i[1]||(i[1]=n=>a(s).mata_pelajaran_id=n),variant:"outlined",items:r.mataPelajaran,"item-title":"nama","item-value":"id",placeholder:"== Pilih Mata Pelajaran ==",rules:["requiredValidator"in u?u.requiredValidator:a(h)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>i[9]||(i[9]=[c("label",{class:"v-label text-body-2 text-high-emphasis",for:"judul"},"Judul",-1)])),_:1}),e(d,{cols:"12",md:"9"},{default:l(()=>[e(U,{id:"judul",modelValue:a(s).judul,"onUpdate:modelValue":i[2]||(i[2]=n=>a(s).judul=n),rules:["requiredValidator"in u?u.requiredValidator:a(h)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>i[10]||(i[10]=[c("label",{class:"v-label text-body-2 text-high-emphasis",for:"foto_id_gdrive"},"Status",-1)])),_:1}),e(d,{cols:"12",md:"9"},{default:l(()=>[e(Q,{modelValue:a(s).status,"onUpdate:modelValue":i[3]||(i[3]=n=>a(s).status=n),variant:"outlined",items:q,placeholder:"== Pilih Status ==",rules:["requiredValidator"in u?u.requiredValidator:a(h)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>i[11]||(i[11]=[c("label",{class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},"Deskripsi Pembelajaran",-1)])),_:1}),e(d,{cols:"12",md:"9"},{default:l(()=>[e(a(ve),{theme:"snow",toolbar:"full",content:a(s).deskripsi,"onUpdate:content":i[4]||(i[4]=n=>a(s).deskripsi=n),contentType:"html",rules:["requiredValidator"in u?u.requiredValidator:a(h)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Ae={class:"d-flex gap-2 align-center"},qe={class:"d-flex align-center flex-wrap gap-4"},pa={__name:"pembelajaran",async setup(A){let k,r;const V=m({icon:null,title:null,text:null,color:null}),p=m(!1),g=m(""),s=m(10),b=m(1),_=m("created_at"),q=m("DESC"),u=f=>{var t,j;f.sortBy.length&&(_.value=(t=f.sortBy[0])==null?void 0:t.key,q.value=(j=f.sortBy[0])==null?void 0:j.order)},i=[{title:"Judul",key:"judul",sortable:!1},{title:"mata pelajaran",key:"mata_pelajaran",sortable:!1},{title:"status",key:"status",sortable:!1},{title:"jml tes",key:"tes_count",sortable:!1,align:"center"},{title:"Actions",key:"actions",align:"center",sortable:!1}],U=f=>{V.value=f,p.value=!0},{data:n,execute:E}=([k,r]=me(()=>De(xe("/table",{query:{data:"pembelajaran",q:g,itemsPerPage:s,page:b,sortBy:_,orderBy:q}}))),k=await k,r(),k);n.value.color&&(V.value=n.value,p.value=!0);const F=P(()=>n.value.lists.data),L=P(()=>n.value.lists.total),N=P(()=>n.value.sekolah),R=P(()=>n.value.sekolah_id),M=P(()=>n.value.mata_pelajaran),y=m(!1),O=m(),C=m(),ae=async f=>{O.value=f,C.value=!0},le=async f=>{f&&await X(`/admin/pembelajaran/destroy/${O.value}`,{method:"DELETE",onResponse({request:t,response:j,options:G}){let w=j._data;V.value=w,p.value=!0,O.value=null,E()}})},S=m(),te=async f=>{y.value=!0,S.value=f};return H(p,()=>{p.value||E()}),(f,t)=>{const j=je,G=W,w=fe("IconBtn"),oe=ye,ie=Pe,se=ue,ne=re;return I(),pe("section",null,[e(Y,null,{default:l(()=>[e(ee,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[c("div",Ae,[e(j,{"model-value":a(s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=o=>s.value=parseInt(o,10))},null,8,["model-value"])]),e(Z),c("div",qe,[x(B(a(y))+" ",1),e(G,{modelValue:a(g),"onUpdate:modelValue":t[1]||(t[1]=o=>v(g)?g.value=o:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(J,{onClick:t[2]||(t[2]=o=>y.value=!0)},{default:l(()=>[t[13]||(t[13]=x("Tambah ")),e($,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(he),e(_e,{"items-per-page":a(s),"onUpdate:itemsPerPage":t[4]||(t[4]=o=>v(s)?s.value=o:null),page:a(b),"onUpdate:page":t[5]||(t[5]=o=>v(b)?b.value=o:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:a(F),"items-length":a(L),headers:i,class:"text-no-wrap","onUpdate:options":u},{"item.mata_pelajaran":l(({item:o})=>{var T;return[x(B((T=o.mata_pelajaran)==null?void 0:T.nama),1)]}),"item.status":l(({item:o})=>[x(B(o.status==1?"Aktif":"Tidak Aktif"),1)]),"item.actions":l(({item:o})=>[e(w,{onClick:T=>ae(o.pembelajaran_id)},{default:l(()=>[e($,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(w,{onClick:T=>te(o)},{default:l(()=>[e($,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:l(()=>[e(oe,{page:a(b),"onUpdate:page":t[3]||(t[3]=o=>v(b)?b.value=o:null),"items-per-page":a(s),"total-items":a(L)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ie,{"is-dialog-visible":a(y),"onUpdate:isDialogVisible":t[6]||(t[6]=o=>v(y)?y.value=o:null),onNotif:U,sekolah:a(N),"onUpdate:sekolah":t[7]||(t[7]=o=>v(N)?N.value=o:null),sekolahId:a(R),"onUpdate:sekolahId":t[8]||(t[8]=o=>v(R)?R.value=o:null),"detil-data":a(S),"onUpdate:detilData":t[9]||(t[9]=o=>v(S)?S.value=o:null),mataPelajaran:a(M),"onUpdate:mataPelajaran":t[10]||(t[10]=o=>v(M)?M.value=o:null)},null,8,["is-dialog-visible","sekolah","sekolahId","detil-data","mataPelajaran"]),a(V).color?(I(),z(se,{key:0,color:a(V).color,icon:a(V).icon,title:a(V).title,text:a(V).text,"disable-time-out":!1,isSnackbarVisible:a(p),"onUpdate:isSnackbarVisible":t[11]||(t[11]=o=>v(p)?p.value=o:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):K("",!0),e(ne,{isDialogVisible:a(C),"onUpdate:isDialogVisible":t[12]||(t[12]=o=>v(C)?C.value=o:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:le},null,8,["isDialogVisible"])])}}};export{pa as default};
