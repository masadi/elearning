import{r as n}from"./validators-BHkKs9Dp.js";import{r as m,o as h,h as y,w as e,a,u as i,l as D,b as f,p as F,g as w,f as S}from"./main-DU9EoqjC.js";import{_ as T}from"./AppTextField-BtZ6s5uj.js";import{$ as U}from"./api-DOKPi02l.js";import{V as B}from"./VCard-D9Cry3-P.js";import{V as C}from"./VForm-BR18QX3p.js";import{V as _}from"./VCardText-RWvda3lS.js";import{V as u,a as s}from"./VRow-DyuxuK6E.js";import{V as N}from"./VAutocomplete-DZftX7Fb.js";import{V as A}from"./VFileInput-CPWPTD7l.js";import{V as I}from"./VDialog-DyvuE7wz.js";const Q={__name:"AddPtkDialog",props:{sekolah:{type:Object,required:!0},isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(V,{emit:q}){const p=V,v=q;m("");const b=m(!1),k=m(),t=m({ptk_id:null,sekolah_id:p.sekolahId,nama:null,avatar:null,jabatan:null}),j=async()=>{var o;(o=k.value)==null||o.validate().then(async({valid:l})=>{if(l){const r=new FormData;r.append("data","ptk"),r.append("sekolah_id",t.value.sekolah_id??""),r.append("avatar",t.value.avatar??""),r.append("nama",t.value.nama??""),r.append("jabatan",t.value.jabatan??""),await U("/admin/konten/store",{method:"POST",body:r,onResponse({request:d,response:x,options:P}){let c=x._data;v("notif",c),g()}})}})},g=()=>{v("update:isDialogVisible",!1),t.value={ptk_id:null,sekolah_id:p.sekolahId,nama:null,jabatan:null,avatar:null}};return(o,l)=>{const r=T;return h(),y(I,{width:"500","model-value":p.isDialogVisible,"onUpdate:modelValue":g},{default:e(()=>[a(B,{title:"Tambah PTK"},{default:e(()=>[a(i(C),{ref_key:"refForm",ref:k,modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=d=>b.value=d),onSubmit:D(j,["prevent"])},{default:e(()=>[a(_,null,{default:e(()=>[a(u,null,{default:e(()=>[o.$can("create","laman-tentang-create")?F("",!0):(h(),y(s,{key:0,cols:"12"},{default:e(()=>[a(u,{"no-gutters":""},{default:e(()=>[a(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[5]||(l[5]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),a(s,{cols:"12",md:"9"},{default:e(()=>[a(N,{modelValue:t.value.sekolah_id,"onUpdate:modelValue":l[0]||(l[0]=d=>t.value.sekolah_id=d),variant:"outlined",items:V.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in o?o.requiredValidator:i(n)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),a(s,{cols:"12"},{default:e(()=>[a(u,{"no-gutters":""},{default:e(()=>[a(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[6]||(l[6]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama",-1)])),_:1}),a(s,{cols:"12",md:"9"},{default:e(()=>[a(r,{id:"nama",modelValue:t.value.nama,"onUpdate:modelValue":l[1]||(l[1]=d=>t.value.nama=d),rules:["requiredValidator"in o?o.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(s,{cols:"12"},{default:e(()=>[a(u,{"no-gutters":""},{default:e(()=>[a(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[7]||(l[7]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"jabatan"},"Jabatan",-1)])),_:1}),a(s,{cols:"12",md:"9"},{default:e(()=>[a(r,{id:"jabatan",modelValue:t.value.jabatan,"onUpdate:modelValue":l[2]||(l[2]=d=>t.value.jabatan=d),rules:["requiredValidator"in o?o.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(s,{cols:"12"},{default:e(()=>[a(u,{"no-gutters":""},{default:e(()=>[a(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[8]||(l[8]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"avatar"},"Foto",-1)])),_:1}),a(s,{cols:"12",md:"9"},{default:e(()=>[a(A,{accept:"image/*",modelValue:t.value.avatar,"onUpdate:modelValue":l[3]||(l[3]=d=>t.value.avatar=d),rules:["requiredValidator"in o?o.requiredValidator:i(n)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(_,{class:"d-flex justify-end"},{default:e(()=>[a(w,{type:"submit"},{default:e(()=>l[9]||(l[9]=[S(" Simpan ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}};export{Q as _};
