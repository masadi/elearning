import{a as ya}from"./formatters-DULOiX1-.js";import{V as da,a as ua,b as ma,_ as ka}from"./VToolbarItems-q08dzFdL.js";import{_ as wa}from"./ShowAlert-D9LhkAWt.js";import{r as G,c as Ca}from"./createUrl-BdTyDcJa.js";import{r as n,au as ia,w as X,o as x,f as M,e,b as a,m as l,a4 as C,a1 as Z,t as w,a2 as A,d as N,$,v as L,av as Ua,c as Y,F as pa,h as fa,q as na,aw as xa,Y as sa,y as qa,a as Fa}from"./main-BWJAXw3d.js";import{V as h,_ as aa}from"./VForm-DQqGHsht.js";import{_ as Ta}from"./DialogCloseBtn-DVVQwIUI.js";import{V as J}from"./VCard-DnzKtIP_.js";import{V as K}from"./VCardText-l-PrFWsu.js";import{V as ea,a as I}from"./VRow-CrIx3l9B.js";import{V as la}from"./VDialog-sW5BwDOO.js";import{$ as H}from"./api-DGntPLYC.js";import{V as ta}from"./VSpacer-kiH33onK.js";import{V as ra}from"./VAutocomplete-Bb3L4v2M.js";import{V as ja}from"./VChip-D-OZFI6u.js";import{a as Sa}from"./VList-BqFt91Q9.js";import{V as Aa,_ as $a,a as Pa}from"./VDataTableServer-DCgB5zQd.js";import{u as Ba}from"./useApi-qVBw5i1k.js";import{V as Ma}from"./VDivider-CEGjbK31.js";import{V as Ia}from"./VAvatar-02uT0YNx.js";import{V as Na}from"./VImg-B2d3AaZX.js";import"./VOverlay-fL6rfFeq.js";import"./forwardRefs-DWGaNmQL.js";import"./index-9rIf2CJL.js";import"./VTextField-B5haAvTI.js";/* empty css              */import"./dialog-transition-BNAAmzVr.js";import"./VMenu-AVpEIziT.js";import"./VCheckboxBtn-CQdgAQLM.js";const Ra={__name:"MapelEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilData:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(R,{emit:F}){const y=R,c=F,s=m=>{c("update:isDialogVisible",m)},V=n(structuredClone(ia(y.detilData)));X(y,()=>{V.value=structuredClone(ia(y.detilData))});const p=n(!1),_=n(),T=()=>{var m;(m=_.value)==null||m.validate().then(async({valid:r})=>{r&&c("submit",V.value)})};return(m,r)=>{const E=Ta,g=aa;return x(),M(la,{width:m.$vuetify.display.smAndDown?"auto":500,"model-value":y.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":s},{default:e(()=>[a(E,{onClick:r[0]||(r[0]=i=>s(!1))}),a(J,{title:"Edit Mata Pelajaran"},{default:e(()=>[a(K,null,{default:e(()=>[a(h,{ref_key:"refForm",ref:_,modelValue:l(p),"onUpdate:modelValue":r[3]||(r[3]=i=>C(p)?p.value=i:null),onSubmit:Z(T,["prevent"])},{default:e(()=>[a(ea,null,{default:e(()=>[a(I,{cols:"12"},{default:e(()=>[a(g,{id:"nama",modelValue:l(V).nama,"onUpdate:modelValue":r[1]||(r[1]=i=>l(V).nama=i),rules:["requiredValidator"in m?m.requiredValidator:l(G)]},{label:e(()=>r[4]||(r[4]=[w("Nama Mata Pelajaran")])),_:1},8,["modelValue","rules"])]),_:1}),a(I,{cols:"12"},{default:e(()=>[a(g,{id:"nik",modelValue:l(V).alias,"onUpdate:modelValue":r[2]||(r[2]=i=>l(V).alias=i),rules:["requiredValidator"in m?m.requiredValidator:l(G)]},{label:e(()=>r[5]||(r[5]=[w("Nama Alias")])),_:1},8,["modelValue","rules"])]),_:1}),a(I,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[a(A,{type:"submit"},{default:e(()=>r[6]||(r[6]=[w("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ea={__name:"MapelDetilDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilData:{type:Object,required:!0}},emits:["update:isDialogVisible","notif"],setup(R,{emit:F}){const y=R,c=F,s=n([{id:1,ptk_id:null,rombongan_belajar_id:null}]),V=n(),p=n(2),_=n(!1),T=n(),m=async()=>{var d;(d=T.value)==null||d.validate().then(async({valid:D})=>{if(D){const u=new FormData;u.append("data","pembelajaran"),u.append("mata_pelajaran_id",y.detilData.id),u.append("nama_mata_pelajaran",y.detilData.nama),s.value.forEach(j=>{u.append("ptk_id[]",j.ptk_id?j.ptk_id:""),u.append("rombongan_belajar_id[]",j.rombongan_belajar_id?j.rombongan_belajar_id:"")}),await H("/referensi/store",{method:"POST",body:u,onResponse({request:j,response:k,options:b}){let S=k._data;r(),c("notif",S)}})}})},r=()=>{c("update:isDialogVisible",!1),s.value=[{id:1,ptk_id:null,rombongan_belajar_id:null}],p.value=2},E=()=>{s.value.push({id:p.value+=p.value})},g=d=>{s.value.splice(d,1)},i=n([]),U=n([]),f=n(!0);X(y,async()=>{y.isDialogVisible&&(P("ptk"),P("rombel")),V.value=y.detilData.id});const P=async d=>{await H("/referensi",{query:{data:d},onResponse({request:D,response:u,options:j}){let k=u._data;d=="ptk"&&(i.value=k),d=="rombel"&&(U.value=k),f.value=!1}})};return(d,D)=>(x(),M(la,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":y.isDialogVisible,"onUpdate:modelValue":r},{default:e(()=>[a(J,null,{default:e(()=>[N("div",null,[a(da,{color:"primary"},{default:e(()=>[a(A,{icon:"",variant:"plain",onClick:r},{default:e(()=>[a($,{color:"white",icon:"tabler-x"})]),_:1}),a(ua,null,{default:e(()=>[w("Detil Mata Pelajaran "+L(R.detilData.nama),1)]),_:1}),a(ta),a(ma,null,{default:e(()=>[a(A,{variant:"text",onClick:E},{default:e(()=>[D[1]||(D[1]=w("Tambah Form ")),a($,{end:"",icon:"tabler-copy"})]),_:1}),a(A,{variant:"text",onClick:m},{default:e(()=>D[2]||(D[2]=[w("Simpan")])),_:1})]),_:1})]),_:1})]),a(K,null,{default:e(()=>[l(f)?(x(),M(Ua,{key:0,indeterminate:"",color:"warning",size:"150"})):(x(),M(l(h),{key:1,ref_key:"refForm",ref:T,modelValue:l(_),"onUpdate:modelValue":D[0]||(D[0]=u=>C(_)?_.value=u:null),onSubmit:Z(m,["prevent"])},{default:e(()=>[(x(!0),Y(pa,null,fa(l(s),(u,j)=>(x(),M(ea,{id:u.id,key:u.id},{default:e(()=>[a(I,{md:"5"},{default:e(()=>[a(ra,{chips:"",modelValue:u.ptk_id,"onUpdate:modelValue":k=>u.ptk_id=k,label:"Guru",variant:"outlined",items:l(i),"item-title":"nama","item-value":"ptk_id",placeholder:"== Pilih Guru ==",rules:["requiredValidator"in d?d.requiredValidator:l(G)]},{chip:e(({props:k,item:b})=>[a(ja,na({ref_for:!0},k,{"prepend-avatar":b.raw.avatar,text:b.raw.name}),null,16,["prepend-avatar","text"])]),item:e(({props:k,item:b})=>{var S,q,Q;return[a(Sa,na({ref_for:!0},k,{"prepend-avatar":(S=b==null?void 0:b.raw)==null?void 0:S.avatar,title:(q=b==null?void 0:b.raw)==null?void 0:q.nama,subtitle:(Q=b==null?void 0:b.raw)==null?void 0:Q.email}),null,16,["prepend-avatar","title","subtitle"])]}),_:2},1032,["modelValue","onUpdate:modelValue","items","rules"])]),_:2},1024),a(I,{md:"5"},{default:e(()=>[a(ra,{modelValue:u.rombongan_belajar_id,"onUpdate:modelValue":k=>u.rombongan_belajar_id=k,label:"Rombel",variant:"outlined",items:l(U),"item-title":"nama","item-value":"rombongan_belajar_id",placeholder:"== Pilih Rombel ==",rules:["requiredValidator"in d?d.requiredValidator:l(G)]},null,8,["modelValue","onUpdate:modelValue","items","rules"])]),_:2},1024),a(I,{md:"2"},{default:e(()=>[a(A,{block:"",color:"warning",onClick:k=>g(j)},{default:e(()=>[a($,{icon:"tabler-x"}),D[3]||(D[3]=w(" Hapus"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["modelValue"]))]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Oa={__name:"MapelAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(R,{emit:F}){const y=R,c=F,s=n([{id:1,mapel_id:null,nama:null,alias:null}]),V=n(2),p=n(!1),_=n(),T=async()=>{var g;(g=_.value)==null||g.validate().then(async({valid:i})=>{if(i){const U=new FormData;U.append("data","mapel"),s.value.forEach(f=>{U.append("nama[]",f.nama?f.nama:""),U.append("alias[]",f.alias?f.alias:"")}),await H("/referensi/store",{method:"POST",body:U,onResponse({request:f,response:P,options:d}){let D=P._data;m(),c("notif",D)}})}})},m=()=>{c("update:isDialogVisible",!1),s.value=[{id:1,mapel_id:null,nama:null,alias:null}],V.value=2},r=()=>{s.value.push({id:V.value+=V.value})},E=g=>{s.value.splice(g,1)};return(g,i)=>{const U=aa;return x(),M(la,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":y.isDialogVisible,"onUpdate:modelValue":m},{default:e(()=>[a(J,null,{default:e(()=>[N("div",null,[a(da,{color:"primary"},{default:e(()=>[a(A,{icon:"",variant:"plain",onClick:m},{default:e(()=>[a($,{color:"white",icon:"tabler-x"})]),_:1}),a(ua,null,{default:e(()=>i[1]||(i[1]=[w("Tambah Mata Pelajaran")])),_:1}),a(ta),a(ma,null,{default:e(()=>[a(A,{variant:"text",onClick:r},{default:e(()=>[i[2]||(i[2]=w("Tambah Form ")),a($,{end:"",icon:"tabler-copy"})]),_:1}),a(A,{variant:"text",onClick:T},{default:e(()=>i[3]||(i[3]=[w("Simpan")])),_:1})]),_:1})]),_:1})]),a(K,null,{default:e(()=>[a(l(h),{ref_key:"refForm",ref:_,modelValue:l(p),"onUpdate:modelValue":i[0]||(i[0]=f=>C(p)?p.value=f:null),onSubmit:Z(T,["prevent"])},{default:e(()=>[(x(!0),Y(pa,null,fa(l(s),(f,P)=>(x(),M(ea,{id:f.id,key:f.id},{default:e(()=>[a(I,{md:"8"},{default:e(()=>[a(U,{id:"nama",modelValue:f.nama,"onUpdate:modelValue":d=>f.nama=d,rules:["requiredValidator"in g?g.requiredValidator:l(G)]},{label:e(()=>i[4]||(i[4]=[w("Nama Mata Pelajaran")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),a(I,{md:"2"},{default:e(()=>[a(U,{id:"jenis_kelamin",modelValue:f.alias,"onUpdate:modelValue":d=>f.alias=d,rules:["requiredValidator"in g?g.requiredValidator:l(G)]},{label:e(()=>i[5]||(i[5]=[w("Nama Alias")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),a(I,{md:"2"},{default:e(()=>[a(A,{color:"warning",onClick:d=>E(P)},{default:e(()=>[a($,{icon:"tabler-x"}),i[6]||(i[6]=w(" Hapus"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},za={class:"d-flex gap-2 align-center"},La={class:"d-flex align-center flex-wrap gap-4"},Ga={class:"d-flex align-center gap-x-4"},Ha={key:1},Qa={class:"d-flex flex-column"},Ya={class:"text-base"},Ja={class:"text-sm"},Ce={__name:"mata-pelajaran",async setup(R){let F,y;const c=n({icon:null,title:null,text:null,color:null}),s=n(!1),V=n(""),p=n(10),_=n(1),T=n("id"),m=n("ASC"),r=v=>{var o,B;v.sortBy.length&&(T.value=(o=v.sortBy[0])==null?void 0:o.key,m.value=(B=v.sortBy[0])==null?void 0:B.order)},E=[{title:"id",key:"id",align:"center",sortable:!1},{title:"nama",key:"nama"},{title:"alias",key:"alias"},{title:"Actions",key:"actions",align:"center",sortable:!1}],g=v=>{c.value=v,s.value=!0},{data:i,execute:U}=([F,y]=xa(()=>Ba(Ca("/table",{query:{data:"mapel",q:V,itemsPerPage:p,page:_,sortBy:T,orderBy:m}}))),F=await F,y(),F);i.value.color&&(c.value=i.value,s.value=!0);const f=sa(()=>i.value.lists.data),P=sa(()=>i.value.lists.total),d=n(!1),D=n(),u=n(),j=async v=>{D.value=v,u.value=!0},k=async v=>{v&&await H(`/referensi/destroy/mapel/${D.value}`,{method:"DELETE",onResponse({request:o,response:B,options:O}){let z=B._data;c.value=z,s.value=!0,D.value=null,U()}})},b=n(!1),S=n(!1),q=n(),Q=async v=>{b.value=!0,q.value=v},va=async v=>{S.value=!0,q.value=v};X(s,()=>{s.value||U()});const ca=async v=>{console.log(v);const o=new FormData;o.append("data","update-mapel");for(const[B,O]of Object.entries(v))o.append(B,O||"");await H("/referensi/store",{method:"POST",body:o,onResponse({request:B,response:O,options:z}){let W=O._data;c.value=W,s.value=!0,S.value=!1}})};return(v,o)=>{const B=$a,O=aa,z=Fa("IconBtn"),W=Pa,ba=Oa,Va=Ea,_a=Ra,ga=wa,Da=ka;return x(),Y("section",null,[a(J,null,{default:e(()=>[a(K,{class:"d-flex flex-wrap gap-4"},{default:e(()=>[N("div",za,[a(B,{"model-value":l(p),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=parseInt(t,10))},null,8,["model-value"])]),a(ta),N("div",La,[a(O,{modelValue:l(V),"onUpdate:modelValue":o[1]||(o[1]=t=>C(V)?V.value=t:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),a(A,{onClick:o[2]||(o[2]=t=>d.value=!0)},{default:e(()=>[o[13]||(o[13]=w("Tambah ")),a($,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),a(Ma),a(Aa,{"items-per-page":l(p),"onUpdate:itemsPerPage":o[4]||(o[4]=t=>C(p)?p.value=t:null),page:l(_),"onUpdate:page":o[5]||(o[5]=t=>C(_)?_.value=t:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(f),"items-length":l(P),headers:E,class:"text-no-wrap","onUpdate:options":r},{"item.user":e(({item:t})=>[N("div",Ga,[a(Ia,{size:"34",variant:t.avatar?void 0:"tonal",color:t.avatar?void 0:"success"},{default:e(()=>[t.avatar?(x(),M(Na,{key:0,src:t.avatar},null,8,["src"])):(x(),Y("span",Ha,L(("avatarText"in v?v.avatarText:l(ya))(t.name)),1))]),_:2},1032,["variant","color"]),N("div",Qa,[N("h6",Ya,L(t.nama),1),N("div",Ja,L(t.email),1)])])]),"item.ttl":e(({item:t})=>[w(L(t.tempat_lahir)+", "+L(new Date(t.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)]),"item.actions":e(({item:t})=>[a(z,{onClick:oa=>j(t.id)},{default:e(()=>[a($,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(z,{onClick:oa=>Q(t)},{default:e(()=>[a($,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),a(z,{onClick:oa=>va(t)},{default:e(()=>[a($,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:e(()=>[a(W,{page:l(_),"onUpdate:page":o[3]||(o[3]=t=>C(_)?_.value=t:null),"items-per-page":l(p),"total-items":l(P)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),a(ba,{"is-dialog-visible":l(d),"onUpdate:isDialogVisible":o[6]||(o[6]=t=>C(d)?d.value=t:null),onNotif:g},null,8,["is-dialog-visible"]),a(Va,{"is-dialog-visible":l(b),"onUpdate:isDialogVisible":o[7]||(o[7]=t=>C(b)?b.value=t:null),onNotif:g,"detil-data":l(q),"onUpdate:detilData":o[8]||(o[8]=t=>C(q)?q.value=t:null)},null,8,["is-dialog-visible","detil-data"]),a(_a,{"is-dialog-visible":l(S),"onUpdate:isDialogVisible":o[9]||(o[9]=t=>C(S)?S.value=t:null),"detil-data":l(q),"onUpdate:detilData":o[10]||(o[10]=t=>C(q)?q.value=t:null),onSubmit:ca},null,8,["is-dialog-visible","detil-data"]),l(c).color?(x(),M(ga,{key:0,color:l(c).color,icon:l(c).icon,title:l(c).title,text:l(c).text,"disable-time-out":!1,isSnackbarVisible:l(s),"onUpdate:isSnackbarVisible":o[11]||(o[11]=t=>C(s)?s.value=t:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):qa("",!0),a(Da,{isDialogVisible:l(u),"onUpdate:isDialogVisible":o[12]||(o[12]=t=>C(u)?u.value=t:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:k},null,8,["isDialogVisible"])])}}};export{Ce as default};
