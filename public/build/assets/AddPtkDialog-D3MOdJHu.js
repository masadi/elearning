import{r as m}from"./validators-BHkKs9Dp.js";import{r as p,j as w,o as _,f as h,w as e,a,u as r,k as F,b as f,p as U,g as c,e as S}from"./main-BT-OS6iM.js";import{_ as N}from"./AppTextField-DAxEL5uV.js";import{$ as T}from"./api-BtgK7rdK.js";import{V as B}from"./VCard-l7_DOe_v.js";import{V as C}from"./VForm-CJVdPd5_.js";import{V as y}from"./VCardText-C95oTwf9.js";import{V as n,a as o}from"./VRow-C97WihuD.js";import{V as A}from"./VAutocomplete-DcNf7OLC.js";import{V as I}from"./VFileInput-DTlcGTgn.js";import{V as P}from"./VDialog-C-kiqcYp.js";const W={__name:"AddPtkDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},sekolahId:{type:String,required:!1,default:null},detilData:{type:Object,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(V,{emit:D}){const i=V,v=D,b=p(!1),k=p(),t=p({ptk_id:null,sekolah_id:i.sekolahId,nama:null,avatar:null,jabatan:null,urut:0}),q=async()=>{var d;(d=k.value)==null||d.validate().then(async({valid:l})=>{if(l){const u=new FormData;u.append("data","ptk"),u.append("ptk_id",t.value.ptk_id??""),u.append("sekolah_id",t.value.sekolah_id??""),u.append("nama",t.value.nama??""),u.append("jabatan",t.value.jabatan??""),u.append("urut",t.value.urut??""),u.append("avatar",t.value.avatar??""),await T("/admin/konten/store",{method:"POST",body:u,onResponse({request:s,response:j,options:$}){let x=j._data;v("notif",x),g()}})}})},g=()=>{v("update:isDialogVisible",!1),t.value={ptk_id:null,sekolah_id:i.sekolahId,nama:null,jabatan:null,avatar:null,urut:0}};return w(i,async()=>{i.isDialogVisible&&i.detilData&&(t.value={ptk_id:i.detilData.ptk_id,sekolah_id:i.detilData.sekolah_id,nama:i.detilData.nama,jabatan:i.detilData.jabatan,avatar:null,urut:i.detilData.urut})}),(d,l)=>{const u=N;return _(),h(P,{width:"500","model-value":i.isDialogVisible,"onUpdate:modelValue":g},{default:e(()=>[a(B,{title:"Tambah PTK"},{default:e(()=>[a(r(C),{ref_key:"refForm",ref:k,modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=s=>b.value=s),onSubmit:F(q,["prevent"])},{default:e(()=>[a(y,null,{default:e(()=>[a(n,null,{default:e(()=>[d.$can("create","laman-tentang-create")?U("",!0):(_(),h(o,{key:0,cols:"12"},{default:e(()=>[a(n,{"no-gutters":""},{default:e(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[6]||(l[6]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:e(()=>[a(A,{modelValue:t.value.sekolah_id,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.sekolah_id=s),variant:"outlined",items:V.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in d?d.requiredValidator:r(m)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),a(o,{cols:"12"},{default:e(()=>[a(n,{"no-gutters":""},{default:e(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[7]||(l[7]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:e(()=>[a(u,{id:"nama",modelValue:t.value.nama,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.nama=s),rules:["requiredValidator"in d?d.requiredValidator:r(m)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:e(()=>[a(n,{"no-gutters":""},{default:e(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[8]||(l[8]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"jabatan"},"Jabatan",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:e(()=>[a(u,{id:"jabatan",modelValue:t.value.jabatan,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.jabatan=s),rules:["requiredValidator"in d?d.requiredValidator:r(m)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:e(()=>[a(n,{"no-gutters":""},{default:e(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[9]||(l[9]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"urut"},"Nomor Urut",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:e(()=>[a(u,{id:"urut",modelValue:t.value.urut,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.urut=s),rules:["requiredValidator"in d?d.requiredValidator:r(m)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:e(()=>[a(n,{"no-gutters":""},{default:e(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:e(()=>l[10]||(l[10]=[f("label",{class:"v-label text-body-2 text-high-emphasis",for:"avatar"},"Foto",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:e(()=>[a(I,{accept:"image/*",modelValue:t.value.avatar,"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.avatar=s),rules:["requiredValidator"in d?d.requiredValidator:r(m)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(y,{class:"d-flex justify-end"},{default:e(()=>[a(c,{type:"submit"},{default:e(()=>l[11]||(l[11]=[S(" Simpan ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}};export{W as _};
