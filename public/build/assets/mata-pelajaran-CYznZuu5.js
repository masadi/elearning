import{_ as de}from"./ConfirmDialog-Tn3I-RV8.js";import{_ as me}from"./ShowAlert-Crhw45kN.js";import{r as E}from"./validators-BHkKs9Dp.js";import{r as s,h as G,j as K,o as T,f as I,w as a,a as e,u as t,i as g,k as W,e as b,g as F,b as O,l as $,c as X,F as pe,d as fe,m as ve,n as J,p as Ve,q as ce}from"./main-BOi3BIW1.js";import{_ as z}from"./AppTextField-CkipoKMD.js";import{_ as ge}from"./DialogCloseBtn-CWbnsSPr.js";import{V as H}from"./VCard-BsxPU2or.js";import{V as Q}from"./VCardText-BtPwo1mS.js";import{V as Y}from"./VForm-BPF3XLYv.js";import{V as Z,a as S}from"./VRow-DExjJUWN.js";import{V as h}from"./VDialog-BJYfLZfz.js";import{$ as L}from"./api-D8raZm_J.js";import{V as be,a as _e}from"./VToolbar-CcUghtWi.js";import{V as ee}from"./VSpacer-DBiLwPOJ.js";import{V as De}from"./VToolbarItems-CHw0rVy_.js";import{V as ye,_ as ke}from"./VDataTableServer-J8lwASIv.js";import{_ as Ce}from"./AppSelect-BvjMTD9Y.js";import{u as we}from"./useApi-CHXvmuUd.js";import{c as Ue}from"./createUrl-Cm60FE_Q.js";import{V as Ae}from"./VDivider-B06OBMyi.js";import"./VOverlay-bOV7N2Sq.js";import"./forwardRefs-D3j0TLhE.js";import"./VImg-B2SqCbwD.js";import"./VInput-u888SdWy.js";import"./VTextField-CnSWxS1r.js";import"./VAvatar-DBL2rIYL.js";/* empty css              */import"./dialog-transition-18JHODqx.js";import"./index-BxkgbwWS.js";import"./VCheckboxBtn-CwSHgSnK.js";import"./VSelectionControl-DLPwGM7h.js";import"./VChip-OBybeT-t.js";import"./VList-yTRHr5Kb.js";import"./ssrBoot-B1UlT3gE.js";import"./VMenu-DNeMfofa.js";const qe={__name:"MapelEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilData:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(j,{emit:C}){const _=j,p=C,f=m=>{p("update:isDialogVisible",m)},u=s(structuredClone(G(_.detilData)));K(_,()=>{u.value=structuredClone(G(_.detilData))});const v=s(!1),c=s(),U=()=>{var m;(m=c.value)==null||m.validate().then(async({valid:i})=>{i&&p("submit",u.value)})};return(m,i)=>{const B=ge,q=z;return T(),I(h,{width:m.$vuetify.display.smAndDown?"auto":500,"model-value":_.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":f},{default:a(()=>[e(B,{onClick:i[0]||(i[0]=n=>f(!1))}),e(H,{title:"Edit Mata Pelajaran"},{default:a(()=>[e(Q,null,{default:a(()=>[e(Y,{ref_key:"refForm",ref:c,modelValue:t(v),"onUpdate:modelValue":i[3]||(i[3]=n=>g(v)?v.value=n:null),onSubmit:W(U,["prevent"])},{default:a(()=>[e(Z,null,{default:a(()=>[e(S,{cols:"12"},{default:a(()=>[e(q,{id:"nama",modelValue:t(u).nama,"onUpdate:modelValue":i[1]||(i[1]=n=>t(u).nama=n),rules:["requiredValidator"in m?m.requiredValidator:t(E)]},{label:a(()=>i[4]||(i[4]=[b("Nama Mata Pelajaran")])),_:1},8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:a(()=>[e(q,{id:"nik",modelValue:t(u).alias,"onUpdate:modelValue":i[2]||(i[2]=n=>t(u).alias=n),rules:["requiredValidator"in m?m.requiredValidator:t(E)]},{label:a(()=>i[5]||(i[5]=[b("Nama Alias")])),_:1},8,["modelValue","rules"])]),_:1}),e(S,{cols:"12",class:"d-flex gap-4"},{default:a(()=>[e(F,{type:"submit"},{default:a(()=>i[6]||(i[6]=[b("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},xe={__name:"MapelAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(j,{emit:C}){const _=j,p=s(!1),f=C,u=s([{id:1,mapel_id:null,nama:null,alias:null}]),v=s(2),c=s(!1),U=s(),m=async()=>{var n;(n=U.value)==null||n.validate().then(async({valid:r})=>{if(r){p.value=!0;const D=new FormData;D.append("data","mapel"),u.value.forEach(d=>{D.append("nama[]",d.nama?d.nama:""),D.append("alias[]",d.alias?d.alias:"")}),await L("/referensi/store",{method:"POST",body:D,onResponse({request:d,response:w,options:y}){let x=w._data;i(),f("notif",x)}})}})},i=()=>{f("update:isDialogVisible",!1),p.value=!1,u.value=[{id:1,mapel_id:null,nama:null,alias:null}],v.value=2},B=()=>{u.value.push({id:v.value+=v.value})},q=n=>{u.value.splice(n,1)};return(n,r)=>{const D=z;return T(),I(h,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":_.isDialogVisible,"onUpdate:modelValue":i},{default:a(()=>[e(H,null,{default:a(()=>[O("div",null,[e(be,{color:"primary"},{default:a(()=>[e(F,{icon:"",variant:"plain",onClick:i},{default:a(()=>[e($,{color:"white",icon:"tabler-x"})]),_:1}),e(_e,null,{default:a(()=>r[1]||(r[1]=[b("Tambah Mata Pelajaran")])),_:1}),e(ee),e(De,null,{default:a(()=>[e(F,{variant:"text",onClick:B},{default:a(()=>[r[2]||(r[2]=b("Tambah Form ")),e($,{end:"",icon:"tabler-copy"})]),_:1}),e(F,{variant:"text",onClick:m},{default:a(()=>r[3]||(r[3]=[b("Simpan")])),_:1})]),_:1})]),_:1})]),e(Q,null,{default:a(()=>[e(t(Y),{ref_key:"refForm",ref:U,modelValue:t(c),"onUpdate:modelValue":r[0]||(r[0]=d=>g(c)?c.value=d:null),onSubmit:W(m,["prevent"])},{default:a(()=>[(T(!0),X(pe,null,fe(t(u),(d,w)=>(T(),I(Z,{id:d.id,key:d.id},{default:a(()=>[e(S,{md:"8"},{default:a(()=>[e(D,{id:"nama",modelValue:d.nama,"onUpdate:modelValue":y=>d.nama=y,rules:["requiredValidator"in n?n.requiredValidator:t(E)]},{label:a(()=>r[4]||(r[4]=[b("Nama Mata Pelajaran")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(S,{md:"2"},{default:a(()=>[e(D,{id:"jenis_kelamin",modelValue:d.alias,"onUpdate:modelValue":y=>d.alias=y,rules:["requiredValidator"in n?n.requiredValidator:t(E)]},{label:a(()=>r[5]||(r[5]=[b("Nama Alias")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(S,{md:"2"},{default:a(()=>[e(F,{color:"warning",onClick:y=>q(w)},{default:a(()=>[e($,{icon:"tabler-x"}),r[6]||(r[6]=b(" Hapus "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Fe={class:"d-flex gap-2 align-center"},Te={class:"d-flex align-center flex-wrap gap-4"},pa={__name:"mata-pelajaran",async setup(j){let C,_;const p=s({icon:null,title:null,text:null,color:null}),f=s(!1),u=s(""),v=s(10),c=s(1),U=s("id"),m=s("ASC"),i=V=>{var l,k;V.sortBy.length&&(U.value=(l=V.sortBy[0])==null?void 0:l.key,m.value=(k=V.sortBy[0])==null?void 0:k.order)},B=[{title:"id",key:"id",align:"center",sortable:!1},{title:"nama",key:"nama"},{title:"alias",key:"alias"},{title:"Actions",key:"actions",align:"center",sortable:!1}],q=V=>{p.value=V,f.value=!0},{data:n,execute:r}=([C,_]=ve(()=>we(Ue("/table",{query:{data:"mapel",q:u,itemsPerPage:v,page:c,sortBy:U,orderBy:m}}))),C=await C,_(),C);n.value.color&&(p.value=n.value,f.value=!0);const D=J(()=>n.value.lists.data),d=J(()=>n.value.lists.total),w=s(!1),y=s(),x=s(),ae=async V=>{y.value=V,x.value=!0},le=async V=>{V&&await L(`/referensi/destroy/mapel/${y.value}`,{method:"DELETE",onResponse({request:l,response:k,options:A}){let N=k._data;p.value=N,f.value=!0,y.value=null,r()}})},P=s(!1),M=s(),te=async V=>{P.value=!0,M.value=V};K(f,()=>{f.value||r()});const oe=async V=>{console.log(V);const l=new FormData;l.append("data","update-mapel");for(const[k,A]of Object.entries(V))l.append(k,A||"");await L("/referensi/store",{method:"POST",body:l,onResponse({request:k,response:A,options:N}){let R=A._data;p.value=R,f.value=!0,P.value=!1}})};return(V,l)=>{const k=Ce,A=z,N=ce("IconBtn"),R=ke,ie=xe,ne=qe,se=me,re=de;return T(),X("section",null,[e(H,null,{default:a(()=>[e(Q,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[O("div",Fe,[e(k,{"model-value":t(v),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=o=>v.value=parseInt(o,10))},null,8,["model-value"])]),e(ee),O("div",Te,[e(A,{modelValue:t(u),"onUpdate:modelValue":l[1]||(l[1]=o=>g(u)?u.value=o:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(F,{onClick:l[2]||(l[2]=o=>w.value=!0)},{default:a(()=>[l[11]||(l[11]=b("Tambah ")),e($,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(Ae),e(ye,{"items-per-page":t(v),"onUpdate:itemsPerPage":l[4]||(l[4]=o=>g(v)?v.value=o:null),page:t(c),"onUpdate:page":l[5]||(l[5]=o=>g(c)?c.value=o:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:t(D),"items-length":t(d),headers:B,class:"text-no-wrap","onUpdate:options":i},{"item.actions":a(({item:o})=>[e(N,{onClick:ue=>ae(o.id)},{default:a(()=>[e($,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(N,{onClick:ue=>te(o)},{default:a(()=>[e($,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:a(()=>[e(R,{page:t(c),"onUpdate:page":l[3]||(l[3]=o=>g(c)?c.value=o:null),"items-per-page":t(v),"total-items":t(d)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ie,{"is-dialog-visible":t(w),"onUpdate:isDialogVisible":l[6]||(l[6]=o=>g(w)?w.value=o:null),onNotif:q},null,8,["is-dialog-visible"]),e(ne,{"is-dialog-visible":t(P),"onUpdate:isDialogVisible":l[7]||(l[7]=o=>g(P)?P.value=o:null),"detil-data":t(M),"onUpdate:detilData":l[8]||(l[8]=o=>g(M)?M.value=o:null),onSubmit:oe},null,8,["is-dialog-visible","detil-data"]),t(p).color?(T(),I(se,{key:0,color:t(p).color,icon:t(p).icon,title:t(p).title,text:t(p).text,"disable-time-out":!1,isSnackbarVisible:t(f),"onUpdate:isSnackbarVisible":l[9]||(l[9]=o=>g(f)?f.value=o:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):Ve("",!0),e(re,{isDialogVisible:t(x),"onUpdate:isDialogVisible":l[10]||(l[10]=o=>g(x)?x.value=o:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:le},null,8,["isDialogVisible"])])}}};export{pa as default};
