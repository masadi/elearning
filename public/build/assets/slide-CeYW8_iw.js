import{_ as te}from"./ConfirmDialog-B2A2Lgto.js";import{_ as ae}from"./ShowAlert-CsNMQtQV.js";import{r as G}from"./validators-BHkKs9Dp.js";import{r as n,o as w,f as E,w as o,a as e,u as l,i as p,k as le,b as U,p as M,g as Q,e as R,m as oe,n as S,j as ie,c as se,q as ne,l as L,t as re}from"./main-DW5VCC58.js";import{_ as me}from"./DialogCloseBtn-Bh_bfbtq.js";import{$ as H}from"./api-CBRIaEF6.js";import{V as J}from"./VCard-CuZfBHUC.js";import{V as de}from"./VForm-C7hd0Hig.js";import{V as j}from"./VCardText-DYlNs-5b.js";import{V as F,a as h}from"./VRow-DP0F4OAf.js";import{V as ue}from"./VAutocomplete-BlRWeaW4.js";import{V as pe}from"./VFileInput-sWK_3XWR.js";import{V as fe}from"./VDialog-BUNE5qoM.js";import{V as ge,_ as ce}from"./VDataTableServer-C7-8KsRy.js";import{_ as ve}from"./AppTextField-B1-hJZbi.js";import{_ as Ve}from"./AppSelect-eDGR-LH7.js";import{u as ke}from"./useApi-C8gPxuF8.js";import{c as be}from"./createUrl-PcBekDPf.js";import{V as _e}from"./VSpacer-CHPoLg1n.js";import{V as ye}from"./VDivider-mCBUrhL5.js";import{V as he}from"./VImg-BFht51fA.js";import"./VOverlay-DRtT-Rzv.js";import"./forwardRefs-D9kYFWgq.js";import"./index-BxkgbwWS.js";import"./VAvatar-XUhoRa9A.js";import"./VInput-DKZRgHWi.js";/* empty css              */import"./VTextField-BnBMykLd.js";import"./VList-u4Y2U10_.js";import"./ssrBoot-BDjid1kv.js";import"./VMenu-CsSG_iKb.js";import"./dialog-transition-DqsQIbqL.js";import"./VCheckboxBtn-D5pqMqc3.js";import"./VSelectionControl-C9AcoZtZ.js";import"./VChip-CNkFK8YP.js";const De={__name:"AddSlideDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},kontenType:{type:String,required:!0},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(C,{emit:b}){const g=C,r=b,i=n({sekolah_id:g.sekolahId,gambar:null,data:g.kontenType}),c=n(!1),m=n(),f=async()=>{var d;(d=m.value)==null||d.validate().then(async({valid:s})=>{if(s){const v=new FormData;v.append("data",i.value.data??""),v.append("sekolah_id",i.value.sekolah_id??""),v.append("gambar",i.value.gambar??""),await H("/admin/konten/store",{method:"POST",body:v,onResponse({request:V,response:k,options:A}){let q=k._data;r("notif",q),_()}})}})},_=()=>{r("update:isDialogVisible",!1),i.value={sekolah_id:g.sekolahId,gambar:null,data:g.kontenType},m.value.resetValidation()};return(d,s)=>{const v=me;return w(),E(fe,{width:"500","model-value":g.isDialogVisible,"onUpdate:modelValue":_},{default:o(()=>[e(v,{onClick:_}),e(J,{title:"Upload Slide"},{default:o(()=>[e(l(de),{ref_key:"refForm",ref:m,modelValue:l(c),"onUpdate:modelValue":s[2]||(s[2]=V=>p(c)?c.value=V:null),onSubmit:le(f,["prevent"])},{default:o(()=>[e(j,null,{default:o(()=>[e(F,null,{default:o(()=>[d.$can("create","laman-tentang-create")?M("",!0):(w(),E(h,{key:0,cols:"12"},{default:o(()=>[e(F,{"no-gutters":""},{default:o(()=>[e(h,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>s[3]||(s[3]=[U("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(h,{cols:"12",md:"9"},{default:o(()=>[e(ue,{modelValue:l(i).sekolah_id,"onUpdate:modelValue":s[0]||(s[0]=V=>l(i).sekolah_id=V),variant:"outlined",items:C.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in d?d.requiredValidator:l(G)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),e(h,{cols:"12"},{default:o(()=>[e(F,{"no-gutters":""},{default:o(()=>[e(h,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>s[4]||(s[4]=[U("label",{class:"v-label text-body-2 text-high-emphasis",for:"gambar"},"Gambar",-1)])),_:1}),e(h,{cols:"12",md:"9"},{default:o(()=>[e(pe,{accept:"image/*",modelValue:l(i).gambar,"onUpdate:modelValue":s[1]||(s[1]=V=>l(i).gambar=V),rules:["requiredValidator"in d?d.requiredValidator:l(G)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{class:"d-flex justify-end"},{default:o(()=>[e(Q,{type:"submit"},{default:o(()=>s[5]||(s[5]=[R(" Simpan ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}},xe={class:"d-flex gap-2 align-center"},Se={class:"d-flex align-center flex-wrap gap-4"},N="slide",nt={__name:"slide",async setup(C){let b,g;const r=n({icon:null,title:null,text:null,color:null}),i=n(!1),c=n(""),m=n(10),f=n(1),_=n("created_at"),d=n("DESC"),s=u=>{var t,y;u.sortBy.length&&(_.value=(t=u.sortBy[0])==null?void 0:t.key,d.value=(y=u.sortBy[0])==null?void 0:y.order)},v=[{title:"sekolah",key:"sekolah",sortable:!1},{title:"gambar",key:"gambar",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],V=u=>{r.value=u,i.value=!0},{data:k,execute:A}=([b,g]=oe(()=>ke(be("/table",{query:{data:N,q:c,itemsPerPage:m,page:f,sortBy:_,orderBy:d}}))),b=await b,g(),b);k.value.color&&(r.value=k.value,i.value=!0);const q=S(()=>k.value.lists.data),z=S(()=>k.value.lists.total),$=S(()=>k.value.sekolah),B=S(()=>k.value.sekolah_id),D=n(!1),I=n(),x=n(),K=async u=>{I.value=u,x.value=!0},W=async u=>{u&&await H(`/admin/konten/destroy/slide/${I.value}`,{method:"DELETE",onResponse({request:t,response:y,options:O}){let T=y._data;r.value=T,i.value=!0,I.value=null,A()}})};return ie(i,()=>{i.value||A()}),(u,t)=>{const y=Ve,O=ve,T=ne("IconBtn"),X=ce,Y=De,Z=ae,ee=te;return w(),se("section",null,[e(J,null,{default:o(()=>[e(j,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[U("div",xe,[e(y,{"model-value":l(m),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=parseInt(a,10))},null,8,["model-value"])]),e(_e),U("div",Se,[e(O,{modelValue:l(c),"onUpdate:modelValue":t[1]||(t[1]=a=>p(c)?c.value=a:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(Q,{onClick:t[2]||(t[2]=a=>D.value=!0)},{default:o(()=>[t[12]||(t[12]=R("Tambah ")),e(L,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(ye),e(ge,{"items-per-page":l(m),"onUpdate:itemsPerPage":t[4]||(t[4]=a=>p(m)?m.value=a:null),page:l(f),"onUpdate:page":t[5]||(t[5]=a=>p(f)?f.value=a:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(q),"items-length":l(z),headers:v,class:"text-no-wrap","onUpdate:options":s},{"item.sekolah":o(({item:a})=>{var P;return[R(re(((P=a.sekolah)==null?void 0:P.nama)??"-"),1)]}),"item.gambar":o(({item:a})=>[e(he,{fluid:"",src:`/storage/images/${a.gambar}`,"max-width":"200","max-height":"100"},null,8,["src"])]),"item.actions":o(({item:a})=>[e(T,{onClick:P=>K(a.id)},{default:o(()=>[e(L,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:o(()=>[e(X,{page:l(f),"onUpdate:page":t[3]||(t[3]=a=>p(f)?f.value=a:null),"items-per-page":l(m),"total-items":l(z)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(Y,{"is-dialog-visible":l(D),"onUpdate:isDialogVisible":t[6]||(t[6]=a=>p(D)?D.value=a:null),sekolah:l($),"onUpdate:sekolah":t[7]||(t[7]=a=>p($)?$.value=a:null),sekolahId:l(B),"onUpdate:sekolahId":t[8]||(t[8]=a=>p(B)?B.value=a:null),"konten-type":N,"onUpdate:kontenType":t[9]||(t[9]=a=>N=a),onNotif:V},null,8,["is-dialog-visible","sekolah","sekolahId"]),l(r).color?(w(),E(Z,{key:0,color:l(r).color,icon:l(r).icon,title:l(r).title,text:l(r).text,"disable-time-out":!1,isSnackbarVisible:l(i),"onUpdate:isSnackbarVisible":t[10]||(t[10]=a=>p(i)?i.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):M("",!0),e(ee,{isDialogVisible:l(x),"onUpdate:isDialogVisible":t[11]||(t[11]=a=>p(x)?x.value=a:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:W},null,8,["isDialogVisible"])])}}};export{nt as default};
