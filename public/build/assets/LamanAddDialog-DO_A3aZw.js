import{r as f}from"./validators-BHkKs9Dp.js";import{r as g,h as F,o as b,f as D,w as a,a as e,b as u,V as T,k as C,e as q,t as _,u as o,i as B,j as U,n as x,c as I,F as N}from"./main-Bps8TZ9u.js";import{_ as A}from"./AppTextField-RSHyIVyd.js";import{Q as R}from"./vue-quill.snow-DUAelY40.js";import{$}from"./api-6WmH9GV3.js";import{V as E}from"./VCard-Br9k22TE.js";import{V as j,a as L}from"./VToolbar-Ddhe4oqd.js";import{V as O}from"./VSpacer-m8AM3EPK.js";import{V as P}from"./VToolbarItems-YWvmmP_f.js";import{V as Q}from"./VCardText-C_ZjoA3w.js";import{V as z}from"./VForm-BW2Nl4Ab.js";import{V as p,a as n}from"./VRow-DfDXtWJg.js";import{V as G}from"./VAutocomplete-BeJYdzrD.js";import{V as M}from"./VFileInput-D6l1vahI.js";import{V as H}from"./VDialog-9xShiCo5.js";const J={class:"text-capitalize"},me={__name:"LamanAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},pageType:{type:String,required:!0},detilData:{type:Object,required:!1,default:null},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(m,{emit:S}){const i=m,y=S,V=g(!1),k=g(),t=g({id:"",sekolah_id:i.sekolahId,type:i.pageType,content:null,foto:null,nama:null}),v=async()=>{var s;(s=k.value)==null||s.validate().then(async({valid:l})=>{if(l){const r=new FormData;r.append("id",t.value.id),r.append("sekolah_id",t.value.sekolah_id),r.append("type",t.value.type),r.append("content",t.value.content),r.append("foto",t.value.foto),r.append("nama",t.value.nama),await $("/admin/laman/store",{method:"POST",body:r,onResponse({request:d,response:w,options:K}){let h=w._data;console.log(h),console.log(r),c(),y("notif",h)}})}})},c=()=>{y("update:isDialogVisible",!1),t.value={id:"",sekolah_id:null,type:i.pageType,content:null,foto:null,nama:null}};return F(i,async()=>{i.isDialogVisible&&i.detilData&&(t.value={id:i.detilData.id,sekolah_id:i.detilData.sekolah_id,type:i.pageType,content:i.pageType=="program"?i.detilData.deskripsi:i.detilData.content,foto:null,nama:i.detilData.nama})}),(s,l)=>{const r=A;return b(),D(H,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":i.isDialogVisible,"onUpdate:modelValue":c},{default:a(()=>[e(E,null,{default:a(()=>[u("div",null,[e(j,{color:"primary"},{default:a(()=>[e(T,{icon:"",variant:"plain",onClick:c},{default:a(()=>[e(C,{color:"white",icon:"tabler-x"})]),_:1}),e(L,null,{default:a(()=>[q(_(m.detilData?"Edit":"Tambah")+" Laman ",1),u("span",J,_(m.pageType),1)]),_:1}),e(O),e(P,null,{default:a(()=>[e(T,{variant:"text",onClick:v},{default:a(()=>l[5]||(l[5]=[q("Simpan")])),_:1})]),_:1})]),_:1})]),e(Q,null,{default:a(()=>[e(o(z),{ref_key:"refForm",ref:k,modelValue:o(V),"onUpdate:modelValue":l[4]||(l[4]=d=>B(V)?V.value=d:null),onSubmit:U(v,["prevent"])},{default:a(()=>[e(p,null,{default:a(()=>[s.$can("create","laman-tentang-create")?x("",!0):(b(),D(n,{key:0,cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[6]||(l[6]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(G,{modelValue:o(t).sekolah_id,"onUpdate:modelValue":l[0]||(l[0]=d=>o(t).sekolah_id=d),variant:"outlined",items:m.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),m.pageType=="program"?(b(),I(N,{key:1},[e(n,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[7]||(l[7]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(r,{id:"nama",modelValue:o(t).nama,"onUpdate:modelValue":l[1]||(l[1]=d=>o(t).nama=d),rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(n,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[8]||(l[8]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"foto"},"Gambar",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(M,{accept:"image/*",modelValue:o(t).foto,"onUpdate:modelValue":l[2]||(l[2]=d=>o(t).foto=d),rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})],64)):x("",!0),e(n,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(n,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[9]||(l[9]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"content"},"Deskripsi",-1)])),_:1}),e(n,{cols:"12",md:"9"},{default:a(()=>[e(o(R),{theme:"snow",toolbar:"full",content:o(t).content,"onUpdate:content":l[3]||(l[3]=d=>o(t).content=d),contentType:"html",rules:["requiredValidator"in s?s.requiredValidator:o(f)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{me as _};
