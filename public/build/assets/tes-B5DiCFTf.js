import{_ as pe}from"./ConfirmDialog-Bs3oWyL0.js";import{_ as me}from"./ShowAlert-CKivWfms.js";import{r as x}from"./validators-BHkKs9Dp.js";import{r as d,j as K,o as w,f as M,w as l,a as e,b as _,g as z,l as E,e as T,t as J,u as a,i as b,k as be,p as W,c as O,F as fe,d as ce,m as ve,n as A,q as ke}from"./main-DvRLx4Ig.js";import{_ as X}from"./AppSelect-CdmCODd8.js";import{Q as H}from"./vue-quill.esm-bundler-BtWvKdos.js";/* empty css                       */import{$ as Y}from"./api-UL3iJM2A.js";import{V as Z}from"./VCard-iCYjdUP9.js";import{V as Ve,a as _e}from"./VToolbar-YZrYFidv.js";import{V as ee}from"./VSpacer-CgmCCiSR.js";import{V as ge}from"./VToolbarItems-DpthHilM.js";import{V as ye}from"./VForm-CwZEEFWs.js";import{V as ae}from"./VCardText-DAL9ICqB.js";import{V as D,a as m}from"./VRow-DDxWiGdz.js";import{V as G}from"./VAutocomplete-biOO0CQB.js";import{V as je}from"./VDialog-BPESWjhC.js";import{V as De,_ as we}from"./VDataTableServer-D48BRQkP.js";import{_ as he}from"./AppTextField-lbZ9f4rW.js";import{u as Ce}from"./useApi-BLTIwBuO.js";import{c as Ue}from"./createUrl-DNGgqCF6.js";import{V as qe}from"./VDivider-c0zZR8ME.js";import"./VOverlay-DhYNcnby.js";import"./forwardRefs-D3j0TLhE.js";import"./VImg-Dj9O1LRE.js";import"./VInput-CbA2tey_.js";import"./VTextField-nPqlM38f.js";import"./VList-D1XIPH70.js";import"./ssrBoot-BEsgioc-.js";import"./VAvatar-BySErY85.js";import"./dialog-transition-W1zkv_z1.js";import"./VMenu-COwqqN9u.js";import"./VCheckboxBtn-DYpeSHmB.js";import"./VSelectionControl-MYtKOIcR.js";import"./VChip-cgkimzNZ.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BxkgbwWS.js";/* empty css              */const xe={class:"mt-10"},Ae={class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},Te={__name:"TesAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},pembelajaran:{type:Array,required:!0},detilData:{type:Object,required:!1,default:null},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(B,{emit:g}){const u=B,f=d(!1),c=g,V=d(!1),v=d(),n=d({id:null,pembelajaran_id:null,deskripsi:null,jawaban:[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}]}),S=[{key:"0",val:"Salah"},{key:"1",val:"Benar"}],h=async()=>{var o;(o=v.value)==null||o.validate().then(async({valid:s})=>{s&&(f.value=!0,await Y("/admin/tes/store",{method:"POST",body:n.value,onResponse({request:k,response:r,options:y}){let $=r._data;C(),c("notif",$)}}))})},C=()=>{c("update:isDialogVisible",!1),f.value=!1,n.value={id:null,pembelajaran_id:null,deskripsi:null,jawaban:[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}]}};return K(u,async()=>{if(u.isDialogVisible)if(console.log(u.detilData),u.detilData){let o=[];u.detilData.jawaban.length>0?u.detilData.jawaban.forEach(s=>{o.push({jawaban_id:s.jawaban_id,opsi:s.opsi,deskripsi:s.deskripsi,benar:s.benar})}):o=[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}],n.value={id:u.detilData.tes_id,pembelajaran_id:u.detilData.pembelajaran_id,deskripsi:u.detilData.deskripsi,jawaban:o}}else n.value={id:null,pembelajaran_id:null,deskripsi:null,jawaban:[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}]}}),(o,s)=>{const k=X;return w(),M(je,{fullscreen:"",scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":u.isDialogVisible,"onUpdate:modelValue":C},{default:l(()=>[e(Z,null,{default:l(()=>[_("div",null,[e(Ve,{color:"primary"},{default:l(()=>[e(z,{icon:"",variant:"plain",onClick:C},{default:l(()=>[e(E,{color:"white",icon:"tabler-x"})]),_:1}),e(_e,null,{default:l(()=>[T(J(B.detilData?"Edit":"Tambah")+" Tes ",1)]),_:1}),e(ee),e(ge,null,{default:l(()=>[e(z,{variant:"text",onClick:h},{default:l(()=>s[4]||(s[4]=[T("Simpan")])),_:1})]),_:1})]),_:1})]),e(a(ye),{ref_key:"refForm",ref:v,modelValue:a(V),"onUpdate:modelValue":s[3]||(s[3]=r=>b(V)?V.value=r:null),onSubmit:be(h,["prevent"])},{default:l(()=>[e(ae,null,{default:l(()=>[e(D,null,{default:l(()=>[o.$can("create","laman-tentang-create")?W("",!0):(w(),M(m,{key:0,cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>s[5]||(s[5]=[_("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(G,{modelValue:a(n).sekolah_id,"onUpdate:modelValue":s[0]||(s[0]=r=>a(n).sekolah_id=r),variant:"outlined",items:B.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in o?o.requiredValidator:a(x)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),e(m,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>s[6]||(s[6]=[_("label",{class:"v-label text-body-2 text-high-emphasis",for:"pembelajaran_id"},"Pembelajaran",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(G,{modelValue:a(n).pembelajaran_id,"onUpdate:modelValue":s[1]||(s[1]=r=>a(n).pembelajaran_id=r),variant:"outlined",items:u.pembelajaran,"item-title":"judul","item-value":"pembelajaran_id",placeholder:"== Pilih Mata Pembelajaran ==",rules:["requiredValidator"in o?o.requiredValidator:a(x)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>s[7]||(s[7]=[_("label",{class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},"Deskripsi Soal",-1)])),_:1}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(a(H),{theme:"snow",toolbar:"full",content:a(n).deskripsi,"onUpdate:content":s[2]||(s[2]=r=>a(n).deskripsi=r),contentType:"html",rules:["requiredValidator"in o?o.requiredValidator:a(x)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),(w(!0),O(fe,null,ce(a(n).jawaban,r=>(w(),O("div",xe,[e(D,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>[_("label",Ae,[T(" Jawaban "+J(r.opsi)+" ",1),e(k,{class:"ms-4",items:S,modelValue:r.benar,"onUpdate:modelValue":y=>r.benar=y,placeholder:"Jawaban Benar","item-title":"val","item-value":"key",style:{"inline-size":"12rem"},rules:["requiredValidator"in o?o.requiredValidator:a(x)]},null,8,["modelValue","onUpdate:modelValue","rules"])])]),_:2},1024),e(m,{cols:"12",md:"9",class:"mt-10"},{default:l(()=>[e(a(H),{theme:"snow",toolbar:"full",content:r.deskripsi,"onUpdate:content":y=>r.deskripsi=y,contentType:"html",rules:["requiredValidator"in o?o.requiredValidator:a(x)]},null,8,["content","onUpdate:content","rules"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),256))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}},Be={class:"d-flex gap-2 align-center"},Se={class:"d-flex align-center flex-wrap gap-4"},$e=["innerHTML"],_a={__name:"tes",async setup(B){let g,u;const f=d({icon:null,title:null,text:null,color:null}),c=d(!1),V=d(""),v=d(10),n=d(1),S=d("created_at"),h=d("DESC"),C=p=>{var t,j;p.sortBy.length&&(S.value=(t=p.sortBy[0])==null?void 0:t.key,h.value=(j=p.sortBy[0])==null?void 0:j.order)},o=[{title:"nomor urut",key:"urut",sortable:!1},{title:"pembelajaran",key:"pembelajaran",sortable:!1},{title:"deskripsi soal",key:"deskripsi",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],s=p=>{f.value=p,c.value=!0},{data:k,execute:r}=([g,u]=ve(()=>Ce(Ue("/table",{query:{data:"tes",q:V,itemsPerPage:v,page:n,sortBy:S,orderBy:h}}))),g=await g,u(),g);k.value.color&&(f.value=k.value,c.value=!0);const y=A(()=>k.value.lists.data),$=A(()=>k.value.lists.total),F=A(()=>k.value.sekolah),N=A(()=>k.value.sekolah_id),L=A(()=>k.value.pembelajaran),U=d(!1),R=d(),P=d(),le=async p=>{R.value=p,P.value=!0},te=async p=>{p&&await Y(`/admin/tes/destroy/${R.value}`,{method:"DELETE",onResponse({request:t,response:j,options:Q}){let I=j._data;f.value=I,c.value=!0,R.value=null,r()}})},ie=()=>{U.value=!0,q.value=null},q=d(),se=async p=>{U.value=!0,q.value=p};return K(c,()=>{c.value||r()}),(p,t)=>{const j=X,Q=he,I=ke("IconBtn"),oe=we,ne=Te,re=me,de=pe;return w(),O("section",null,[e(Z,null,{default:l(()=>[e(ae,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[_("div",Be,[e(j,{"model-value":a(v),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=i=>v.value=parseInt(i,10))},null,8,["model-value"])]),e(ee),_("div",Se,[e(Q,{modelValue:a(V),"onUpdate:modelValue":t[1]||(t[1]=i=>b(V)?V.value=i:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(z,{onClick:ie},{default:l(()=>[t[12]||(t[12]=T("Tambah ")),e(E,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(qe),e(De,{"items-per-page":a(v),"onUpdate:itemsPerPage":t[3]||(t[3]=i=>b(v)?v.value=i:null),page:a(n),"onUpdate:page":t[4]||(t[4]=i=>b(n)?n.value=i:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:a(y),"items-length":a($),headers:o,class:"text-no-wrap","onUpdate:options":C},{"item.pembelajaran":l(({item:i})=>[T(J(i.pembelajaran.judul),1)]),"item.deskripsi":l(({item:i})=>[_("span",{innerHTML:i.deskripsi},null,8,$e)]),"item.actions":l(({item:i})=>[e(I,{onClick:ue=>le(i.tes_id)},{default:l(()=>[e(E,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(I,{onClick:ue=>se(i)},{default:l(()=>[e(E,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:l(()=>[e(oe,{page:a(n),"onUpdate:page":t[2]||(t[2]=i=>b(n)?n.value=i:null),"items-per-page":a(v),"total-items":a($)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ne,{"is-dialog-visible":a(U),"onUpdate:isDialogVisible":t[5]||(t[5]=i=>b(U)?U.value=i:null),onNotif:s,sekolah:a(F),"onUpdate:sekolah":t[6]||(t[6]=i=>b(F)?F.value=i:null),sekolahId:a(N),"onUpdate:sekolahId":t[7]||(t[7]=i=>b(N)?N.value=i:null),"detil-data":a(q),"onUpdate:detilData":t[8]||(t[8]=i=>b(q)?q.value=i:null),pembelajaran:a(L),"onUpdate:pembelajaran":t[9]||(t[9]=i=>b(L)?L.value=i:null)},null,8,["is-dialog-visible","sekolah","sekolahId","detil-data","pembelajaran"]),a(f).color?(w(),M(re,{key:0,color:a(f).color,icon:a(f).icon,title:a(f).title,text:a(f).text,"disable-time-out":!1,isSnackbarVisible:a(c),"onUpdate:isSnackbarVisible":t[10]||(t[10]=i=>b(c)?c.value=i:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):W("",!0),e(de,{isDialogVisible:a(P),"onUpdate:isDialogVisible":t[11]||(t[11]=i=>b(P)?P.value=i:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:te},null,8,["isDialogVisible"])])}}};export{_a as default};
