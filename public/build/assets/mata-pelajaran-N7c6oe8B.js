import{a as ya}from"./formatters-DULOiX1-.js";import{_ as ka}from"./ConfirmDialog-BgpEWj1V.js";import{_ as wa}from"./ShowAlert-fgCrFe-K.js";import{r as G}from"./validators-BHkKs9Dp.js";import{e as n,ao as ia,E as Y,o as x,c as M,w as e,a,u as l,i as C,A as Z,j as w,h as S,d as N,V as $,t as L,ap as Ca,b as J,F as da,r as ua,v as na,f as Ua,g as sa,D as xa,G as qa}from"./main-scvWyTOU.js";import{_ as h}from"./AppTextField-Ek_AyAv4.js";import{_ as Fa}from"./DialogCloseBtn--oBKSnmE.js";import{V as K}from"./VCard-JOWG8Qbz.js";import{V as W}from"./VCardText-BgqeFTQi.js";import{V as aa}from"./VForm-tsfG5yXc.js";import{V as ea,a as I}from"./VRow-CEA2EGhF.js";import{V as la}from"./VDialog-BT_pZg2l.js";import{$ as H}from"./api-D6fsIEsL.js";import{V as ma,a as pa,b as fa}from"./VToolbarItems-B5MON32U.js";import{V as ta}from"./VSpacer-BxalfT-y.js";import{V as ra}from"./VAutocomplete-y3Jinr_D.js";import{a as ja}from"./VChip-Id9suLPy.js";import{V as Ta}from"./VList-DLv5Qc2d.js";import{V as Aa,_ as Sa,a as $a}from"./VDataTableServer-B-clEC9x.js";import{u as Pa}from"./useApi-CeTQQjfx.js";import{c as Ba}from"./createUrl-Biyn0cwN.js";import{V as Ma}from"./VDivider-DHXVed4X.js";import{V as Ia}from"./VAvatar-C6585Jv4.js";import{V as Na}from"./VImg-Do8vpaI9.js";import"./VOverlay-DTfC24iM.js";import"./forwardRefs-D9kYFWgq.js";import"./VInput-BhraEJ-a.js";import"./VTextField-CeXEcOOt.js";/* empty css              */import"./dialog-transition-B-XEjlz8.js";import"./index-BxkgbwWS.js";import"./VMenu-DMLr8GaF.js";import"./VCheckboxBtn-DVyllZ90.js";import"./VSelectionControl-C4mA6A2-.js";const Ra={__name:"MapelEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilData:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(R,{emit:F}){const y=R,c=F,s=m=>{c("update:isDialogVisible",m)},b=n(structuredClone(ia(y.detilData)));Y(y,()=>{b.value=structuredClone(ia(y.detilData))});const p=n(!1),g=n(),j=()=>{var m;(m=g.value)==null||m.validate().then(async({valid:r})=>{r&&c("submit",b.value)})};return(m,r)=>{const E=Fa,_=h;return x(),M(la,{width:m.$vuetify.display.smAndDown?"auto":500,"model-value":y.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":s},{default:e(()=>[a(E,{onClick:r[0]||(r[0]=i=>s(!1))}),a(K,{title:"Edit Mata Pelajaran"},{default:e(()=>[a(W,null,{default:e(()=>[a(aa,{ref_key:"refForm",ref:g,modelValue:l(p),"onUpdate:modelValue":r[3]||(r[3]=i=>C(p)?p.value=i:null),onSubmit:Z(j,["prevent"])},{default:e(()=>[a(ea,null,{default:e(()=>[a(I,{cols:"12"},{default:e(()=>[a(_,{id:"nama",modelValue:l(b).nama,"onUpdate:modelValue":r[1]||(r[1]=i=>l(b).nama=i),rules:["requiredValidator"in m?m.requiredValidator:l(G)]},{label:e(()=>r[4]||(r[4]=[w("Nama Mata Pelajaran")])),_:1},8,["modelValue","rules"])]),_:1}),a(I,{cols:"12"},{default:e(()=>[a(_,{id:"nik",modelValue:l(b).alias,"onUpdate:modelValue":r[2]||(r[2]=i=>l(b).alias=i),rules:["requiredValidator"in m?m.requiredValidator:l(G)]},{label:e(()=>r[5]||(r[5]=[w("Nama Alias")])),_:1},8,["modelValue","rules"])]),_:1}),a(I,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[a(S,{type:"submit"},{default:e(()=>r[6]||(r[6]=[w("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ea={__name:"MapelDetilDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilData:{type:Object,required:!0}},emits:["update:isDialogVisible","notif"],setup(R,{emit:F}){const y=R,c=F,s=n([{id:1,ptk_id:null,rombongan_belajar_id:null}]),b=n(),p=n(2),g=n(!1),j=n(),m=async()=>{var d;(d=j.value)==null||d.validate().then(async({valid:D})=>{if(D){const u=new FormData;u.append("data","pembelajaran"),u.append("mata_pelajaran_id",y.detilData.id),u.append("nama_mata_pelajaran",y.detilData.nama),s.value.forEach(T=>{u.append("ptk_id[]",T.ptk_id?T.ptk_id:""),u.append("rombongan_belajar_id[]",T.rombongan_belajar_id?T.rombongan_belajar_id:"")}),await H("/referensi/store",{method:"POST",body:u,onResponse({request:T,response:k,options:V}){let A=k._data;r(),c("notif",A)}})}})},r=()=>{c("update:isDialogVisible",!1),s.value=[{id:1,ptk_id:null,rombongan_belajar_id:null}],p.value=2},E=()=>{s.value.push({id:p.value+=p.value})},_=d=>{s.value.splice(d,1)},i=n([]),U=n([]),f=n(!0);Y(y,async()=>{y.isDialogVisible&&(P("ptk"),P("rombel")),b.value=y.detilData.id});const P=async d=>{await H("/referensi",{query:{data:d},onResponse({request:D,response:u,options:T}){let k=u._data;d=="ptk"&&(i.value=k),d=="rombel"&&(U.value=k),f.value=!1}})};return(d,D)=>(x(),M(la,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":y.isDialogVisible,"onUpdate:modelValue":r},{default:e(()=>[a(K,null,{default:e(()=>[N("div",null,[a(ma,{color:"primary"},{default:e(()=>[a(S,{icon:"",variant:"plain",onClick:r},{default:e(()=>[a($,{color:"white",icon:"tabler-x"})]),_:1}),a(pa,null,{default:e(()=>[w("Detil Mata Pelajaran "+L(R.detilData.nama),1)]),_:1}),a(ta),a(fa,null,{default:e(()=>[a(S,{variant:"text",onClick:E},{default:e(()=>[D[1]||(D[1]=w("Tambah Form ")),a($,{end:"",icon:"tabler-copy"})]),_:1}),a(S,{variant:"text",onClick:m},{default:e(()=>D[2]||(D[2]=[w("Simpan")])),_:1})]),_:1})]),_:1})]),a(W,null,{default:e(()=>[l(f)?(x(),M(Ca,{key:0,indeterminate:"",color:"warning",size:"150"})):(x(),M(l(aa),{key:1,ref_key:"refForm",ref:j,modelValue:l(g),"onUpdate:modelValue":D[0]||(D[0]=u=>C(g)?g.value=u:null),onSubmit:Z(m,["prevent"])},{default:e(()=>[(x(!0),J(da,null,ua(l(s),(u,T)=>(x(),M(ea,{id:u.id,key:u.id},{default:e(()=>[a(I,{md:"5"},{default:e(()=>[a(ra,{chips:"",modelValue:u.ptk_id,"onUpdate:modelValue":k=>u.ptk_id=k,label:"Guru",variant:"outlined",items:l(i),"item-title":"nama","item-value":"ptk_id",placeholder:"== Pilih Guru ==",rules:["requiredValidator"in d?d.requiredValidator:l(G)]},{chip:e(({props:k,item:V})=>[a(ja,na({ref_for:!0},k,{"prepend-avatar":V.raw.avatar,text:V.raw.name}),null,16,["prepend-avatar","text"])]),item:e(({props:k,item:V})=>{var A,q,Q;return[a(Ta,na({ref_for:!0},k,{"prepend-avatar":(A=V==null?void 0:V.raw)==null?void 0:A.avatar,title:(q=V==null?void 0:V.raw)==null?void 0:q.nama,subtitle:(Q=V==null?void 0:V.raw)==null?void 0:Q.email}),null,16,["prepend-avatar","title","subtitle"])]}),_:2},1032,["modelValue","onUpdate:modelValue","items","rules"])]),_:2},1024),a(I,{md:"5"},{default:e(()=>[a(ra,{modelValue:u.rombongan_belajar_id,"onUpdate:modelValue":k=>u.rombongan_belajar_id=k,label:"Rombel",variant:"outlined",items:l(U),"item-title":"nama","item-value":"rombongan_belajar_id",placeholder:"== Pilih Rombel ==",rules:["requiredValidator"in d?d.requiredValidator:l(G)]},null,8,["modelValue","onUpdate:modelValue","items","rules"])]),_:2},1024),a(I,{md:"2"},{default:e(()=>[a(S,{block:"",color:"warning",onClick:k=>_(T)},{default:e(()=>[a($,{icon:"tabler-x"}),D[3]||(D[3]=w(" Hapus"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["modelValue"]))]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Oa={__name:"MapelAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(R,{emit:F}){const y=R,c=F,s=n([{id:1,mapel_id:null,nama:null,alias:null}]),b=n(2),p=n(!1),g=n(),j=async()=>{var _;(_=g.value)==null||_.validate().then(async({valid:i})=>{if(i){const U=new FormData;U.append("data","mapel"),s.value.forEach(f=>{U.append("nama[]",f.nama?f.nama:""),U.append("alias[]",f.alias?f.alias:"")}),await H("/referensi/store",{method:"POST",body:U,onResponse({request:f,response:P,options:d}){let D=P._data;m(),c("notif",D)}})}})},m=()=>{c("update:isDialogVisible",!1),s.value=[{id:1,mapel_id:null,nama:null,alias:null}],b.value=2},r=()=>{s.value.push({id:b.value+=b.value})},E=_=>{s.value.splice(_,1)};return(_,i)=>{const U=h;return x(),M(la,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":y.isDialogVisible,"onUpdate:modelValue":m},{default:e(()=>[a(K,null,{default:e(()=>[N("div",null,[a(ma,{color:"primary"},{default:e(()=>[a(S,{icon:"",variant:"plain",onClick:m},{default:e(()=>[a($,{color:"white",icon:"tabler-x"})]),_:1}),a(pa,null,{default:e(()=>i[1]||(i[1]=[w("Tambah Mata Pelajaran")])),_:1}),a(ta),a(fa,null,{default:e(()=>[a(S,{variant:"text",onClick:r},{default:e(()=>[i[2]||(i[2]=w("Tambah Form ")),a($,{end:"",icon:"tabler-copy"})]),_:1}),a(S,{variant:"text",onClick:j},{default:e(()=>i[3]||(i[3]=[w("Simpan")])),_:1})]),_:1})]),_:1})]),a(W,null,{default:e(()=>[a(l(aa),{ref_key:"refForm",ref:g,modelValue:l(p),"onUpdate:modelValue":i[0]||(i[0]=f=>C(p)?p.value=f:null),onSubmit:Z(j,["prevent"])},{default:e(()=>[(x(!0),J(da,null,ua(l(s),(f,P)=>(x(),M(ea,{id:f.id,key:f.id},{default:e(()=>[a(I,{md:"8"},{default:e(()=>[a(U,{id:"nama",modelValue:f.nama,"onUpdate:modelValue":d=>f.nama=d,rules:["requiredValidator"in _?_.requiredValidator:l(G)]},{label:e(()=>i[4]||(i[4]=[w("Nama Mata Pelajaran")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),a(I,{md:"2"},{default:e(()=>[a(U,{id:"jenis_kelamin",modelValue:f.alias,"onUpdate:modelValue":d=>f.alias=d,rules:["requiredValidator"in _?_.requiredValidator:l(G)]},{label:e(()=>i[5]||(i[5]=[w("Nama Alias")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),a(I,{md:"2"},{default:e(()=>[a(S,{color:"warning",onClick:d=>E(P)},{default:e(()=>[a($,{icon:"tabler-x"}),i[6]||(i[6]=w(" Hapus"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},za={class:"d-flex gap-2 align-center"},La={class:"d-flex align-center flex-wrap gap-4"},Ga={class:"d-flex align-center gap-x-4"},Ha={key:1},Qa={class:"d-flex flex-column"},Ja={class:"text-base"},Ka={class:"text-sm"},je={__name:"mata-pelajaran",async setup(R){let F,y;const c=n({icon:null,title:null,text:null,color:null}),s=n(!1),b=n(""),p=n(10),g=n(1),j=n("id"),m=n("ASC"),r=v=>{var o,B;v.sortBy.length&&(j.value=(o=v.sortBy[0])==null?void 0:o.key,m.value=(B=v.sortBy[0])==null?void 0:B.order)},E=[{title:"id",key:"id",align:"center",sortable:!1},{title:"nama",key:"nama"},{title:"alias",key:"alias"},{title:"Actions",key:"actions",align:"center",sortable:!1}],_=v=>{c.value=v,s.value=!0},{data:i,execute:U}=([F,y]=Ua(()=>Pa(Ba("/table",{query:{data:"mapel",q:b,itemsPerPage:p,page:g,sortBy:j,orderBy:m}}))),F=await F,y(),F);i.value.color&&(c.value=i.value,s.value=!0);const f=sa(()=>i.value.lists.data),P=sa(()=>i.value.lists.total),d=n(!1),D=n(),u=n(),T=async v=>{D.value=v,u.value=!0},k=async v=>{v&&await H(`/referensi/destroy/mapel/${D.value}`,{method:"DELETE",onResponse({request:o,response:B,options:O}){let z=B._data;c.value=z,s.value=!0,D.value=null,U()}})},V=n(!1),A=n(!1),q=n(),Q=async v=>{V.value=!0,q.value=v},va=async v=>{A.value=!0,q.value=v};Y(s,()=>{s.value||U()});const ca=async v=>{console.log(v);const o=new FormData;o.append("data","update-mapel");for(const[B,O]of Object.entries(v))o.append(B,O||"");await H("/referensi/store",{method:"POST",body:o,onResponse({request:B,response:O,options:z}){let X=O._data;c.value=X,s.value=!0,A.value=!1}})};return(v,o)=>{const B=Sa,O=h,z=qa("IconBtn"),X=$a,Va=Oa,ba=Ea,ga=Ra,_a=wa,Da=ka;return x(),J("section",null,[a(K,null,{default:e(()=>[a(W,{class:"d-flex flex-wrap gap-4"},{default:e(()=>[N("div",za,[a(B,{"model-value":l(p),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=parseInt(t,10))},null,8,["model-value"])]),a(ta),N("div",La,[a(O,{modelValue:l(b),"onUpdate:modelValue":o[1]||(o[1]=t=>C(b)?b.value=t:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),a(S,{onClick:o[2]||(o[2]=t=>d.value=!0)},{default:e(()=>[o[13]||(o[13]=w("Tambah ")),a($,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),a(Ma),a(Aa,{"items-per-page":l(p),"onUpdate:itemsPerPage":o[4]||(o[4]=t=>C(p)?p.value=t:null),page:l(g),"onUpdate:page":o[5]||(o[5]=t=>C(g)?g.value=t:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(f),"items-length":l(P),headers:E,class:"text-no-wrap","onUpdate:options":r},{"item.user":e(({item:t})=>[N("div",Ga,[a(Ia,{size:"34",variant:t.avatar?void 0:"tonal",color:t.avatar?void 0:"success"},{default:e(()=>[t.avatar?(x(),M(Na,{key:0,src:t.avatar},null,8,["src"])):(x(),J("span",Ha,L(("avatarText"in v?v.avatarText:l(ya))(t.name)),1))]),_:2},1032,["variant","color"]),N("div",Qa,[N("h6",Ja,L(t.nama),1),N("div",Ka,L(t.email),1)])])]),"item.ttl":e(({item:t})=>[w(L(t.tempat_lahir)+", "+L(new Date(t.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)]),"item.actions":e(({item:t})=>[a(z,{onClick:oa=>T(t.id)},{default:e(()=>[a($,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(z,{onClick:oa=>Q(t)},{default:e(()=>[a($,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),a(z,{onClick:oa=>va(t)},{default:e(()=>[a($,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:e(()=>[a(X,{page:l(g),"onUpdate:page":o[3]||(o[3]=t=>C(g)?g.value=t:null),"items-per-page":l(p),"total-items":l(P)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),a(Va,{"is-dialog-visible":l(d),"onUpdate:isDialogVisible":o[6]||(o[6]=t=>C(d)?d.value=t:null),onNotif:_},null,8,["is-dialog-visible"]),a(ba,{"is-dialog-visible":l(V),"onUpdate:isDialogVisible":o[7]||(o[7]=t=>C(V)?V.value=t:null),onNotif:_,"detil-data":l(q),"onUpdate:detilData":o[8]||(o[8]=t=>C(q)?q.value=t:null)},null,8,["is-dialog-visible","detil-data"]),a(ga,{"is-dialog-visible":l(A),"onUpdate:isDialogVisible":o[9]||(o[9]=t=>C(A)?A.value=t:null),"detil-data":l(q),"onUpdate:detilData":o[10]||(o[10]=t=>C(q)?q.value=t:null),onSubmit:ca},null,8,["is-dialog-visible","detil-data"]),l(c).color?(x(),M(_a,{key:0,color:l(c).color,icon:l(c).icon,title:l(c).title,text:l(c).text,"disable-time-out":!1,isSnackbarVisible:l(s),"onUpdate:isSnackbarVisible":o[11]||(o[11]=t=>C(s)?s.value=t:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):xa("",!0),a(Da,{isDialogVisible:l(u),"onUpdate:isDialogVisible":o[12]||(o[12]=t=>C(u)?u.value=t:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:k},null,8,["isDialogVisible"])])}}};export{je as default};
