import{_ as pe}from"./ConfirmDialog-DR8kbf6E.js";import{_ as me}from"./ShowAlert-Drovwkki.js";import{r as x}from"./validators-BHkKs9Dp.js";import{r as u,j as K,o as w,h as L,w as l,a as e,b as k,g as M,V as P,f as q,t as z,u as a,k as f,l as be,p as W,c as J,F as fe,d as ce,m as ve,n as A,e as ke}from"./main-DU9EoqjC.js";import{_ as X}from"./AppSelect-DeMMEKiH.js";import{Q as H}from"./vue-quill.snow-3pzH-tLV.js";import{$ as Y}from"./api-DOKPi02l.js";import{V as Z}from"./VCard-D9Cry3-P.js";import{V as Ve,a as _e}from"./VToolbar-dfUwmN75.js";import{V as ee}from"./VSpacer-CPX_omNB.js";import{V as ge}from"./VToolbarItems-DuTd-emE.js";import{V as je}from"./VForm-BR18QX3p.js";import{V as ae}from"./VCardText-RWvda3lS.js";import{V as D,a as b}from"./VRow-DyuxuK6E.js";import{V as G}from"./VAutocomplete-DZftX7Fb.js";import{V as ye}from"./VDialog-DyvuE7wz.js";import{V as De,_ as we}from"./VDataTableServer-ChrE0CS-.js";import{_ as he}from"./AppTextField-BtZ6s5uj.js";import{u as Ce}from"./useApi-CkGLT1Ap.js";import{c as Ue}from"./createUrl-tJf5FE1r.js";import{V as xe}from"./VDivider-UhfOSXAm.js";import"./VOverlay-CZFZXewK.js";import"./forwardRefs-D9kYFWgq.js";import"./VImg-Df4Xo0t8.js";import"./VInput-Cba-K_ta.js";import"./VTextField-DeclBAld.js";import"./VList-4TIhbJtc.js";import"./ssrBoot-T14GIqmt.js";import"./VAvatar-Cwli2Xy-.js";import"./dialog-transition-C75lN6B9.js";import"./VMenu-u3uKUHdg.js";import"./VCheckboxBtn-Bo8SZWz6.js";import"./VSelectionControl-Dxa861c7.js";import"./VChip-DY3MPJQe.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BxkgbwWS.js";/* empty css              */const Ae={class:"mt-10"},qe={class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},Te={__name:"TesAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},pembelajaran:{type:Array,required:!0},detilData:{type:Object,required:!1,default:null},sekolahId:{type:String,required:!1,default:null}},emits:["update:isDialogVisible","notif"],setup(T,{emit:g}){const d=T,c=g,p=u(!1),V=u(),r=u({id:null,pembelajaran_id:null,deskripsi:null,jawaban:[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}]}),v=[{key:"0",val:"Salah"},{key:"1",val:"Benar"}],h=async()=>{var n;(n=V.value)==null||n.validate().then(async({valid:s})=>{s&&await Y("/admin/tes/store",{method:"POST",body:r.value,onResponse({request:B,response:o,options:_}){let I=o._data;j(),c("notif",I)}})})},j=()=>{c("update:isDialogVisible",!1),r.value={id:null,pembelajaran_id:null,deskripsi:null,jawaban:[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}]}};return K(d,async()=>{if(d.isDialogVisible)if(console.log(d.detilData),d.detilData){let n=[];d.detilData.jawaban.length>0?d.detilData.jawaban.forEach(s=>{n.push({jawaban_id:s.jawaban_id,opsi:s.opsi,deskripsi:s.deskripsi,benar:s.benar})}):n=[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}],r.value={id:d.detilData.tes_id,pembelajaran_id:d.detilData.pembelajaran_id,deskripsi:d.detilData.deskripsi,jawaban:n}}else r.value={id:null,pembelajaran_id:null,deskripsi:null,jawaban:[{jawaban_id:null,opsi:"A",deskripsi:null,benar:0},{jawaban_id:null,opsi:"B",deskripsi:null,benar:0},{jawaban_id:null,opsi:"C",deskripsi:null,benar:0},{jawaban_id:null,opsi:"D",deskripsi:null,benar:0}]}}),(n,s)=>{const B=X;return w(),L(ye,{fullscreen:"",scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":d.isDialogVisible,"onUpdate:modelValue":j},{default:l(()=>[e(Z,null,{default:l(()=>[k("div",null,[e(Ve,{color:"primary"},{default:l(()=>[e(M,{icon:"",variant:"plain",onClick:j},{default:l(()=>[e(P,{color:"white",icon:"tabler-x"})]),_:1}),e(_e,null,{default:l(()=>[q(z(T.detilData?"Edit":"Tambah")+" Tes ",1)]),_:1}),e(ee),e(ge,null,{default:l(()=>[e(M,{variant:"text",onClick:h},{default:l(()=>s[4]||(s[4]=[q("Simpan")])),_:1})]),_:1})]),_:1})]),e(a(je),{ref_key:"refForm",ref:V,modelValue:a(p),"onUpdate:modelValue":s[3]||(s[3]=o=>f(p)?p.value=o:null),onSubmit:be(h,["prevent"])},{default:l(()=>[e(ae,null,{default:l(()=>[e(D,null,{default:l(()=>[n.$can("create","laman-tentang-create")?W("",!0):(w(),L(b,{key:0,cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(b,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>s[5]||(s[5]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(b,{cols:"12",md:"9"},{default:l(()=>[e(G,{modelValue:a(r).sekolah_id,"onUpdate:modelValue":s[0]||(s[0]=o=>a(r).sekolah_id=o),variant:"outlined",items:T.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in n?n.requiredValidator:a(x)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})),e(b,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(b,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>s[6]||(s[6]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"pembelajaran_id"},"Pembelajaran",-1)])),_:1}),e(b,{cols:"12",md:"9"},{default:l(()=>[e(G,{modelValue:a(r).pembelajaran_id,"onUpdate:modelValue":s[1]||(s[1]=o=>a(r).pembelajaran_id=o),variant:"outlined",items:d.pembelajaran,"item-title":"judul","item-value":"pembelajaran_id",placeholder:"== Pilih Mata Pembelajaran ==",rules:["requiredValidator"in n?n.requiredValidator:a(x)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(b,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>s[7]||(s[7]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},"Deskripsi Soal",-1)])),_:1}),e(b,{cols:"12",md:"9"},{default:l(()=>[e(a(H),{theme:"snow",toolbar:"full",content:a(r).deskripsi,"onUpdate:content":s[2]||(s[2]=o=>a(r).deskripsi=o),contentType:"html",rules:["requiredValidator"in n?n.requiredValidator:a(x)]},null,8,["content","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),(w(!0),J(fe,null,ce(a(r).jawaban,o=>(w(),J("div",Ae,[e(D,{"no-gutters":""},{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(D,{"no-gutters":""},{default:l(()=>[e(b,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>[k("label",qe,[q(" Jawaban "+z(o.opsi)+" ",1),e(B,{class:"ms-4",items:v,modelValue:o.benar,"onUpdate:modelValue":_=>o.benar=_,placeholder:"Jawaban Benar","item-title":"val","item-value":"key",style:{"inline-size":"12rem"},rules:["requiredValidator"in n?n.requiredValidator:a(x)]},null,8,["modelValue","onUpdate:modelValue","rules"])])]),_:2},1024),e(b,{cols:"12",md:"9",class:"mt-10"},{default:l(()=>[e(a(H),{theme:"snow",toolbar:"full",content:o.deskripsi,"onUpdate:content":_=>o.deskripsi=_,contentType:"html",rules:["requiredValidator"in n?n.requiredValidator:a(x)]},null,8,["content","onUpdate:content","rules"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),256))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}},Be={class:"d-flex gap-2 align-center"},Se={class:"d-flex align-center flex-wrap gap-4"},$e=["innerHTML"],Va={__name:"tes",async setup(T){let g,d;const c=u({icon:null,title:null,text:null,color:null}),p=u(!1),V=u(""),r=u(10),v=u(1),h=u("created_at"),j=u("DESC"),n=m=>{var t,y;m.sortBy.length&&(h.value=(t=m.sortBy[0])==null?void 0:t.key,j.value=(y=m.sortBy[0])==null?void 0:y.order)},s=[{title:"pembelajaran",key:"pembelajaran",sortable:!1},{title:"deskripsi soal",key:"deskripsi",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],B=m=>{c.value=m,p.value=!0},{data:o,execute:_}=([g,d]=ve(()=>Ce(Ue("/table",{query:{data:"tes",q:V,itemsPerPage:r,page:v,sortBy:h,orderBy:j}}))),g=await g,d(),g);o.value.color&&(c.value=o.value,p.value=!0);const I=A(()=>o.value.lists.data),O=A(()=>o.value.lists.total),E=A(()=>o.value.sekolah),F=A(()=>o.value.sekolah_id),N=A(()=>o.value.pembelajaran),C=u(!1),R=u(),S=u(),le=async m=>{R.value=m,S.value=!0},te=async m=>{m&&await Y(`/admin/tes/destroy/${R.value}`,{method:"DELETE",onResponse({request:t,response:y,options:Q}){let $=y._data;c.value=$,p.value=!0,R.value=null,_()}})},ie=()=>{C.value=!0,U.value=null},U=u(),se=async m=>{C.value=!0,U.value=m};return K(p,()=>{p.value||_()}),(m,t)=>{const y=X,Q=he,$=ke("IconBtn"),oe=we,ne=Te,re=me,de=pe;return w(),J("section",null,[e(Z,null,{default:l(()=>[e(ae,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[k("div",Be,[e(y,{"model-value":a(r),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=parseInt(i,10))},null,8,["model-value"])]),e(ee),k("div",Se,[e(Q,{modelValue:a(V),"onUpdate:modelValue":t[1]||(t[1]=i=>f(V)?V.value=i:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(M,{onClick:ie},{default:l(()=>[t[12]||(t[12]=q("Tambah ")),e(P,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(xe),e(De,{"items-per-page":a(r),"onUpdate:itemsPerPage":t[3]||(t[3]=i=>f(r)?r.value=i:null),page:a(v),"onUpdate:page":t[4]||(t[4]=i=>f(v)?v.value=i:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:a(I),"items-length":a(O),headers:s,class:"text-no-wrap","onUpdate:options":n},{"item.pembelajaran":l(({item:i})=>[q(z(i.pembelajaran.judul),1)]),"item.deskripsi":l(({item:i})=>[k("span",{innerHTML:i.deskripsi},null,8,$e)]),"item.actions":l(({item:i})=>[e($,{onClick:ue=>le(i.tes_id)},{default:l(()=>[e(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e($,{onClick:ue=>se(i)},{default:l(()=>[e(P,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:l(()=>[e(oe,{page:a(v),"onUpdate:page":t[2]||(t[2]=i=>f(v)?v.value=i:null),"items-per-page":a(r),"total-items":a(O)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ne,{"is-dialog-visible":a(C),"onUpdate:isDialogVisible":t[5]||(t[5]=i=>f(C)?C.value=i:null),onNotif:B,sekolah:a(E),"onUpdate:sekolah":t[6]||(t[6]=i=>f(E)?E.value=i:null),sekolahId:a(F),"onUpdate:sekolahId":t[7]||(t[7]=i=>f(F)?F.value=i:null),"detil-data":a(U),"onUpdate:detilData":t[8]||(t[8]=i=>f(U)?U.value=i:null),pembelajaran:a(N),"onUpdate:pembelajaran":t[9]||(t[9]=i=>f(N)?N.value=i:null)},null,8,["is-dialog-visible","sekolah","sekolahId","detil-data","pembelajaran"]),a(c).color?(w(),L(re,{key:0,color:a(c).color,icon:a(c).icon,title:a(c).title,text:a(c).text,"disable-time-out":!1,isSnackbarVisible:a(p),"onUpdate:isSnackbarVisible":t[10]||(t[10]=i=>f(p)?p.value=i:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):W("",!0),e(de,{isDialogVisible:a(S),"onUpdate:isDialogVisible":t[11]||(t[11]=i=>f(S)?S.value=i:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:te},null,8,["isDialogVisible"])])}}};export{Va as default};
