import{_ as de}from"./ConfirmDialog-B2A2Lgto.js";import{_ as me}from"./ShowAlert-CsNMQtQV.js";import{r as E}from"./validators-BHkKs9Dp.js";import{r as s,h as G,j as K,o as x,f as I,w as a,a as e,u as t,i as b,k as W,e as D,g as q,b as O,l as F,c as X,F as pe,d as fe,m as ve,n as J,p as Ve,q as ce}from"./main-DW5VCC58.js";import{_ as L}from"./AppTextField-B1-hJZbi.js";import{_ as be}from"./DialogCloseBtn-Bh_bfbtq.js";import{V as H}from"./VCard-CuZfBHUC.js";import{V as Q}from"./VCardText-DYlNs-5b.js";import{V as Y}from"./VForm-C7hd0Hig.js";import{V as Z,a as T}from"./VRow-DP0F4OAf.js";import{V as h}from"./VDialog-BUNE5qoM.js";import{$ as z}from"./api-CBRIaEF6.js";import{V as ge,a as _e}from"./VToolbar-DJKGaqFN.js";import{V as ee}from"./VSpacer-CHPoLg1n.js";import{V as De}from"./VToolbarItems-D4-EMgPk.js";import{V as ye,_ as ke}from"./VDataTableServer-C7-8KsRy.js";import{_ as Ce}from"./AppSelect-eDGR-LH7.js";import{u as we}from"./useApi-C8gPxuF8.js";import{c as Ue}from"./createUrl-PcBekDPf.js";import{V as Ae}from"./VDivider-mCBUrhL5.js";import"./VOverlay-DRtT-Rzv.js";import"./forwardRefs-D9kYFWgq.js";import"./VImg-BFht51fA.js";import"./VInput-DKZRgHWi.js";import"./VTextField-BnBMykLd.js";import"./VAvatar-XUhoRa9A.js";/* empty css              */import"./dialog-transition-DqsQIbqL.js";import"./index-BxkgbwWS.js";import"./VCheckboxBtn-D5pqMqc3.js";import"./VSelectionControl-C9AcoZtZ.js";import"./VChip-CNkFK8YP.js";import"./VList-u4Y2U10_.js";import"./ssrBoot-BDjid1kv.js";import"./VMenu-CsSG_iKb.js";const qe={__name:"MapelEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilData:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(N,{emit:C}){const y=N,m=C,r=u=>{m("update:isDialogVisible",u)},p=s(structuredClone(G(y.detilData)));K(y,()=>{p.value=structuredClone(G(y.detilData))});const f=s(!1),c=s(),w=()=>{var u;(u=c.value)==null||u.validate().then(async({valid:n})=>{n&&m("submit",p.value)})};return(u,n)=>{const $=be,V=L;return x(),I(h,{width:u.$vuetify.display.smAndDown?"auto":500,"model-value":y.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":r},{default:a(()=>[e($,{onClick:n[0]||(n[0]=o=>r(!1))}),e(H,{title:"Edit Mata Pelajaran"},{default:a(()=>[e(Q,null,{default:a(()=>[e(Y,{ref_key:"refForm",ref:c,modelValue:t(f),"onUpdate:modelValue":n[3]||(n[3]=o=>b(f)?f.value=o:null),onSubmit:W(w,["prevent"])},{default:a(()=>[e(Z,null,{default:a(()=>[e(T,{cols:"12"},{default:a(()=>[e(V,{id:"nama",modelValue:t(p).nama,"onUpdate:modelValue":n[1]||(n[1]=o=>t(p).nama=o),rules:["requiredValidator"in u?u.requiredValidator:t(E)]},{label:a(()=>n[4]||(n[4]=[D("Nama Mata Pelajaran")])),_:1},8,["modelValue","rules"])]),_:1}),e(T,{cols:"12"},{default:a(()=>[e(V,{id:"nik",modelValue:t(p).alias,"onUpdate:modelValue":n[2]||(n[2]=o=>t(p).alias=o),rules:["requiredValidator"in u?u.requiredValidator:t(E)]},{label:a(()=>n[5]||(n[5]=[D("Nama Alias")])),_:1},8,["modelValue","rules"])]),_:1}),e(T,{cols:"12",class:"d-flex gap-4"},{default:a(()=>[e(q,{type:"submit"},{default:a(()=>n[6]||(n[6]=[D("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},xe={__name:"MapelAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(N,{emit:C}){const y=N,m=C,r=s([{id:1,mapel_id:null,nama:null,alias:null}]),p=s(2),f=s(!1),c=s(),w=async()=>{var V;(V=c.value)==null||V.validate().then(async({valid:o})=>{if(o){const g=new FormData;g.append("data","mapel"),r.value.forEach(d=>{g.append("nama[]",d.nama?d.nama:""),g.append("alias[]",d.alias?d.alias:"")}),await z("/referensi/store",{method:"POST",body:g,onResponse({request:d,response:A,options:_}){let S=A._data;u(),m("notif",S)}})}})},u=()=>{m("update:isDialogVisible",!1),r.value=[{id:1,mapel_id:null,nama:null,alias:null}],p.value=2},n=()=>{r.value.push({id:p.value+=p.value})},$=V=>{r.value.splice(V,1)};return(V,o)=>{const g=L;return x(),I(h,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":y.isDialogVisible,"onUpdate:modelValue":u},{default:a(()=>[e(H,null,{default:a(()=>[O("div",null,[e(ge,{color:"primary"},{default:a(()=>[e(q,{icon:"",variant:"plain",onClick:u},{default:a(()=>[e(F,{color:"white",icon:"tabler-x"})]),_:1}),e(_e,null,{default:a(()=>o[1]||(o[1]=[D("Tambah Mata Pelajaran")])),_:1}),e(ee),e(De,null,{default:a(()=>[e(q,{variant:"text",onClick:n},{default:a(()=>[o[2]||(o[2]=D("Tambah Form ")),e(F,{end:"",icon:"tabler-copy"})]),_:1}),e(q,{variant:"text",onClick:w},{default:a(()=>o[3]||(o[3]=[D("Simpan")])),_:1})]),_:1})]),_:1})]),e(Q,null,{default:a(()=>[e(t(Y),{ref_key:"refForm",ref:c,modelValue:t(f),"onUpdate:modelValue":o[0]||(o[0]=d=>b(f)?f.value=d:null),onSubmit:W(w,["prevent"])},{default:a(()=>[(x(!0),X(pe,null,fe(t(r),(d,A)=>(x(),I(Z,{id:d.id,key:d.id},{default:a(()=>[e(T,{md:"8"},{default:a(()=>[e(g,{id:"nama",modelValue:d.nama,"onUpdate:modelValue":_=>d.nama=_,rules:["requiredValidator"in V?V.requiredValidator:t(E)]},{label:a(()=>o[4]||(o[4]=[D("Nama Mata Pelajaran")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(T,{md:"2"},{default:a(()=>[e(g,{id:"jenis_kelamin",modelValue:d.alias,"onUpdate:modelValue":_=>d.alias=_,rules:["requiredValidator"in V?V.requiredValidator:t(E)]},{label:a(()=>o[5]||(o[5]=[D("Nama Alias")])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(T,{md:"2"},{default:a(()=>[e(q,{color:"warning",onClick:_=>$(A)},{default:a(()=>[e(F,{icon:"tabler-x"}),o[6]||(o[6]=D(" Hapus "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Fe={class:"d-flex gap-2 align-center"},Te={class:"d-flex align-center flex-wrap gap-4"},pa={__name:"mata-pelajaran",async setup(N){let C,y;const m=s({icon:null,title:null,text:null,color:null}),r=s(!1),p=s(""),f=s(10),c=s(1),w=s("id"),u=s("ASC"),n=v=>{var l,k;v.sortBy.length&&(w.value=(l=v.sortBy[0])==null?void 0:l.key,u.value=(k=v.sortBy[0])==null?void 0:k.order)},$=[{title:"id",key:"id",align:"center",sortable:!1},{title:"nama",key:"nama"},{title:"alias",key:"alias"},{title:"Actions",key:"actions",align:"center",sortable:!1}],V=v=>{m.value=v,r.value=!0},{data:o,execute:g}=([C,y]=ve(()=>we(Ue("/table",{query:{data:"mapel",q:p,itemsPerPage:f,page:c,sortBy:w,orderBy:u}}))),C=await C,y(),C);o.value.color&&(m.value=o.value,r.value=!0);const d=J(()=>o.value.lists.data),A=J(()=>o.value.lists.total),_=s(!1),S=s(),j=s(),ae=async v=>{S.value=v,j.value=!0},le=async v=>{v&&await z(`/referensi/destroy/mapel/${S.value}`,{method:"DELETE",onResponse({request:l,response:k,options:U}){let P=k._data;m.value=P,r.value=!0,S.value=null,g()}})},B=s(!1),M=s(),te=async v=>{B.value=!0,M.value=v};K(r,()=>{r.value||g()});const oe=async v=>{console.log(v);const l=new FormData;l.append("data","update-mapel");for(const[k,U]of Object.entries(v))l.append(k,U||"");await z("/referensi/store",{method:"POST",body:l,onResponse({request:k,response:U,options:P}){let R=U._data;m.value=R,r.value=!0,B.value=!1}})};return(v,l)=>{const k=Ce,U=L,P=ce("IconBtn"),R=ke,ie=xe,ne=qe,se=me,re=de;return x(),X("section",null,[e(H,null,{default:a(()=>[e(Q,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[O("div",Fe,[e(k,{"model-value":t(f),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=i=>f.value=parseInt(i,10))},null,8,["model-value"])]),e(ee),O("div",Te,[e(U,{modelValue:t(p),"onUpdate:modelValue":l[1]||(l[1]=i=>b(p)?p.value=i:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(q,{onClick:l[2]||(l[2]=i=>_.value=!0)},{default:a(()=>[l[11]||(l[11]=D("Tambah ")),e(F,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(Ae),e(ye,{"items-per-page":t(f),"onUpdate:itemsPerPage":l[4]||(l[4]=i=>b(f)?f.value=i:null),page:t(c),"onUpdate:page":l[5]||(l[5]=i=>b(c)?c.value=i:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:t(d),"items-length":t(A),headers:$,class:"text-no-wrap","onUpdate:options":n},{"item.actions":a(({item:i})=>[e(P,{onClick:ue=>ae(i.id)},{default:a(()=>[e(F,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(P,{onClick:ue=>te(i)},{default:a(()=>[e(F,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:a(()=>[e(R,{page:t(c),"onUpdate:page":l[3]||(l[3]=i=>b(c)?c.value=i:null),"items-per-page":t(f),"total-items":t(A)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ie,{"is-dialog-visible":t(_),"onUpdate:isDialogVisible":l[6]||(l[6]=i=>b(_)?_.value=i:null),onNotif:V},null,8,["is-dialog-visible"]),e(ne,{"is-dialog-visible":t(B),"onUpdate:isDialogVisible":l[7]||(l[7]=i=>b(B)?B.value=i:null),"detil-data":t(M),"onUpdate:detilData":l[8]||(l[8]=i=>b(M)?M.value=i:null),onSubmit:oe},null,8,["is-dialog-visible","detil-data"]),t(m).color?(x(),I(se,{key:0,color:t(m).color,icon:t(m).icon,title:t(m).title,text:t(m).text,"disable-time-out":!1,isSnackbarVisible:t(r),"onUpdate:isSnackbarVisible":l[9]||(l[9]=i=>b(r)?r.value=i:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):Ve("",!0),e(re,{isDialogVisible:t(j),"onUpdate:isDialogVisible":l[10]||(l[10]=i=>b(j)?j.value=i:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:le},null,8,["isDialogVisible"])])}}};export{pa as default};
