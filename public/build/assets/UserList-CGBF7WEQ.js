import{a as ee}from"./formatters-DULOiX1-.js";import{_ as te}from"./ConfirmDialog-DsbUSveT.js";import{_ as ae}from"./ShowAlert-BtJ2kGtL.js";import{V as se,_ as le}from"./VDataTableServer-SilzRREv.js";import{_ as oe}from"./AppTextField-zCzlzxfC.js";import{_ as ie}from"./AppSelect-D30cH36D.js";import{u as re}from"./useApi-Ba981vF1.js";import{c as ne}from"./createUrl-BQy8p9BO.js";import{$ as R}from"./api-BlliS3fq.js";import{r as i,i as ue,j as x,O as ce,e as de,o as f,c as C,a as t,w as s,b as r,u as l,k as v,g as q,f as w,h as z,t as U,F,d as pe,V as p,E as me}from"./main-DDhzifcV.js";import{V as fe}from"./VCardText-DfQa0cKd.js";import{V as ve}from"./VSpacer-CU2FsF2o.js";import{V as _e}from"./VDivider-QpLny8sg.js";import{V as ge}from"./VAvatar-cQ3AVSZ6.js";import{V as be}from"./VImg-PQzjM8qL.js";import{V as Ve}from"./VMenu-DA_6fMJ3.js";import{b as ye,V as B,a as D}from"./VList-B_QfjsxU.js";import{V as ke}from"./VCard-ClcQXOLU.js";const xe={class:"d-flex gap-2 align-center"},Ce={class:"d-flex align-center flex-wrap gap-4"},we={class:"d-flex align-center gap-x-4"},Ue={key:1},Be={class:"d-flex flex-column"},De={class:"text-base"},Ae={class:"text-sm"},he={class:"d-flex align-center gap-x-2"},$e={class:"text-capitalize text-high-emphasis text-body-1"},We={__name:"UserList",emits:["statistik","aplikasi"],async setup(Se,{emit:N}){let b,A;const n=i({icon:null,title:null,text:null,color:null}),u=i(!1),V=i(""),O=i(),h=N,c=i(10),d=i(1),$=i("id"),S=i("ASC"),j=o=>{var e,m;o.sortBy.length&&($.value=(e=o.sortBy[0])==null?void 0:e.key,S.value=(m=o.sortBy[0])==null?void 0:m.order)},G=[{title:"User",key:"user",sortable:!1},{title:"Role",key:"roles",sortable:!1},{title:"Created By",key:"created_by",sortable:!1},{title:"Updated By",key:"updated_by",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],{data:y,execute:M}=([b,A]=ue(()=>re(ne("/settings/users-roles",{query:{q:V,role_id:O,itemsPerPage:c,page:d,sortBy:$,orderBy:S}}))),b=await b,A(),b),Q=x(()=>y.value.users.data),T=x(()=>y.value.users.total),H=x(()=>y.value.statistik),J=x(()=>y.value.aplikasi);h("statistik",H.value),h("aplikasi",J.value);const I=o=>{if(!o)return{color:"primary",icon:"tabler-user"};const e=o.toLowerCase();return e==="administrator"?{color:"primary",icon:"tabler-user"}:e==="operator"?{color:"warning",icon:"tabler-settings"}:e==="koperasi"?{color:"success",icon:"tabler-chart-donut"}:e==="editor"?{color:"info",icon:"tabler-pencil"}:e==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},k=i(),L=i(),P=async o=>{L.value=o,k.value=!0},K=async()=>{await R(`/settings/destroy/user/${L.value}`,{method:"DELETE",onResponse({request:o,response:e,options:m}){let _=e._data;n.value=_,u.value=!0}})},W=async()=>{await R("/settings/generate-user",{onResponse({request:o,response:e,options:m}){let _=e._data;n.value=_,u.value=!0}})};return ce(u,()=>{u.value||M()}),(o,e)=>{const m=ie,_=oe,E=de("IconBtn"),X=le,Y=ae,Z=te;return f(),C("section",null,[t(ke,null,{default:s(()=>[t(fe,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[r("div",xe,[e[7]||(e[7]=r("p",{class:"text-body-1 mb-0"}," Show ",-1)),t(m,{"model-value":l(c),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=parseInt(a,10))},null,8,["model-value"])]),t(ve),r("div",Ce,[t(_,{modelValue:l(V),"onUpdate:modelValue":e[1]||(e[1]=a=>v(V)?V.value=a:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),t(q,{onClick:W},{default:s(()=>e[8]||(e[8]=[w("Generate User")])),_:1})])]),_:1}),t(_e),t(se,{"items-per-page":l(c),"onUpdate:itemsPerPage":e[3]||(e[3]=a=>v(c)?c.value=a:null),page:l(d),"onUpdate:page":e[4]||(e[4]=a=>v(d)?d.value=a:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(Q),"items-length":l(T),headers:G,class:"text-no-wrap","onUpdate:options":j},{"item.user":s(({item:a})=>[r("div",we,[t(ge,{size:"34",variant:a.avatar?void 0:"tonal",color:a.avatar?void 0:"success"},{default:s(()=>[a.avatar?(f(),z(be,{key:0,src:a.avatar},null,8,["src"])):(f(),C("span",Ue,U(("avatarText"in o?o.avatarText:l(ee))(a.name)),1))]),_:2},1032,["variant","color"]),r("div",Be,[r("h6",De,U(a.name),1),r("div",Ae,U(a.email),1)])])]),"item.roles":s(({item:a})=>[r("div",he,[(f(!0),C(F,null,pe(a.roles,g=>(f(),C(F,null,[t(p,{size:22,icon:I(g.name).icon,color:I(g.name).color},null,8,["icon","color"]),r("div",$e,U(g.display_name),1)],64))),256))])]),"item.actions":s(({item:a})=>[t(E,{onClick:g=>P(a.id)},{default:s(()=>[t(p,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(E,null,{default:s(()=>[t(p,{icon:"tabler-eye"})]),_:1}),t(q,{icon:"",variant:"text",color:"medium-emphasis"},{default:s(()=>[t(p,{icon:"tabler-dots-vertical"}),t(Ve,{activator:"parent"},{default:s(()=>[t(ye,null,{default:s(()=>[t(B,{to:{name:"apps-user-view-id",params:{id:a.id}}},{prepend:s(()=>[t(p,{icon:"tabler-eye"})]),default:s(()=>[t(D,null,{default:s(()=>e[9]||(e[9]=[w("View")])),_:1})]),_:2},1032,["to"]),t(B,{link:""},{prepend:s(()=>[t(p,{icon:"tabler-pencil"})]),default:s(()=>[t(D,null,{default:s(()=>e[10]||(e[10]=[w("Edit")])),_:1})]),_:1}),t(B,{onClick:g=>P(a.id)},{prepend:s(()=>[t(p,{icon:"tabler-trash"})]),default:s(()=>[t(D,null,{default:s(()=>e[11]||(e[11]=[w("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[t(X,{page:l(d),"onUpdate:page":e[2]||(e[2]=a=>v(d)?d.value=a:null),"items-per-page":l(c),"total-items":l(T)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),l(n).color?(f(),z(Y,{key:0,color:l(n).color,icon:l(n).icon,title:l(n).title,text:l(n).text,"disable-time-out":!1,isSnackbarVisible:l(u),"onUpdate:isSnackbarVisible":e[5]||(e[5]=a=>v(u)?u.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):me("",!0),t(Z,{isDialogVisible:l(k),"onUpdate:isDialogVisible":e[6]||(e[6]=a=>v(k)?k.value=a:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:K},null,8,["isDialogVisible"])])}}};export{We as _};
