import{a as ae}from"./formatters-DULOiX1-.js";import{_ as _e}from"./ConfirmDialog-DFbzgQW8.js";import{_ as we}from"./ShowAlert-DfFAv44p.js";import{r as I,e as oe}from"./validators-BHkKs9Dp.js";import{r as f,C as le,l as ie,o as V,m as w,w as t,b as e,u as l,p as D,h as ne,d as _,V as K,a as s,c as S,t as c,q as X,v as j,F as h,x as te,j as Te,k as W,s as qe}from"./main-CJqJ5jgX.js";import{_ as Y}from"./AppTextField-BNKfsWJc.js";import{_ as se}from"./DialogCloseBtn-Bi6ZBzq_.js";import{V as Q}from"./VCard-BoPs5wzw.js";import{V as G}from"./VCardText-Dyk9rFBW.js";import{V as re}from"./VForm-BfSbkl8_.js";import{V as Ce,a as $}from"./VRow-C4R7jrb-.js";import{V as ue}from"./VFileInput-DqxTBnBp.js";import{V as Z}from"./VDialog-DcAvQr3h.js";import{V as de}from"./VAvatar-TRklItJV.js";import{V as me}from"./VImg-DRPIkl48.js";import{b as pe,V as xe,_ as $e,a as Se}from"./VDataTableServer-MiFAOmgu.js";import{$ as J}from"./api-C1l3fXy6.js";import{V as Ae,a as Be,b as Fe}from"./VToolbarItems-Dp1Dbzg0.js";import{V as fe}from"./VSpacer-D7tKLNB5.js";import{u as Ie}from"./useApi-Crmmmh9g.js";import{c as Ne}from"./createUrl-XQL3s935.js";import{V as Ee}from"./VDivider-BMkwtQos.js";import"./VOverlay-BB1DNga5.js";import"./forwardRefs-D9kYFWgq.js";import"./VTextField-BhLkXAqD.js";/* empty css              */import"./VChip-DxlNBE8M.js";import"./dialog-transition-Bu6FTd__.js";import"./filter-Bgaj9e79.js";import"./VList-BxrZyx63.js";import"./VMenu-BM9B6Kyn.js";import"./VCheckboxBtn-DyTQd6So.js";import"./index-9rIf2CJL.js";const je={__name:"PtkEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilPtk:{type:Object,required:!1,default:()=>({nama:"",nuptk:"",email:"",jenis_kelamin:"",tempat_lahir:!1,tanggal_lahir:"",nik:""})}},emits:["update:isDialogVisible","submit"],setup(P,{emit:T}){const k=P,g=T,m=d=>{g("update:isDialogVisible",d)},r=f(structuredClone(le(k.detilPtk)));ie(k,()=>{r.value=structuredClone(le(k.detilPtk)),r.value.avatar=null});const u=f(!1),y=f(),A=()=>{var d;(d=y.value)==null||d.validate().then(async({valid:a})=>{a&&g("submit",r.value)})};return(d,a)=>{const L=se,p=Y;return V(),w(Z,{width:d.$vuetify.display.smAndDown?"auto":500,"model-value":k.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":m},{default:t(()=>[e(L,{onClick:a[0]||(a[0]=o=>m(!1))}),e(Q,{title:`Edit Data ${l(r).nama}`},{default:t(()=>[e(G,null,{default:t(()=>[e(re,{ref_key:"refForm",ref:y,modelValue:l(u),"onUpdate:modelValue":a[9]||(a[9]=o=>D(u)?u.value=o:null),onSubmit:ne(A,["prevent"])},{default:t(()=>[e(Ce,null,{default:t(()=>[e($,{cols:"12"},{default:t(()=>[e(p,{id:"nama",modelValue:l(r).nama,"onUpdate:modelValue":a[1]||(a[1]=o=>l(r).nama=o),rules:["requiredValidator"in d?d.requiredValidator:l(I)]},{label:t(()=>a[10]||(a[10]=[_("Nama Lengkap")])),_:1},8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(p,{id:"nik",modelValue:l(r).nik,"onUpdate:modelValue":a[2]||(a[2]=o=>l(r).nik=o),rules:["requiredValidator"in d?d.requiredValidator:l(I)]},{label:t(()=>a[11]||(a[11]=[_("NIK")])),_:1},8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(p,{id:"email",modelValue:l(r).email,"onUpdate:modelValue":a[3]||(a[3]=o=>l(r).email=o),rules:["requiredValidator"in d?d.requiredValidator:l(I),"emailValidator"in d?d.emailValidator:l(oe)]},{label:t(()=>a[12]||(a[12]=[_("Email")])),_:1},8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(p,{id:"jenis_kelamin",modelValue:l(r).jenis_kelamin,"onUpdate:modelValue":a[4]||(a[4]=o=>l(r).jenis_kelamin=o),rules:["requiredValidator"in d?d.requiredValidator:l(I)]},{label:t(()=>a[13]||(a[13]=[_("Jenis Kelamin")])),_:1},8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(p,{id:"tempat_lahir",modelValue:l(r).tempat_lahir,"onUpdate:modelValue":a[5]||(a[5]=o=>l(r).tempat_lahir=o),rules:["requiredValidator"in d?d.requiredValidator:l(I)]},{label:t(()=>a[14]||(a[14]=[_("Tempat Lahir")])),_:1},8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(p,{id:"tanggal_lahir",modelValue:l(r).tanggal_lahir,"onUpdate:modelValue":a[6]||(a[6]=o=>l(r).tanggal_lahir=o),rules:["requiredValidator"in d?d.requiredValidator:l(I),d.dateValidator]},{label:t(()=>a[15]||(a[15]=[_("Tanggal Lahir")])),_:1},8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(p,{id:"nuptk",modelValue:l(r).nuptk,"onUpdate:modelValue":a[7]||(a[7]=o=>l(r).nuptk=o)},{label:t(()=>a[16]||(a[16]=[_("NUPTK")])),_:1},8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(ue,{accept:"image/*",modelValue:l(r).avatar,"onUpdate:modelValue":a[8]||(a[8]=o=>l(r).avatar=o),id:"avatar",label:"Foto Profil"},null,8,["modelValue"])]),_:1}),e($,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(K,{type:"submit"},{default:t(()=>a[17]||(a[17]=[_("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title"])]),_:1},8,["width","model-value"])}}},Le={class:"text-center"},Oe={key:1,class:"text-5xl font-weight-medium"},Re={class:"text-h4 text-center mb-2"},Ke={__name:"PtkDetilDialog",props:{isDialogVisible:{type:Boolean,required:!0},detilPtk:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(P,{emit:T}){const k=P,g=T,m=r=>{g("update:isDialogVisible",r)};return(r,u)=>{const y=se;return V(),w(Z,{width:r.$vuetify.display.smAndDown?"auto":800,"model-value":k.isDialogVisible,scrollable:"","content-class":"scrollable-dialog","onUpdate:modelValue":m},{default:t(()=>[e(y,{onClick:u[0]||(u[0]=A=>m(!1))}),k.detilPtk?(V(),w(Q,{key:0,class:"pa-2 pa-sm-10"},{default:t(()=>[e(G,null,{default:t(()=>[s("div",Le,[e(de,{rounded:"",size:100,color:k.detilPtk.avatar?void 0:"primary",variant:k.detilPtk.avatar?void 0:"tonal"},{default:t(()=>[k.detilPtk.avatar?(V(),w(me,{key:0,src:k.detilPtk.avatar},null,8,["src"])):(V(),S("span",Oe,c(("avatarText"in r?r.avatarText:l(ae))(k.detilPtk.nama)),1))]),_:1},8,["color","variant"])]),s("h4",Re,c(P.detilPtk.nama),1),e(pe,{class:"permission-table text-no-wrap mb-6 mt-4"},{default:t(()=>[s("tr",null,[u[1]||(u[1]=s("td",null,"Nama",-1)),s("td",null,": "+c(P.detilPtk.nama),1)]),s("tr",null,[u[2]||(u[2]=s("td",null,"NIK",-1)),s("td",null,": "+c(P.detilPtk.nik),1)]),s("tr",null,[u[3]||(u[3]=s("td",null,"NUPTK",-1)),s("td",null,": "+c(P.detilPtk.nuptk),1)]),s("tr",null,[u[4]||(u[4]=s("td",null,"Email",-1)),s("td",null,": "+c(P.detilPtk.email),1)]),s("tr",null,[u[5]||(u[5]=s("td",null,"Jenis Kelamin",-1)),s("td",null,": "+c(P.detilPtk.jenis_kelamin),1)]),s("tr",null,[u[6]||(u[6]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,": "+c(P.detilPtk.tempat_lahir)+", "+c(new Date(P.detilPtk.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)])]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1},8,["width","model-value"])}}},ze={__name:"AddPtkDialog",props:{sekolah:{type:Object,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(P,{emit:T}){const k=P,g=T,m=f(""),r=f(!1),u=f(),y=async()=>{var p;(p=u.value)==null||p.validate().then(async({valid:o})=>{o&&await J("/referensi/store",{method:"POST",body:{data:"import-ptk",sekolah_id:k.sekolah.sekolah_id,item:a.value},onResponse({request:B,response:b,options:O}){let q=b._data;g("update:isDialogVisible",!1),g("notif",q),a.value=[],m.value=""}})})},A=()=>{g("update:isDialogVisible",!1),m.value=""},d=f(!1),a=f([]),L=async p=>{const o=new FormData;o.append("file_excel",p),await J("/referensi/import",{method:"POST",body:o,onResponse({request:B,response:b,options:O}){let q=b._data;a.value=q.imported_data,d.value=!0}})};return(p,o)=>{const B=Y;return V(),w(Z,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":k.isDialogVisible,"onUpdate:modelValue":A},{default:t(()=>[e(Q,null,{default:t(()=>[s("div",null,[e(Ae,{color:"primary"},{default:t(()=>[e(K,{icon:"",variant:"plain",onClick:A},{default:t(()=>[e(j,{color:"white",icon:"tabler-x"})]),_:1}),e(Be,null,{default:t(()=>o[2]||(o[2]=[_("Tambah PTK")])),_:1}),e(fe),e(Fe,null,{default:t(()=>[e(K,{variant:"text",href:"/unduhan/template-ptk",target:"_blank"},{default:t(()=>[o[3]||(o[3]=_("Unduh Template ")),e(j,{end:"",icon:"tabler-cloud-download"})]),_:1}),e(K,{variant:"text",onClick:y},{default:t(()=>o[4]||(o[4]=[_("Simpan")])),_:1})]),_:1})]),_:1})]),e(G,null,{default:t(()=>[e(l(re),{ref_key:"refForm",ref:u,modelValue:l(r),"onUpdate:modelValue":o[1]||(o[1]=b=>D(r)?r.value=b:null),onSubmit:ne(y,["prevent"])},{default:t(()=>[e(ue,{accept:".xlsx",modelValue:l(m),"onUpdate:modelValue":[o[0]||(o[0]=b=>D(m)?m.value=b:null),L],label:"Import Excel"},null,8,["modelValue"]),e(pe,{class:"permission-table text-no-wrap mb-6 mt-4"},{default:t(()=>[o[5]||(o[5]=s("thead",null,[s("tr",null,[s("th",null,"no"),s("th",null,"nama"),s("th",null,"nuptk"),s("th",null,"email"),s("th",null,"jenis_kelamin"),s("th",null,"tempat_lahir"),s("th",null,"tanggal_lahir"),s("th",null,"nik")])],-1)),s("tbody",null,[(V(!0),S(h,null,te(l(a),(b,O)=>(V(),S("tr",{key:b.no},[(V(!0),S(h,null,te(b,(q,U,z)=>(V(),S("td",null,[U=="no"?(V(),S(h,{key:0},[_(c(q),1)],64)):(V(),S(h,{key:1},[U=="email"?(V(),w(B,{key:0,modelValue:b[U],"onUpdate:modelValue":C=>b[U]=C,rules:["requiredValidator"in p?p.requiredValidator:l(I),"emailValidator"in p?p.emailValidator:l(oe)]},null,8,["modelValue","onUpdate:modelValue","rules"])):U!="nuptk"?(V(),w(B,{key:1,modelValue:b[U],"onUpdate:modelValue":C=>b[U]=C,rules:["requiredValidator"in p?p.requiredValidator:l(I)]},null,8,["modelValue","onUpdate:modelValue","rules"])):(V(),w(B,{key:2,modelValue:b[U],"onUpdate:modelValue":C=>b[U]=C},null,8,["modelValue","onUpdate:modelValue"]))],64))]))),256))]))),128))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Me={class:"d-flex gap-2 align-center"},he={class:"d-flex align-center flex-wrap gap-4"},Je={class:"d-flex align-center gap-x-4"},Qe={key:1},Ge={class:"d-flex flex-column"},He={class:"text-base"},We={class:"text-sm"},$l={__name:"ptk",async setup(P){let T,k;const g=f({icon:null,title:null,text:null,color:null}),m=f(!1),r=f(""),u=f(10),y=f(1),A=f("nama"),d=f("ASC"),a=v=>{var n,x;v.sortBy.length&&(A.value=(n=v.sortBy[0])==null?void 0:n.key,d.value=(x=v.sortBy[0])==null?void 0:x.order)},L=[{title:"Ptk",key:"user",sortable:!1},{title:"nik",key:"nik",sortable:!1},{title:"tempat, tanggal lahir",key:"ttl",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],p=v=>{g.value=v,m.value=!0},{data:o,execute:B}=([T,k]=Te(()=>Ie(Ne("/table",{query:{data:"ptk",q:r,itemsPerPage:u,page:y,sortBy:A,orderBy:d}}))),T=await T,k(),T);o.value.color&&(g.value=o.value,m.value=!0);const b=W(()=>o.value.lists.data),O=W(()=>o.value.lists.total),q=W(()=>o.value.sekolah),U=f(!1),z=f(),C=f(),Ve=async v=>{z.value=v,C.value=!0},ve=async v=>{v&&await J(`/referensi/destroy/ptk/${z.value}`,{method:"DELETE",onResponse({request:n,response:x,options:N}){let E=x._data;g.value=E,m.value=!0,z.value=null,B()}})},M=f(!1),R=f(!1),F=f(),ke=async v=>{M.value=!0,F.value=v},ge=async v=>{R.value=!0,F.value=v};ie(m,()=>{m.value||B()});const be=async v=>{console.log(v);const n=new FormData;n.append("data","update-ptk");for(const[x,N]of Object.entries(v))n.append(x,N||"");await J("/referensi/store",{method:"POST",body:n,onResponse({request:x,response:N,options:E}){let H=N._data;g.value=H,m.value=!0,R.value=!1}})};return(v,n)=>{const x=$e,N=Y,E=qe("IconBtn"),H=Se,ye=ze,De=Ke,ce=je,Pe=we,Ue=_e;return V(),S("section",null,[e(Q,null,{default:t(()=>[e(G,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[s("div",Me,[e(x,{"model-value":l(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":n[0]||(n[0]=i=>u.value=parseInt(i,10))},null,8,["model-value"])]),e(fe),s("div",he,[e(N,{modelValue:l(r),"onUpdate:modelValue":n[1]||(n[1]=i=>D(r)?r.value=i:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),l(q)?(V(),w(K,{key:0,onClick:n[2]||(n[2]=i=>U.value=!0)},{default:t(()=>[n[14]||(n[14]=_("Tambah ")),e(j,{end:"",icon:"tabler-cloud-upload"})]),_:1})):X("",!0)])]),_:1}),e(Ee),e(xe,{"items-per-page":l(u),"onUpdate:itemsPerPage":n[4]||(n[4]=i=>D(u)?u.value=i:null),page:l(y),"onUpdate:page":n[5]||(n[5]=i=>D(y)?y.value=i:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(b),"items-length":l(O),headers:L,class:"text-no-wrap","onUpdate:options":a},{"item.user":t(({item:i})=>[s("div",Je,[e(de,{size:"34",variant:i.avatar?void 0:"tonal",color:i.avatar?void 0:"success"},{default:t(()=>[i.avatar?(V(),w(me,{key:0,src:i.avatar},null,8,["src"])):(V(),S("span",Qe,c(("avatarText"in v?v.avatarText:l(ae))(i.name)),1))]),_:2},1032,["variant","color"]),s("div",Ge,[s("h6",He,c(i.nama),1),s("div",We,c(i.email),1)])])]),"item.ttl":t(({item:i})=>[_(c(i.tempat_lahir)+", "+c(new Date(i.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)]),"item.actions":t(({item:i})=>[e(E,{onClick:ee=>Ve(i.ptk_id)},{default:t(()=>[e(j,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(E,{onClick:ee=>ke(i)},{default:t(()=>[e(j,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),e(E,{onClick:ee=>ge(i)},{default:t(()=>[e(j,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])]),bottom:t(()=>[e(H,{page:l(y),"onUpdate:page":n[3]||(n[3]=i=>D(y)?y.value=i:null),"items-per-page":l(u),"total-items":l(O)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ye,{"is-dialog-visible":l(U),"onUpdate:isDialogVisible":n[6]||(n[6]=i=>D(U)?U.value=i:null),onNotif:p,sekolah:l(q),"onUpdate:sekolah":n[7]||(n[7]=i=>D(q)?q.value=i:null)},null,8,["is-dialog-visible","sekolah"]),e(De,{"is-dialog-visible":l(M),"onUpdate:isDialogVisible":n[8]||(n[8]=i=>D(M)?M.value=i:null),detilPtk:l(F),"onUpdate:detilPtk":n[9]||(n[9]=i=>D(F)?F.value=i:null)},null,8,["is-dialog-visible","detilPtk"]),e(ce,{"is-dialog-visible":l(R),"onUpdate:isDialogVisible":n[10]||(n[10]=i=>D(R)?R.value=i:null),"detil-ptk":l(F),"onUpdate:detilPtk":n[11]||(n[11]=i=>D(F)?F.value=i:null),onSubmit:be},null,8,["is-dialog-visible","detil-ptk"]),l(g).color?(V(),w(Pe,{key:0,color:l(g).color,icon:l(g).icon,title:l(g).title,text:l(g).text,"disable-time-out":!1,isSnackbarVisible:l(m),"onUpdate:isSnackbarVisible":n[12]||(n[12]=i=>D(m)?m.value=i:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):X("",!0),e(Ue,{isDialogVisible:l(C),"onUpdate:isDialogVisible":n[13]||(n[13]=i=>D(C)?C.value=i:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:ve},null,8,["isDialogVisible"])])}}};export{$l as default};
