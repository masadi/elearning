import{a as ge}from"./formatters-DULOiX1-.js";import{V as F}from"./VCard-CKWvZIKx.js";import{V as z}from"./VCardText-7-DnPdVV.js";import{r as p,o as V,c as U,b as e,e as t,a2 as y,d,v as T,t as x,$ as D,m as u,a4 as h,F as O,a5 as X,ad as Z,ae as oe,a7 as J,aa as W,au as be,av as Ve,aj as xe,ak as ke,al as ye,Z as G,aw as _e,ax as he,am as Te,ay as De,az as Ce,aA as we,Y as R,aB as ne,aC as j,aD as M,aE as Se,aF as Be,f as q,h as ae,aG as Pe,w as Ue,y as le,a as $e}from"./main-_UyDX1Cm.js";import{V as H}from"./VDialog-BgT1kxRe.js";import{V as Ae,_ as Ie}from"./VFileInput-BGjhBxeA.js";import{V as Ne,_ as ie}from"./VForm-Bxek04Ew.js";import{$ as K}from"./api-CKhmVwiM.js";import{V as se}from"./VImg-DAW1K8Z2.js";import{V as re}from"./VSpacer-UaxfONkg.js";import{V as Ee,a as ze,_ as Fe,b as Re}from"./VDataTableServer-fkvCDuo6.js";import{u as qe}from"./useApi-BhdzjlcJ.js";import{c as Le}from"./createUrl-DM-zlvbG.js";import{V as Me}from"./VDivider-DJ8g7OsM.js";import{V as Oe}from"./VAvatar-D8tbOhAm.js";import{V as He}from"./VMenu-B8GGlsQ2.js";import{V as je,a as Q,b as Y}from"./VList-BdIzbkm7.js";import"./VOverlay-D9a2737b.js";import"./forwardRefs-DWGaNmQL.js";import"./dialog-transition-8vxjWSAI.js";import"./VTextField-Lxk1KEOO.js";import"./VChip-E_4suFIj.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VCheckboxBtn-C0oovqs5.js";const Qe={class:"text-lg font-weight-medium"},Ye={class:"text-h4 mb-4"},Ge={class:"text-h4 mb-4"},Ke={__name:"ConfirmDialog",props:{confirmationQuestion:{type:String,required:!0},isDialogVisible:{type:Boolean,required:!0},showNotif:{type:Boolean,default:!0},confirmTitle:{type:String,default:""},confirmMsg:{type:String,default:""},confirmColor:{type:String,default:"error"},cancelTitle:{type:String,default:"Batal"},cancelMsg:{type:String,default:"Aksi dibatalkan"}},emits:["update:isDialogVisible","confirm"],setup(a,{emit:v}){const l=a,m=v,r=p(!1),g=p(!1),f=C=>{m("update:isDialogVisible",C)},b=()=>{m("confirm",!0),f(!1),l.showNotif&&(r.value=!0)},_=()=>{m("confirm",!1),m("update:isDialogVisible",!1),g.value=!0};return(C,i)=>(V(),U(O,null,[e(H,{"max-width":"500","model-value":l.isDialogVisible,"onUpdate:modelValue":f},{default:t(()=>[e(F,{class:"text-center px-10 py-6"},{default:t(()=>[e(z,null,{default:t(()=>[e(y,{icon:"",variant:"outlined",color:"warning",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>i[4]||(i[4]=[d("span",{class:"text-5xl"},"!",-1)])),_:1}),d("h6",Qe,T(l.confirmationQuestion),1)]),_:1}),e(z,{class:"d-flex align-center justify-center gap-2"},{default:t(()=>[e(y,{variant:"elevated",onClick:b},{default:t(()=>i[5]||(i[5]=[x(" Yakin! ")])),_:1}),e(y,{color:"secondary",variant:"tonal",onClick:_},{default:t(()=>i[6]||(i[6]=[x(" Batal ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(H,{modelValue:u(r),"onUpdate:modelValue":i[1]||(i[1]=s=>h(r)?r.value=s:null),"max-width":"500"},{default:t(()=>[e(F,null,{default:t(()=>[e(z,{class:"text-center px-10 py-6"},{default:t(()=>[e(y,{icon:"",variant:"outlined",color:l.confirmColor,class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[e(D,{icon:"tabler-check",size:"38"})]),_:1},8,["color"]),d("h1",Ye,T(l.confirmTitle),1),d("p",null,T(l.confirmMsg),1),e(y,{color:"success",onClick:i[0]||(i[0]=s=>r.value=!1)},{default:t(()=>i[7]||(i[7]=[x(" Ok ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:u(g),"onUpdate:modelValue":i[3]||(i[3]=s=>h(g)?g.value=s:null),"max-width":"500"},{default:t(()=>[e(F,null,{default:t(()=>[e(z,{class:"text-center px-10 py-6"},{default:t(()=>[e(y,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>i[8]||(i[8]=[d("span",{class:"text-5xl font-weight-light"},"X",-1)])),_:1}),d("h1",Ge,T(l.cancelTitle),1),d("p",null,T(l.cancelMsg),1),e(y,{color:"success",onClick:i[2]||(i[2]=s=>g.value=!1)},{default:t(()=>i[9]||(i[9]=[x(" Ok ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Xe=X({text:String,...Z(),...oe()},"VToolbarTitle"),ue=J()({name:"VToolbarTitle",props:Xe(),setup(a,v){let{slots:l}=v;return W(()=>{const m=!!(l.default||l.text||a.text);return e(a.tag,{class:["v-toolbar-title",a.class],style:a.style},{default:()=>{var r;return[m&&e("div",{class:"v-toolbar-title__placeholder"},[l.text?l.text():a.text,(r=l.default)==null?void 0:r.call(l)])]}})}),{}}}),Ze=[null,"prominent","default","comfortable","compact"],Je=X({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:a=>Ze.includes(a)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...be(),...Z(),...Ve(),...xe(),...oe({tag:"header"}),...ke()},"VToolbar"),We=J()({name:"VToolbar",props:Je(),setup(a,v){var c;let{slots:l}=v;const{backgroundColorClasses:m,backgroundColorStyles:r}=ye(G(a,"color")),{borderClasses:g}=_e(a),{elevationClasses:f}=he(a),{roundedClasses:b}=Te(a),{themeClasses:_}=De(a),{rtlClasses:C}=Ce(),i=we(!!(a.extended||(c=l.extension)!=null&&c.call(l))),s=R(()=>parseInt(Number(a.height)+(a.density==="prominent"?Number(a.height):0)-(a.density==="comfortable"?8:0)-(a.density==="compact"?16:0),10)),w=R(()=>i.value?parseInt(Number(a.extensionHeight)+(a.density==="prominent"?Number(a.extensionHeight):0)-(a.density==="comfortable"?4:0)-(a.density==="compact"?8:0),10):0);return ne({VBtn:{variant:"text"}}),W(()=>{var P;const $=!!(a.title||l.title),A=!!(l.image||a.image),S=(P=l.extension)==null?void 0:P.call(l);return i.value=!!(a.extended||S),e(a.tag,{class:["v-toolbar",{"v-toolbar--absolute":a.absolute,"v-toolbar--collapse":a.collapse,"v-toolbar--flat":a.flat,"v-toolbar--floating":a.floating,[`v-toolbar--density-${a.density}`]:!0},m.value,g.value,f.value,b.value,_.value,C.value,a.class],style:[r.value,a.style]},{default:()=>[A&&e("div",{key:"image",class:"v-toolbar__image"},[l.image?e(j,{key:"image-defaults",disabled:!a.image,defaults:{VImg:{cover:!0,src:a.image}}},l.image):e(se,{key:"image-img",cover:!0,src:a.image},null)]),e(j,{defaults:{VTabs:{height:M(s.value)}}},{default:()=>{var B,N,I;return[e("div",{class:"v-toolbar__content",style:{height:M(s.value)}},[l.prepend&&e("div",{class:"v-toolbar__prepend"},[(B=l.prepend)==null?void 0:B.call(l)]),$&&e(ue,{key:"title",text:a.title},{text:l.title}),(N=l.default)==null?void 0:N.call(l),l.append&&e("div",{class:"v-toolbar__append"},[(I=l.append)==null?void 0:I.call(l)])])]}}),e(j,{defaults:{VTabs:{height:M(w.value)}}},{default:()=>[e(Se,null,{default:()=>[i.value&&e("div",{class:"v-toolbar__extension",style:{height:M(w.value)}},[S])]})]})]})}),{contentHeight:s,extensionHeight:w}}}),et=X({...Z(),...Be({variant:"text"})},"VToolbarItems"),tt=J()({name:"VToolbarItems",props:et(),setup(a,v){let{slots:l}=v;return ne({VBtn:{color:G(a,"color"),height:"inherit",variant:G(a,"variant")}}),W(()=>{var m;return e("div",{class:["v-toolbar-items",a.class],style:a.style},[(m=l.default)==null?void 0:m.call(l)])}),{}}}),at={__name:"AddPtkDialog",props:{sekolah:{type:Object,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","notif"],setup(a,{emit:v}){const l=a,m=v,r=p(""),g=async()=>{await K("/referensi/store",{method:"POST",body:{data:"import-ptk",sekolah_id:l.sekolah.sekolah_id,item:_.value},onResponse({request:i,response:s,options:w}){let c=s._data;m("update:isDialogVisible",!1),m("notif",c),_.value=[],r.value=""}})},f=()=>{m("update:isDialogVisible",!1),r.value=""},b=p(!1),_=p([]),C=async i=>{const s=new FormData;s.append("file_excel",i),await K("/referensi/import",{method:"POST",body:s,onResponse({request:w,response:c,options:$}){let A=c._data;_.value=A.imported_data,b.value=!0}})};return(i,s)=>{const w=ie;return V(),q(H,{fullscreen:"",scrim:!1,scrollable:"","content-class":"scrollable-dialog",transition:"dialog-bottom-transition","model-value":l.isDialogVisible,"onUpdate:modelValue":f},{default:t(()=>[e(F,null,{default:t(()=>[d("div",null,[e(We,{color:"primary"},{default:t(()=>[e(y,{icon:"",variant:"plain",onClick:f},{default:t(()=>[e(D,{color:"white",icon:"tabler-x"})]),_:1}),e(ue,null,{default:t(()=>s[1]||(s[1]=[x("Tambah PTK")])),_:1}),e(re),e(tt,null,{default:t(()=>[e(y,{variant:"text",href:"/unduhan/template-ptk",target:"_blank"},{default:t(()=>[s[2]||(s[2]=x("Unduh Template ")),e(D,{end:"",icon:"tabler-cloud-download"})]),_:1}),e(y,{variant:"text",onClick:g},{default:t(()=>s[3]||(s[3]=[x("Simpan")])),_:1})]),_:1})]),_:1})]),e(z,null,{default:t(()=>[e(u(Ne),{ref:"refPermissionForm"},{default:t(()=>[e(Ae,{accept:".xlsx",modelValue:u(r),"onUpdate:modelValue":[s[0]||(s[0]=c=>h(r)?r.value=c:null),C],label:"Import Excel"},null,8,["modelValue"]),e(Ee,{class:"permission-table text-no-wrap mb-6 mt-4"},{default:t(()=>[s[4]||(s[4]=d("thead",null,[d("tr",null,[d("th",null,"no"),d("th",null,"nama"),d("th",null,"nuptk"),d("th",null,"email"),d("th",null,"jenis_kelamin"),d("th",null,"tempat_lahir"),d("th",null,"tanggal_lahir"),d("th",null,"nik")])],-1)),d("tbody",null,[(V(!0),U(O,null,ae(u(_),(c,$)=>(V(),U("tr",{key:c.no},[(V(!0),U(O,null,ae(c,(A,S,P)=>(V(),U("td",null,[S=="no"?(V(),U(O,{key:0},[x(T(A),1)],64)):(V(),q(w,{key:1,modelValue:c[S],"onUpdate:modelValue":B=>c[S]=B,placeholder:"Placeholder Text"},null,8,["modelValue","onUpdate:modelValue"]))]))),256))]))),128))])]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["model-value"])}}},lt={class:"d-flex gap-2 align-center"},ot={class:"d-flex align-center flex-wrap gap-4"},nt={class:"d-flex align-center gap-x-4"},it={key:1},st={class:"d-flex flex-column"},rt={class:"text-base"},ut={class:"text-sm"},Nt={__name:"ptk",async setup(a){let v,l;const m=p({icon:null,title:null,text:null,color:null}),r=p(!1),g=p(""),f=p(10),b=p(1),_=p("nama"),C=p("ASC"),i=k=>{var n,E;k.sortBy.length&&(_.value=(n=k.sortBy[0])==null?void 0:n.key,C.value=(E=k.sortBy[0])==null?void 0:E.order)},s=[{title:"Ptk",key:"user",sortable:!1},{title:"nik",key:"nik",sortable:!1},{title:"tempat, tanggal lahir",key:"ttl",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],w=k=>{m.value=k,r.value=!0},{data:c,execute:$}=([v,l]=Pe(()=>qe(Le("/table",{query:{data:"ptk",q:g,itemsPerPage:f,page:b,sortBy:_,orderBy:C}}))),v=await v,l(),v);c.value.color&&(m.value=c.value,r.value=!0);const A=R(()=>c.value.ptk.data),S=R(()=>c.value.ptk.total),P=R(()=>c.value.sekolah),B=p(!1),N=p(),I=p(),ee=async k=>{N.value=k,I.value=!0},de=async k=>{k&&(await K(`/referensi/destroy/ptk/${N.value}`,{method:"DELETE",onResponse({request:n,response:E,options:te}){let L=E._data;m.value=L,r.value=!0,N.value=null,$()}}),$())};return Ue(r,()=>{r.value||$()}),(k,n)=>{const E=Fe,te=ie,L=$e("IconBtn"),me=Re,ce=at,fe=Ie,pe=Ke;return V(),U("section",null,[e(F,null,{default:t(()=>[e(z,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[d("div",lt,[e(E,{"model-value":u(f),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":n[0]||(n[0]=o=>f.value=parseInt(o,10))},null,8,["model-value"])]),e(re),d("div",ot,[e(te,{modelValue:u(g),"onUpdate:modelValue":n[1]||(n[1]=o=>h(g)?g.value=o:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),u(P)?(V(),q(y,{key:0,onClick:n[2]||(n[2]=o=>B.value=!0)},{default:t(()=>[n[10]||(n[10]=x("Tambah ")),e(D,{end:"",icon:"tabler-cloud-upload"})]),_:1})):le("",!0)])]),_:1}),e(Me),e(ze,{"items-per-page":u(f),"onUpdate:itemsPerPage":n[4]||(n[4]=o=>h(f)?f.value=o:null),page:u(b),"onUpdate:page":n[5]||(n[5]=o=>h(b)?b.value=o:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:u(A),"items-length":u(S),headers:s,class:"text-no-wrap","onUpdate:options":i},{"item.user":t(({item:o})=>[d("div",nt,[e(Oe,{size:"34",variant:o.avatar?void 0:"tonal",color:o.avatar?void 0:"success"},{default:t(()=>[o.avatar?(V(),q(se,{key:0,src:o.avatar},null,8,["src"])):(V(),U("span",it,T(("avatarText"in k?k.avatarText:u(ge))(o.name)),1))]),_:2},1032,["variant","color"]),d("div",st,[d("h6",rt,T(o.nama),1),d("div",ut,T(o.email),1)])])]),"item.ttl":t(({item:o})=>[x(T(o.tempat_lahir)+", "+T(new Date(o.tanggal_lahir).toLocaleString("id-ID",{hour12:!1,day:"numeric",month:"long",year:"numeric"})),1)]),"item.actions":t(({item:o})=>[e(L,{onClick:ve=>ee(o.ptk_id)},{default:t(()=>[e(D,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(L,null,{default:t(()=>[e(D,{icon:"tabler-eye"})]),_:1}),e(y,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(D,{icon:"tabler-dots-vertical"}),e(He,{activator:"parent"},{default:t(()=>[e(je,null,{default:t(()=>[e(Q,{to:{name:"apps-user-view-id",params:{id:o.ptk_id}}},{prepend:t(()=>[e(D,{icon:"tabler-eye"})]),default:t(()=>[e(Y,null,{default:t(()=>n[11]||(n[11]=[x("View")])),_:1})]),_:2},1032,["to"]),e(Q,{link:""},{prepend:t(()=>[e(D,{icon:"tabler-pencil"})]),default:t(()=>[e(Y,null,{default:t(()=>n[12]||(n[12]=[x("Edit")])),_:1})]),_:1}),e(Q,{onClick:ve=>ee(o.ptk_id)},{prepend:t(()=>[e(D,{icon:"tabler-trash"})]),default:t(()=>[e(Y,null,{default:t(()=>n[13]||(n[13]=[x("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(me,{page:u(b),"onUpdate:page":n[3]||(n[3]=o=>h(b)?b.value=o:null),"items-per-page":u(f),"total-items":u(S)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ce,{"is-dialog-visible":u(B),"onUpdate:isDialogVisible":n[6]||(n[6]=o=>h(B)?B.value=o:null),onNotif:w,sekolah:u(P),"onUpdate:sekolah":n[7]||(n[7]=o=>h(P)?P.value=o:null)},null,8,["is-dialog-visible","sekolah"]),u(m).color?(V(),q(fe,{key:0,color:u(m).color,icon:u(m).icon,title:u(m).title,text:u(m).text,"disable-time-out":!1,isSnackbarVisible:u(r),"onUpdate:isSnackbarVisible":n[8]||(n[8]=o=>h(r)?r.value=o:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):le("",!0),e(pe,{isDialogVisible:u(I),"onUpdate:isDialogVisible":n[9]||(n[9]=o=>h(I)?I.value=o:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:de},null,8,["isDialogVisible"])])}}};export{Nt as default};
