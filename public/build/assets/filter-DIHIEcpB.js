import{m as Pe,u as xe,V as de}from"./VTextField-BaS9oZAw.js";import{a5 as j,ad as pe,a7 as se,bd as Ve,w as H,aa as ie,b as g,F as W,q as K,b5 as Fe,ay as L,b1 as oe,r as _,Y as D,a$ as be,bl as ne,bz as Ie,as as we,az as re,bA as Te,bk as Ce,bB as Ae,Z as Me,aX as Re,aN as J,G as De,ah as Oe,a6 as Be,an as Le,a8 as me,$ as ve,aA as _e,aB as Ee,t as Ke,aF as ue,aD as he,aE as ge,m as q,bx as He}from"./main-CCs6bh3s.js";import{f as ze}from"./forwardRefs-DWGaNmQL.js";import{m as Ne,u as Ue,V as je,a as ye}from"./VList-CmeArdoj.js";import{m as $e}from"./VImg-CVm_ZQhA.js";import{V as qe}from"./dialog-transition-BhkjpEgr.js";import{V as We}from"./VMenu-r7Cn3oJn.js";import{g as Xe}from"./VOverlay-CbalWj9L.js";import{V as Ye}from"./VCheckboxBtn-G6A6nYkI.js";import{V as Ge}from"./VAvatar-pIOnFHia.js";import{V as Qe}from"./VChip-DeHB0WxW.js";const Ze=j({renderless:Boolean,...pe()},"VVirtualScrollItem"),Je=se()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ze(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:i,slots:r}=s;const{resizeRef:d,contentRect:v}=Ve(void 0,"border");H(()=>{var o;return(o=v.value)==null?void 0:o.height},o=>{o!=null&&i("update:height",o)}),ie(()=>{var o,n;return e.renderless?g(W,null,[(o=r.default)==null?void 0:o.call(r,{itemRef:d})]):g("div",K({ref:d,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(n=r.default)==null?void 0:n.call(r)])})}}),et=-1,tt=1,ae=100,lt=j({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function nt(e,s){const l=Fe(),i=L(0);oe(()=>{i.value=parseFloat(e.itemHeight||0)});const r=L(0),d=L(Math.ceil((parseInt(e.height)||l.height.value)/(i.value||16))||1),v=L(0),o=L(0),n=_(),m=_();let k=0;const{resizeRef:x,contentRect:u}=Ve();oe(()=>{x.value=n.value});const f=D(()=>{var t;return n.value===document.documentElement?l.height.value:((t=u.value)==null?void 0:t.height)||parseInt(e.height)||0}),I=D(()=>!!(n.value&&m.value&&f.value&&i.value));let V=Array.from({length:s.value.length}),y=Array.from({length:s.value.length});const p=L(0);let w=-1;function C(t){return V[t]||i.value}const A=Ie(()=>{const t=performance.now();y[0]=0;const a=s.value.length;for(let h=1;h<=a-1;h++)y[h]=(y[h-1]||0)+C(h-1);p.value=Math.max(p.value,performance.now()-t)},p),X=H(I,t=>{t&&(X(),k=m.value.offsetTop,A.immediate(),O(),~w&&we(()=>{re&&window.requestAnimationFrame(()=>{Z(w),w=-1})}))});be(()=>{A.clear()});function ee(t,a){const h=V[t],b=i.value;i.value=b?Math.min(i.value,a):a,(h!==a||b!==i.value)&&(V[t]=a,A())}function F(t){return t=ne(t,0,s.value.length-1),y[t]||0}function Y(t){return at(y,t)}let z=0,E=0,$=0;H(f,(t,a)=>{a&&(O(),t<a&&requestAnimationFrame(()=>{E=0,O()}))});function G(){if(!n.value||!m.value)return;const t=n.value.scrollTop,a=performance.now();a-$>500?(E=Math.sign(t-z),k=m.value.offsetTop):E=t-z,z=t,$=a,O()}function N(){!n.value||!m.value||(E=0,$=0,O())}let Q=-1;function O(){cancelAnimationFrame(Q),Q=requestAnimationFrame(te)}function te(){if(!n.value||!f.value)return;const t=z-k,a=Math.sign(E),h=Math.max(0,t-ae),b=ne(Y(h),0,s.value.length),M=t+f.value+ae,c=ne(Y(M)+1,b+1,s.value.length);if((a!==et||b<r.value)&&(a!==tt||c>d.value)){const S=F(r.value)-F(b),P=F(c)-F(d.value);Math.max(S,P)>ae?(r.value=b,d.value=c):(b<=0&&(r.value=b),c>=s.value.length&&(d.value=c))}v.value=F(r.value),o.value=F(s.value.length)-F(d.value)}function Z(t){const a=F(t);!n.value||t&&!a?w=t:n.value.scrollTop=a}const le=D(()=>s.value.slice(r.value,d.value).map((t,a)=>({raw:t,index:a+r.value})));return H(s,()=>{V=Array.from({length:s.value.length}),y=Array.from({length:s.value.length}),A.immediate(),O()},{deep:!0}),{calculateVisibleItems:O,containerRef:n,markerRef:m,computedItems:le,paddingTop:v,paddingBottom:o,scrollToIndex:Z,handleScroll:G,handleScrollend:N,handleItemResize:ee}}function at(e,s){let l=e.length-1,i=0,r=0,d=null,v=-1;if(e[l]<s)return l;for(;i<=l;)if(r=i+l>>1,d=e[r],d>s)l=r-1;else if(d<s)v=r,i=r+1;else return d===s?r:i;return v}const ot=j({items:{type:Array,default:()=>[]},renderless:Boolean,...lt(),...pe(),...Te()},"VVirtualScroll"),rt=se()({name:"VVirtualScroll",props:ot(),setup(e,s){let{slots:l}=s;const i=Ce("VVirtualScroll"),{dimensionStyles:r}=Ae(e),{calculateVisibleItems:d,containerRef:v,markerRef:o,handleScroll:n,handleScrollend:m,handleItemResize:k,scrollToIndex:x,paddingTop:u,paddingBottom:f,computedItems:I}=nt(e,Me(e,"items"));return Re(()=>e.renderless,()=>{function V(){var w,C;const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[p]("scroll",n,{passive:!0}),document[p]("scrollend",m)):((w=v.value)==null||w[p]("scroll",n,{passive:!0}),(C=v.value)==null||C[p]("scrollend",m))}De(()=>{v.value=Xe(i.vnode.el,!0),V(!0)}),be(V)}),ie(()=>{const V=I.value.map(y=>g(Je,{key:y.index,renderless:e.renderless,"onUpdate:height":p=>k(y.index,p)},{default:p=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:y.raw,index:y.index,...p})}}));return e.renderless?g(W,null,[g("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:J(u.value)}},null),V,g("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:J(f.value)}},null)]):g("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:n,onScrollend:m,style:[r.value,e.style]},[g("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:J(u.value),paddingBottom:J(f.value)}},[V])])}),{calculateVisibleItems:d,scrollToIndex:x}}});function ut(e,s){const l=L(!1);let i;function r(o){cancelAnimationFrame(i),l.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{l.value=!1})})}async function d(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(l.value){const n=H(l,()=>{n(),o()})}else o()})}async function v(o){var k,x;if(o.key==="Tab"&&((k=s.value)==null||k.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const n=(x=e.value)==null?void 0:x.$el;if(!n)return;(o.key==="Home"||o.key==="End")&&n.scrollTo({top:o.key==="Home"?0:n.scrollHeight,behavior:"smooth"}),await d();const m=n.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=n.getBoundingClientRect().top;for(const f of m)if(f.getBoundingClientRect().top>=u){f.focus();break}}else{const u=n.getBoundingClientRect().bottom;for(const f of[...m].reverse())if(f.getBoundingClientRect().bottom<=u){f.focus();break}}}return{onScrollPassive:r,onKeydown:v}}const st=j({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Oe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ne({itemChildren:!1})},"Select"),it=j({...st(),...Be(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...$e({transition:{component:qe}})},"VSelect"),kt=se()({name:"VSelect",props:it(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:i}=Le(),r=_(),d=_(),v=_(),o=me(e,"menu"),n=D({get:()=>o.value,set:t=>{var a;o.value&&!t&&((a=d.value)!=null&&a.Î¨openChildren.size)||(o.value=t)}}),{items:m,transformIn:k,transformOut:x}=Ue(e),u=me(e,"modelValue",[],t=>k(t===null?[null]:ue(t)),t=>{const a=x(t);return e.multiple?a:a[0]??null}),f=D(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),I=xe(e),V=D(()=>u.value.map(t=>t.value)),y=L(!1),p=D(()=>n.value?e.closeText:e.openText);let w="",C;const A=D(()=>e.hideSelected?m.value.filter(t=>!u.value.some(a=>e.valueComparator(a,t))):m.value),X=D(()=>e.hideNoData&&!A.value.length||I.isReadonly.value||I.isDisabled.value),ee=D(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),F=_(),Y=ut(F,r);function z(t){e.openOnClear&&(n.value=!0)}function E(){X.value||(n.value=!n.value)}function $(t){he(t)&&G(t)}function G(t){var M,c;if(!t.key||I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(n.value=!0),["Escape","Tab"].includes(t.key)&&(n.value=!1),t.key==="Home"?(M=F.value)==null||M.focus("first"):t.key==="End"&&((c=F.value)==null||c.focus("last"));const a=1e3;if(e.multiple||!he(t))return;const h=performance.now();h-C>a&&(w=""),w+=t.key.toLowerCase(),C=h;const b=m.value.find(S=>S.title.toLowerCase().startsWith(w));if(b!==void 0){u.value=[b];const S=A.value.indexOf(b);re&&window.requestAnimationFrame(()=>{var P;S>=0&&((P=v.value)==null||P.scrollToIndex(S))})}}function N(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const h=u.value.findIndex(M=>e.valueComparator(M.value,t.value)),b=a??!~h;if(~h){const M=b?[...u.value,t]:[...u.value];M.splice(h,1),u.value=M}else b&&(u.value=[...u.value,t])}else{const h=a!==!1;u.value=h?[t]:[],we(()=>{n.value=!1})}}function Q(t){var a;(a=F.value)!=null&&a.$el.contains(t.relatedTarget)||(n.value=!1)}function O(){var t;e.eager&&((t=v.value)==null||t.calculateVisibleItems())}function te(){var t;y.value&&((t=r.value)==null||t.focus())}function Z(t){y.value=!0}function le(t){if(t==null)u.value=[];else if(ge(r.value,":autofill")||ge(r.value,":-webkit-autofill")){const a=m.value.find(h=>h.title===t);a&&N(a)}else r.value&&(r.value.value="")}return H(n,()=>{if(!e.hideSelected&&n.value&&u.value.length){const t=A.value.findIndex(a=>u.value.some(h=>e.valueComparator(h.value,a.value)));re&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=v.value)==null||a.scrollToIndex(t))})}}),H(()=>e.items,(t,a)=>{n.value||y.value&&!a.length&&t.length&&(n.value=!0)}),ie(()=>{const t=!!(e.chips||l.chip),a=!!(!e.hideNoData||A.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),h=u.value.length>0,b=de.filterProps(e),M=h||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return g(de,K({ref:r},b,{modelValue:u.value.map(c=>c.props.value).join(", "),"onUpdate:modelValue":le,focused:y.value,"onUpdate:focused":c=>y.value=c,validationValue:u.externalValue,counterValue:f.value,dirty:h,class:["v-select",{"v-select--active-menu":n.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:M,"onClick:clear":z,"onMousedown:control":E,onBlur:Q,onKeydown:G,"aria-label":i(p.value),title:i(p.value)}),{...l,default:()=>g(W,null,[g(We,K({ref:d,modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,activator:"parent",contentClass:"v-select__content",disabled:X.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:O,onAfterLeave:te},ee.value),{default:()=>[a&&g(je,K({ref:F,selected:V.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:$,onFocusin:Z,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Y,e.listProps),{default:()=>{var c,S,P;return[(c=l["prepend-item"])==null?void 0:c.call(l),!A.value.length&&!e.hideNoData&&(((S=l["no-data"])==null?void 0:S.call(l))??g(ye,{title:i(e.noDataText)},null)),g(rt,{ref:v,renderless:!0,items:A.value},{default:B=>{var fe;let{item:R,index:U,itemRef:T}=B;const ce=K(R.props,{ref:T,key:U,onClick:()=>N(R,null)});return((fe=l.item)==null?void 0:fe.call(l,{item:R,index:U,props:ce}))??g(ye,K(ce,{role:"option"}),{prepend:Se=>{let{isSelected:ke}=Se;return g(W,null,[e.multiple&&!e.hideSelected?g(Ye,{key:R.value,modelValue:ke,ripple:!1,tabindex:"-1"},null):void 0,R.props.prependAvatar&&g(Ge,{image:R.props.prependAvatar},null),R.props.prependIcon&&g(ve,{icon:R.props.prependIcon},null)])}})}}),(P=l["append-item"])==null?void 0:P.call(l)]}})]}),u.value.map((c,S)=>{function P(T){T.stopPropagation(),T.preventDefault(),N(c,!1)}const B={"onClick:close":P,onKeydown(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),P(T))},onMousedown(T){T.preventDefault(),T.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},R=t?!!l.chip:!!l.selection,U=R?_e(t?l.chip({item:c,index:S,props:B}):l.selection({item:c,index:S})):void 0;if(!(R&&!U))return g("div",{key:c.value,class:"v-select__selection"},[t?l.chip?g(Ee,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[U]}):g(Qe,K({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},B),null):U??g("span",{class:"v-select__selection-text"},[c.title,e.multiple&&S<u.value.length-1&&g("span",{class:"v-select__selection-comma"},[Ke(",")])])])})]),"append-inner":function(){var B;for(var c=arguments.length,S=new Array(c),P=0;P<c;P++)S[P]=arguments[P];return g(W,null,[(B=l["append-inner"])==null?void 0:B.call(l,...S),e.menuIcon?g(ve,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),ze({isFocused:y,menu:n,select:N},r)}}),ct=(e,s,l)=>e==null||s==null?-1:e.toString().toLocaleLowerCase().indexOf(s.toString().toLocaleLowerCase()),Pt=j({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ft(e,s,l){var o;const i=[],r=(l==null?void 0:l.default)??ct,d=l!=null&&l.filterKeys?ue(l.filterKeys):!1,v=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;e:for(let n=0;n<e.length;n++){const[m,k=m]=ue(e[n]),x={},u={};let f=-1;if((s||v>0)&&!(l!=null&&l.noFilter)){if(typeof m=="object"){const y=d||Object.keys(k);for(const p of y){const w=He(k,p),C=(o=l==null?void 0:l.customKeyFilter)==null?void 0:o[p];if(f=C?C(w,s,m):r(w,s,m),f!==-1&&f!==!1)C?x[p]=f:u[p]=f;else if((l==null?void 0:l.filterMode)==="every")continue e}}else f=r(m,s,m),f!==-1&&f!==!1&&(u.title=f);const I=Object.keys(u).length,V=Object.keys(x).length;if(!I&&!V||(l==null?void 0:l.filterMode)==="union"&&V!==v&&!I||(l==null?void 0:l.filterMode)==="intersection"&&(V!==v||!I))continue}i.push({index:n,matches:{...u,...x}})}return i}function xt(e,s,l,i){const r=_([]),d=_(new Map),v=D(()=>i!=null&&i.transform?q(s).map(n=>[n,i.transform(n)]):q(s));oe(()=>{const n=typeof l=="function"?l():q(l),m=typeof n!="string"&&typeof n!="number"?"":String(n),k=ft(v.value,m,{customKeyFilter:{...e.customKeyFilter,...q(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),x=q(s),u=[],f=new Map;k.forEach(I=>{let{index:V,matches:y}=I;const p=x[V];u.push(p),f.set(p.value,y)}),r.value=u,d.value=f});function o(n){return d.value.get(n.value)}return{filteredItems:r,filteredMatches:d,getMatches:o}}export{rt as V,st as a,ut as b,kt as c,Pt as m,xt as u};
