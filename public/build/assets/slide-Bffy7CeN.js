import{_ as Z}from"./ConfirmDialog-BrL6IjkW.js";import{_ as ee}from"./ShowAlert-D1KATX7J.js";import{r as z}from"./validators-BHkKs9Dp.js";import{r as n,o as I,h as G,w as o,a as e,u as l,k as f,l as te,b as S,g as L,f as N,p as ae,q as T,j as le,c as oe,s as ie,e as se,V as O,t as ne}from"./main-yvfEIIW0.js";import{_ as re}from"./DialogCloseBtn-CYiVcKCP.js";import{$ as M}from"./api-jalVci7s.js";import{V as Q}from"./VCard-Bb3Rmece.js";import{V as me}from"./VForm-BAYT4doE.js";import{V as E}from"./VCardText-C8GTWuil.js";import{V as P,a as D}from"./VRow-DhFN9lGJ.js";import{V as ue}from"./VAutocomplete-CA2jQTgJ.js";import{V as de}from"./VFileInput-klnNhRzE.js";import{V as pe}from"./VDialog-DJHs8-SF.js";import{V as fe,_ as ge}from"./VDataTableServer-BZmawqTc.js";import{_ as ce}from"./AppTextField-DiGf7qwU.js";import{_ as ve}from"./AppSelect--tfOOpTQ.js";import{u as Ve}from"./useApi-Bqt6EVLf.js";import{c as be}from"./createUrl-B8iPlEXU.js";import{V as ke}from"./VSpacer-CgSbrA8G.js";import{V as _e}from"./VDivider-T-j3Cuhj.js";import{V as ye}from"./VImg-CB6towT_.js";import"./VOverlay-DP1S7Gh_.js";import"./forwardRefs-D9kYFWgq.js";import"./index-BxkgbwWS.js";import"./VAvatar-Dty0-JT_.js";import"./VInput-BjkhYXIf.js";/* empty css              */import"./VTextField-BDOqLPN7.js";import"./VList-CyDqD-jZ.js";import"./VMenu-BIVqrvA6.js";import"./dialog-transition-CS_7CWou.js";import"./VCheckboxBtn-CN1HoikX.js";import"./VSelectionControl-DlpeaUR5.js";import"./VChip-n8Xrwzcp.js";const De={__name:"AddSlideDialog",props:{isDialogVisible:{type:Boolean,required:!0},sekolah:{type:Array,required:!0},kontenType:{type:String,required:!0}},emits:["update:isDialogVisible","notif"],setup(w,{emit:b}){const k=w,r=b,i=n({sekolah_id:null,gambar:null,data:k.kontenType}),g=n(!1),m=n(),p=async()=>{var u;(u=m.value)==null||u.validate().then(async({valid:s})=>{if(s){const c=new FormData;c.append("data",i.value.data??""),c.append("sekolah_id",i.value.sekolah_id??""),c.append("gambar",i.value.gambar??""),await M("/konten/store",{method:"POST",body:c,onResponse({request:v,response:V,options:C}){let U=V._data;r("notif",U),_()}})}})},_=()=>{r("update:isDialogVisible",!1),i.value={sekolah_id:null,gambar:null,data:k.kontenType},m.value.resetValidation()};return(u,s)=>{const c=re;return I(),G(pe,{width:"500","model-value":k.isDialogVisible,"onUpdate:modelValue":_},{default:o(()=>[e(c,{onClick:_}),e(Q,{title:"Upload Slide"},{default:o(()=>[e(l(me),{ref_key:"refForm",ref:m,modelValue:l(g),"onUpdate:modelValue":s[2]||(s[2]=v=>f(g)?g.value=v:null),onSubmit:te(p,["prevent"])},{default:o(()=>[e(E,null,{default:o(()=>[e(P,null,{default:o(()=>[e(D,{cols:"12"},{default:o(()=>[e(P,{"no-gutters":""},{default:o(()=>[e(D,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>s[3]||(s[3]=[S("label",{class:"v-label text-body-2 text-high-emphasis",for:"sekolah_id"},"Sekolah",-1)])),_:1}),e(D,{cols:"12",md:"9"},{default:o(()=>[e(ue,{modelValue:l(i).sekolah_id,"onUpdate:modelValue":s[0]||(s[0]=v=>l(i).sekolah_id=v),variant:"outlined",items:w.sekolah,"item-title":"nama","item-value":"sekolah_id",placeholder:"== Pilih Sekolah ==",rules:["requiredValidator"in u?u.requiredValidator:l(z)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),e(D,{cols:"12"},{default:o(()=>[e(P,{"no-gutters":""},{default:o(()=>[e(D,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>s[4]||(s[4]=[S("label",{class:"v-label text-body-2 text-high-emphasis",for:"gambar"},"Gambar",-1)])),_:1}),e(D,{cols:"12",md:"9"},{default:o(()=>[e(de,{accept:"image/*",modelValue:l(i).gambar,"onUpdate:modelValue":s[1]||(s[1]=v=>l(i).gambar=v),rules:["requiredValidator"in u?u.requiredValidator:l(z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"d-flex justify-end"},{default:o(()=>[e(L,{type:"submit"},{default:o(()=>s[5]||(s[5]=[N(" Simpan ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}},he={class:"d-flex gap-2 align-center"},xe={class:"d-flex align-center flex-wrap gap-4"},F="slide",it={__name:"slide",async setup(w){let b,k;const r=n({icon:null,title:null,text:null,color:null}),i=n(!1),g=n(""),m=n(10),p=n(1),_=n("created_at"),u=n("DESC"),s=d=>{var t,y;d.sortBy.length&&(_.value=(t=d.sortBy[0])==null?void 0:t.key,u.value=(y=d.sortBy[0])==null?void 0:y.order)},c=[{title:"sekolah",key:"sekolah",sortable:!1},{title:"gambar",key:"gambar",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1}],v=d=>{r.value=d,i.value=!0},{data:V,execute:C}=([b,k]=ae(()=>Ve(be("/table",{query:{data:F,q:g,itemsPerPage:m,page:p,sortBy:_,orderBy:u}}))),b=await b,k(),b);V.value.color&&(r.value=V.value,i.value=!0);const U=T(()=>V.value.lists.data),R=T(()=>V.value.lists.total),A=T(()=>V.value.sekolah),h=n(!1),q=n(),x=n(),H=async d=>{q.value=d,x.value=!0},J=async d=>{d&&await M(`/konten/destroy/slide/${q.value}`,{method:"DELETE",onResponse({request:t,response:y,options:j}){let B=y._data;r.value=B,i.value=!0,q.value=null,C()}})};return le(i,()=>{i.value||C()}),(d,t)=>{const y=ve,j=ce,B=se("IconBtn"),K=ge,W=De,X=ee,Y=Z;return I(),oe("section",null,[e(Q,null,{default:o(()=>[e(E,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[S("div",he,[e(y,{"model-value":l(m),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=parseInt(a,10))},null,8,["model-value"])]),e(ke),S("div",xe,[e(j,{modelValue:l(g),"onUpdate:modelValue":t[1]||(t[1]=a=>f(g)?g.value=a:null),placeholder:"Cari...",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(L,{onClick:t[2]||(t[2]=a=>h.value=!0)},{default:o(()=>[t[11]||(t[11]=N("Tambah ")),e(O,{end:"",icon:"tabler-cloud-upload"})]),_:1})])]),_:1}),e(_e),e(fe,{"items-per-page":l(m),"onUpdate:itemsPerPage":t[4]||(t[4]=a=>f(m)?m.value=a:null),page:l(p),"onUpdate:page":t[5]||(t[5]=a=>f(p)?p.value=a:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(U),"items-length":l(R),headers:c,class:"text-no-wrap","onUpdate:options":s},{"item.sekolah":o(({item:a})=>{var $;return[N(ne((($=a.sekolah)==null?void 0:$.nama)??"-"),1)]}),"item.gambar":o(({item:a})=>[e(ye,{fluid:"",src:`/storage/images/${a.gambar}`,"max-width":"200","max-height":"100"},null,8,["src"])]),"item.actions":o(({item:a})=>[e(B,{onClick:$=>H(a.id)},{default:o(()=>[e(O,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:o(()=>[e(K,{page:l(p),"onUpdate:page":t[3]||(t[3]=a=>f(p)?p.value=a:null),"items-per-page":l(m),"total-items":l(R)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(W,{"is-dialog-visible":l(h),"onUpdate:isDialogVisible":t[6]||(t[6]=a=>f(h)?h.value=a:null),sekolah:l(A),"onUpdate:sekolah":t[7]||(t[7]=a=>f(A)?A.value=a:null),"konten-type":F,"onUpdate:kontenType":t[8]||(t[8]=a=>F=a),onNotif:v},null,8,["is-dialog-visible","sekolah"]),l(r).color?(I(),G(X,{key:0,color:l(r).color,icon:l(r).icon,title:l(r).title,text:l(r).text,"disable-time-out":!1,isSnackbarVisible:l(i),"onUpdate:isSnackbarVisible":t[9]||(t[9]=a=>f(i)?i.value=a:null)},null,8,["color","icon","title","text","isSnackbarVisible"])):ie("",!0),e(Y,{isDialogVisible:l(x),"onUpdate:isDialogVisible":t[10]||(t[10]=a=>f(x)?x.value=a:null),"confirmation-question":"Apakah Anda yakin ingin menghapus data ini?","show-notif":!1,onConfirm:J},null,8,["isDialogVisible"])])}}};export{it as default};
